{"version":3,"sources":["qz.wap.min.js"],"names":["$","jsmodel","clubApis","getWapCardComment","paramsData","callback","beforeSendFnc","apiUrl","ajax","type","dataType","url","data","beforeSend","success","backData","error","err","console","log","getWapCardContext","getWapClubContext","getCommentCount","getWapClubComment","getwapclubuserlike","getLike","addLike","getWapClubCommentwr","getWapCardCommentPage1","paramsFmt","JSON","parse","jsondata","pages","pageIndex","sort","getWapCardCommentPageHot","getWapCardCommentReply","replyPageIndex","clubConfig","listNavSetter","new","hot","best","innerCommentState","isTrim","s","replace","fn","extend","textareaAutoHeight","options","this","_options","minHeight","maxHeight","init","p","parseFloat","height","attr","keyup","resetHeight","change","focus","_minHeight","_maxHeight","browser","msie","h","scrollHeight","scrollTop","css","qzConfig","isCanLoading","loadingDom","loadedDom","loadnullDom","qzFunc","setRem","pw","window","width","font-size","popCommon","open","addClass","close","removeClass","createCard","cdp","cardDom","cardid","head","user","vauth","createtime","spectop","specvalue","isVideo","text","video","src","videoTitle","piclist","length","each","i","item","ext","large","origin","size","undefined","picbig","picType","pic","fromUrl","from","workShareText","substring","addSwpOnce","swp","append","photoSwp","initPhotoSwipeFromDOM","gallerySelector","parseThumbnailElements","el","figureEl","linkEl","thumbElements","childNodes","numNodes","items","nodeType","children","getAttribute","split","w","parseInt","ori","title","innerHTML","msrc","push","closest","parentNode","onThumbnailsClick","e","event","preventDefault","returnValue","eTarget","target","srcElement","clickedListItem","tagName","toUpperCase","index","clickedGallery","numChildNodes","nodeIndex","openPhotoSwipe","galleryElement","disableAnimation","fromURL","setOrigin","num","gallery","pswpElement","shareEl","fullscreenEl","zoomEl","bgOpacity","showHideOpacity","galleryUID","history","tapToClose","getThumbBoundsFn","thumbnail","getElementsByTagName","pageYScroll","pageYOffset","document","documentElement","rect","getBoundingClientRect","x","left","y","top","galleryPIDs","j","pid","isNaN","showAnimationDuration","PhotoSwipe","PhotoSwipeUI_Default","listen","getCurrentIndex","animate","opacity","galleryElements","querySelectorAll","l","setAttribute","onclick","insertCard","tar","dt","insDom","html","like","removeTarget","commentCount","openVideoPop","appendCard","addContext","insertContext","scrolltopval","setAreaSize","$qzPop","find","on","val","textsth","closePop","setTimeout","remove","topic","comDom","clubHtml","selectPhoto","sid","fabuSubmit","UserOnline","response","status","st","addComment","insertComment","cid","commentId","rename","userId","placeholder","commentInner","uerId","$this","commNum","count","initPageTopic","tarInsert","clubId","topicTitle","stringify","responseObject","result","parseJSON","body","cardgroup","page","initPageContext","gcContextJsondata","clubContentId","gcContextParamsData","vCardPage","vmBuild","CommLine","template","more","moretxt","moregray","pagesize","props","mounted","methods","moreBtn","getListData","that","reqData","pageSize","replyPageSize","reqDataFmt","repData","repList","commlist","reply","rld","concat","CommLi","components","CommHot","lists","hotshow","created","isHot","res","errorCode","errorMessage","CommAll","eachnum","moreState","navs","txt","pageall","list","allshow","getList","sortChange","idx","getMore","getFunc","VmMain","Vue","infiniteLoad","loadFunc","scrollJudge","dh","wh","scroll","topicMore","$moreBtn","excludeclubContentId","tabNav","navFunc","fixNav","navTop","$navPos","offset","srlTop","$navWrap","scrollLoading","$html","hh","navSt","scrollLoaded","clearTimeout","loadedTimer","$nav","tarCon","getClub","pageGoto","openId","stopPropagation","createCardComment","cmdt","commDom","commid","name","useId","replytime","context","createCommentReply","replyData","reDom","createCardCommentFull","replylike","editauth","replydevice","replycount","createCardCommentList","insertCardComment","addMore","appendCardComment","createCardLike","lkdt","likeDom","likeid","insertCardLike","appendCardLike","videoPop","vdsrc","$pop","popDom","vdurl","ykSign","ykIndexOfBegin","indexOf","ykIndexOfEnd","createAllTopic","topicDom","Id","Title","allTopic","createList","listDom","$topicList","allTopicJoinCount","addList","dataOriUrl","data-page","data-infiload","$main","popBaiduShare","createPop","initBaiduShare","baiduSrc","Date","_bd_share_config","common","bdText","bdDesc","bdUrl","share","tag","bdSize","_bd_share_main","getScript","showPop","globalBind","sharetext","shareurl","main","resize","ready","joinCount","beforeOpenSt","$div","maxnum","$textarea","minH","rowH","maxH","htm","removeAttr","parent","len","value","substr","$lipic","$fabuVideo","valcon","content","images","eq","small","tinysquare","tiny","imageType","videos","avvid","avtit","avurl","avimg","avname","image","videoUrl","videoVid","siteName","alert","device","prepend","bind","trigger","fileupload","maxFileSize","done","original","imageclass","unbind","parents","not","responseJson","settingSize","settingSizeMb","files","before","cfg","contentType","topicId","loading","excludeIds","clubListParams","support","transData","digg","click","fromDevice","m","commentDo","gCommentCountParams","$th","insertListComment","initFnc","$card","insertBefore","join","clubContent","trim","siblings","replyCommentId","replyId","$qzClComment","fun","insertYmwLoginPop","QZloginForm","returnUrl","location","href","encodeURI","show","hide","jQuery"],"mappings":"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","file":"qz.wap.min.js","sourcesContent":["(function ($) {\r\n    var jsmodel = 'dev';\r\n    //todo:2018.03.06 更新 分离Api处理\r\n    var clubApis = {\r\n        //获取单页评论接口\r\n        getWapCardComment:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"./data/fake.comment.page1.json\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取单页内容接口\r\n        getWapCardContext:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapcardcontext\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取圈子列表数据接口\r\n        getWapClubContext:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubcontent\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取圈子评论数接口\r\n        getCommentCount:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getcommentcount\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取圈子评论接口\r\n        getWapClubComment:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubcomment\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取点赞带头像数据接口\r\n        getwapclubuserlike:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubuserlike\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取点赞数据接口\r\n        getLike:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getlike\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //提交点赞接口\r\n        addLike:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/addlike\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取圈子评论新接口\r\n        getWapClubCommentwr:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubcommentwr\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonP\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //静态页演示用接口，线上不需要保留\r\n        //获取单页评论第一页接口（接口做静态页演示专用）\r\n        getWapCardCommentPage1:function (paramsData,callback,beforeSendFnc) {\r\n            var paramsFmt = JSON.parse(paramsData.jsondata);\r\n            var pages = paramsFmt.pageIndex,sort = paramsFmt.sort;\r\n            //模拟传参返回数据\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubcommentwr\";\r\n            if(sort === 0 && pages === 1){\r\n                apiUrl = \"./data/fake.comment.page1.oldest.json\";\r\n            }else if(sort === 0 && pages === 2){\r\n                apiUrl = \"./data/fake.comment.page2.oldest.json\";\r\n            }else if(sort === 1 && pages === 2){\r\n                apiUrl = \"./data/fake.comment.page2.json\";\r\n            }\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取单页热门评论（接口做静态页演示专用）\r\n        getWapCardCommentPageHot:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"./data/fake.comment.hot.json\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取单页评论回复（接口做静态页演示专用）\r\n        getWapCardCommentReply:function (paramsData,callback,beforeSendFnc) {\r\n            var paramsFmt = JSON.parse(paramsData.jsondata);\r\n            var pages = paramsFmt.replyPageIndex;\r\n            //模拟传参返回数据\r\n            var apiUrl = \"./data/fake.comment.reply.page1.json\";\r\n            if(pages === 3){\r\n                apiUrl = \"./data/fake.comment.reply.page2.json\";\r\n            }\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        }\r\n    };\r\n    var clubConfig = {\r\n        //卡片列表排序方式\r\n        listNavSetter:{\r\n            //最新\r\n            new:{\r\n                sort:1,\r\n                type:0\r\n            },\r\n            //最热\r\n            hot:{\r\n                sort:2,\r\n                type:0\r\n            },\r\n            //精品\r\n            best:{\r\n                sort:1,\r\n                type:1\r\n            }\r\n        },\r\n        // 是否开启开篇列表内回复 val: open | close\r\n        innerCommentState:'close'\r\n    };\r\n    //模拟加载更多用测试数据begin\r\n    var isTrim = function (s) {\r\n        if (typeof (s) == 'undefined') {\r\n            return false;\r\n        }\r\n        return s.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n    };  //清除空格\r\n    $.fn.extend({\r\n        //文本框自适应高度\r\n        textareaAutoHeight: function (options) {\r\n            this._options = { minHeight: 0, maxHeight: 1000 }\r\n            this.init = function () {\r\n                for (var p in options) {\r\n                    this._options[p] = options[p];\r\n                }\r\n                if (this._options.minHeight == 0) {\r\n                    this._options.minHeight = parseFloat($(this).height());\r\n                }\r\n                for (var p in this._options) {\r\n                    if ($(this).attr(p) == null) {\r\n                        $(this).attr(p, this._options[p]);\r\n                    }\r\n                }\r\n                $(this).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight);\r\n            }\r\n            this.resetHeight = function () {\r\n                var _minHeight = parseFloat($(this).attr(\"minHeight\"));\r\n                var _maxHeight = parseFloat($(this).attr(\"maxHeight\"));\r\n\r\n                if (!$.browser.msie) { $(this).height(0); }\r\n                var h = parseFloat(this.scrollHeight);\r\n                h = h < _minHeight ? _minHeight : h > _maxHeight ? _maxHeight : h;\r\n                $(this).height(h).scrollTop(h);\r\n                $(this).css(\"overflow-y\", h >= _maxHeight ? \"scroll\" : \"hidden\");\r\n            }\r\n            this.init();\r\n        }\r\n    });\r\n    var qzConfig = {\r\n        // 判断是否开始无限加载\r\n        isCanLoading: true,\r\n        //加载中 结构\r\n        loadingDom: '<div class=\"qz-loading\">正在加载</div>',\r\n        //全部加载完成 结构\r\n        loadedDom: '<div class=\"qz-loaded\">全部加载完成</div>',\r\n        //内容为空 结构\r\n        loadnullDom: '<div class=\"qz-loadnull\">还没有内容</div>'\r\n    };\r\n    var qzFunc = {\r\n        //设置屏幕缩放\r\n        setRem: function () {\r\n            var pw = $(window).width();\r\n            if (pw >= 640) {\r\n                pw = 640;\r\n            }\r\n            $('html').css({ 'font-size': pw / 6.4 + 'px' });\r\n        },\r\n        //弹窗公用方法\r\n        popCommon:{\r\n            open:function () {\r\n                $('html').addClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','none');\r\n            },\r\n            close:function () {\r\n                $('html').removeClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','block');\r\n            }\r\n        },\r\n        //构建卡片\r\n        createCard: function (cdp) {\r\n            var cardDom = '';\r\n            cardDom += '<div class=\"qz-card qzCard\" data-cid=\"' + cdp.cardid + '\">';\r\n            cardDom += '<header><a class=\"head\"><img src=\"' + cdp.head + '\" alt=\"head\"></a>';\r\n            cardDom += '<div class=\"info\"><h5>';\r\n            cardDom += '<a>' + cdp.user + '</a>';\r\n            if (isTrim(cdp.vauth)) {\r\n                cardDom += '<img src=\"' + cdp.vauth + '\">';\r\n            }\r\n            cardDom += '</h5><p>';\r\n            cardDom += '<span class=\"time\">' + cdp.createtime + '</span>';\r\n            cardDom += '</p>';\r\n            cardDom += '</div>';\r\n            if (cdp.spectop === true || cdp.specvalue === true) {\r\n                cardDom += '<div class=\"spec-icons\">';\r\n                if (cdp.spectop === true) {\r\n                    cardDom += '<a class=\"spec-top\">置顶</a>';\r\n                }\r\n                if (cdp.specvalue === true) {\r\n                    cardDom += '<a class=\"spec-value\">精</a>';\r\n                }\r\n                cardDom += '</div>';\r\n            }\r\n            cardDom += '</header>';\r\n            cardDom += '<section class=\"detail qzZoneHref\" data-href=\"' + cdp.url + '\">';\r\n            cardDom += '<div class=\"content\">';\r\n            if (cdp.isVideo) {\r\n                cardDom += cdp.text;\r\n                cardDom += '<a href=' + cdp.video.src + ' class=\"link-video\">' + cdp.video.videoTitle + '</a>';\r\n            }\r\n            else {\r\n                cardDom += cdp.text;\r\n            }\r\n            cardDom += '</div>';\r\n            if (cdp.piclist.length > 0) {\r\n                cardDom += '<div class=\"media-pic-list\"><div class=\"clearfix qz-figs qzPicPswp\">';\r\n                $.each(cdp.piclist, function (i, item) {\r\n                    cardDom += '<figure class=\"qzPicPswpBtn';\r\n                    if (item.ext === 'gif') {\r\n                        cardDom += ' gif\"';\r\n                        item.large = item.origin;\r\n                    } else if (item.ext === 'long') {\r\n                        cardDom += ' long\"';\r\n                    }\r\n                    cardDom += '\"><a data-picType=\"' + item.ext + '\" data-origin=\"' + item.origin + '\"  data-large=\"' + item.large + '\" data-size=\"' + item.size + '\"><img src=\"' + item.url + '\"></a></figure>';\r\n                });\r\n                cardDom += '</div></div>';\r\n            }\r\n            if (cdp.picbig.large != undefined) {\r\n                cdp.picbig.large = cdp.picbig.url;\r\n                var picType = \"\";\r\n                cardDom += '<div class=\"qzPicPswp media-pic';\r\n                if (cdp.picbig.ext === 'gif') {\r\n                    picType = ' gif';\r\n                    cdp.picbig.large = cdp.picbig.origin;\r\n                } else if (cdp.picbig.ext === 'long') {\r\n                    picType = ' long';\r\n                }\r\n                cardDom += '\"><figure class=\"' + picType + '\"><a  data-picType=\"' + cdp.picbig.ext + '\" data-origin=\"' + cdp.picbig.origin + '\" data-large=\"' + cdp.picbig.large + '\" data-size=\"' + cdp.picbig.size + '\"><img src=\"' + cdp.picbig.url + '\" class=\"qzPicPswpBtn\"></a></figure></div>';\r\n            }\r\n            if (cdp.isVideo) {\r\n                cardDom += '<div class=\"media-video\">';\r\n                cardDom += '<a class=\"qzVideoPopBtn\" data-href=\"' + cdp.video.src + '\"><img src=\"' + cdp.video.pic + '\" alt=\"\"></a></div>'\r\n            }\r\n\r\n            cardDom += '</section>';\r\n            if (cdp.fromUrl) {\r\n                cardDom += '<div class=\"from\">来自：<a href=\"' + cdp.fromUrl + '\" >' + cdp.from + '</a></div>';\r\n            }\r\n            //todo:2018-03-13 更新：添加分享按钮，修改排列\r\n            cardDom += '<footer>';\r\n            var workShareText = cdp.text.replace(/<[^>]+>/g,\"\").substring(0,200);\r\n            cardDom += '<a class=\"btn-share qzBtnShare\" data-sharetext=\"'+workShareText+'\" data-shareurl=\"'+cdp.url+'\">分享</a>';\r\n            cardDom += '<span></span><a class=\"btn-comment qzBtnComment\" data-commcount=\"\"  data-clubcontentid=\"' + cdp.cardid + '\"   data-href=\"' + cdp.url + '\">0</a>';\r\n            cardDom += '<span></span><a class=\"btn-like qzBtnLike\" data-likecount=\"\" data-clubcontentid=\"' + cdp.cardid + '\" ><i></i><b>0</b></a>';\r\n            cardDom += '</footer>';\r\n            cardDom += '</div>';\r\n            cardDom += '';\r\n            cardDom += '';\r\n\r\n            return cardDom;\r\n        },\r\n        //图片弹出层 默认执行,一般情况不需要修改\r\n        addSwpOnce: function () {\r\n            var swp = '<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button><a target=\"_blank\" class=\"pswp__button pswpBtnOrigin pswp__single-tap\" title=\"查看原图\"></a> <button class=\"pswp__button pswp__button--share\" title=\"Share\"></button> <button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button> <button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"><div class=\"pswp__share-tooltip\"></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\"></button> <button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\"></button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div>';\r\n            $('body').append(swp);\r\n        },\r\n        //图片弹出层方法 默认执行,一般情况不需要修改\r\n        photoSwp: function () {\r\n            var initPhotoSwipeFromDOM = function (gallerySelector) {\r\n                var parseThumbnailElements = function (el) {\r\n                    var thumbElements = el.childNodes,\r\n                        numNodes = thumbElements.length,\r\n                        items = [],\r\n                        figureEl,\r\n                        linkEl,\r\n                        size,\r\n                        item;\r\n                    for (var i = 0; i < numNodes; i++) {\r\n                        figureEl = thumbElements[i];\r\n                        if (figureEl.nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        linkEl = figureEl.children[0];\r\n                        size = linkEl.getAttribute('data-size').split('x');\r\n                        item = {\r\n                            src: linkEl.getAttribute('data-large'),\r\n                            w: parseInt(size[0], 10),\r\n                            h: parseInt(size[1], 10),\r\n                            ori: linkEl.getAttribute('data-origin'),\r\n                            picType: linkEl.getAttribute('data-picType')\r\n                        };\r\n                        if (figureEl.children.length > 1) {\r\n                            item.title = figureEl.children[1].innerHTML;\r\n                        }\r\n                        if (linkEl.children.length > 0) {\r\n                            item.msrc = linkEl.children[0].getAttribute('src');\r\n                        }\r\n                        item.el = figureEl;\r\n                        items.push(item);\r\n                    }\r\n                    return items;\r\n                };\r\n                var closest = function closest(el, fn) {\r\n                    return el && (fn(el) ? el : closest(el.parentNode, fn));\r\n                };\r\n                var onThumbnailsClick = function (e) {\r\n                    e = e || window.event;\r\n                    e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n                    var eTarget = e.target || e.srcElement;\r\n                    var clickedListItem = closest(eTarget, function (el) {\r\n                        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');\r\n                    });\r\n                    if (!clickedListItem) {\r\n                        return;\r\n                    }\r\n                    var clickedGallery = clickedListItem.parentNode,\r\n                        childNodes = clickedListItem.parentNode.childNodes,\r\n                        numChildNodes = childNodes.length,\r\n                        nodeIndex = 0,\r\n                        index;\r\n                    for (var i = 0; i < numChildNodes; i++) {\r\n                        if (childNodes[i].nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        if (childNodes[i] === clickedListItem) {\r\n                            index = nodeIndex;\r\n                            break;\r\n                        }\r\n                        nodeIndex++;\r\n                    }\r\n                    if (index >= 0) {\r\n                        openPhotoSwipe(index, clickedGallery);\r\n                    }\r\n                    return false;\r\n                };\r\n\r\n                var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {\r\n                    var pswpElement = $('.pswp')[0],\r\n                        gallery,\r\n                        options,\r\n                        items;\r\n                    items = parseThumbnailElements(galleryElement);\r\n                    options = {\r\n                        shareEl: false,\r\n                        fullscreenEl: false,\r\n                        zoomEl: false,\r\n                        bgOpacity: 1,\r\n                        showHideOpacity: 0,\r\n                        galleryUID: galleryElement.getAttribute('data-pswp-uid'),\r\n                        history: false,\r\n                        tapToClose:true,\r\n                        getThumbBoundsFn: function (index) {\r\n                            var thumbnail = items[index].el.getElementsByTagName('img')[0],\r\n                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\r\n                                rect = thumbnail.getBoundingClientRect();\r\n                            return { x: rect.left, y: rect.top + pageYScroll, w: rect.width };\r\n                        }\r\n                    };\r\n                    if (fromURL) {\r\n                        if (options.galleryPIDs) {\r\n                            for (var j = 0; j < items.length; j++) {\r\n                                if (items[j].pid == index) {\r\n                                    options.index = j;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            options.index = parseInt(index, 10) - 1;\r\n                        }\r\n                    } else {\r\n                        options.index = parseInt(index, 10);\r\n                    }\r\n                    if (isNaN(options.index)) {\r\n                        return;\r\n                    }\r\n                    if (disableAnimation) {\r\n                        options.showAnimationDuration = 0;\r\n                    }\r\n                    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\r\n                    gallery.init();\r\n                    function setOrigin(num) {\r\n                        $('.pswpBtnOrigin').attr('href', items[num].ori)\r\n                    }\r\n                    gallery.listen('initialZoomIn', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                        $('.pswp').animate({ 'opacity': 1 }, 333);\r\n                    });\r\n                    gallery.listen('initialZoomOut', function () {\r\n                        $('.pswp').animate({ 'opacity': 0 }, 200);\r\n                    });\r\n                    gallery.listen('afterChange', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                    });\r\n                };\r\n                var galleryElements = document.querySelectorAll(gallerySelector);\r\n                for (var i = 0, l = galleryElements.length; i < l; i++) {\r\n                    galleryElements[i].setAttribute('data-pswp-uid', i + 1);\r\n                    galleryElements[i].onclick = onThumbnailsClick;\r\n                }\r\n            };\r\n            initPhotoSwipeFromDOM('.qzPicPswp');\r\n        },\r\n        //插入卡片\r\n        insertCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).html(insDom);\r\n            //点赞\r\n            $(\".qzBtnLike\").like();\r\n            $(\".qzBtnLike\").addLike();\r\n            $(\".qzCard .content\").removeTarget();\r\n            $(\".qzBtnComment\").commentCount();\r\n            //构建完成后调用图片弹出层\r\n            qzFunc.photoSwp();\r\n            //开启视频弹窗\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //加载更多卡片\r\n        appendCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).append(insDom);\r\n            //点赞\r\n            $(\".qzBtnLike\").like();\r\n            $(\".qzBtnLike\").addLike();\r\n            $(\".qzCard .content\").removeTarget();\r\n            $(\".qzBtnComment\").commentCount();\r\n            //构建完成后调用图片弹出层\r\n            qzFunc.photoSwp();\r\n            //开启视频弹窗\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //发布/参与\r\n        addContext: function () {\r\n            function insertContext(scrolltopval) {\r\n                var topic = $(\".topic\").attr(\"data-topic\");\r\n                if (topic == '') {\r\n                    topic = $(\".topic\").attr(\"data-selecttopic\");\r\n                }\r\n                var comDom = '';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>发布内容<a class=\"qz-pop-close qzPopClose\"></a><a class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\">';\r\n                comDom += '<div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"分享你的游戏心得...\">';\r\n                if (isTrim(topic)) {\r\n                    comDom += topic;\r\n                }\r\n                comDom += '</textarea > <textarea class=\"mathIpt\" rows=\"3\"></textarea></div > ';\r\n                //上传图片后显示，不传图片不显示 begin\r\n                comDom += '<div class=\"clearfix qz-pic-list\">';\r\n                comDom += '<div class=\"qz-pic-list-li\"><label for=\"qzSelectPhoto\" class=\"qz-pic-list-add\"></label></div>';\r\n                comDom += '</div>';\r\n                comDom += '<input id=\"fileupload\" data-imagesize=\"5120\"  type=\"file\" style=\"display:none\" name=\"files\" method=\"POST\" multiple=\"\">';\r\n                //上传图片后显示，不传图片不显示 end\r\n                comDom += '</div>';\r\n                comDom += '<footer><label for=\"qzSelectPhoto\" class=\"qz-upload-pic qzUploadPic\">图片</label><select class=\"qz-pop-sel\">';\r\n                //右下角选项\r\n                comDom += '</select>';\r\n                //隐藏的上传input\r\n                //comDom += '<input id=\"qzSelectPhoto\" class=\"qz-select-photo\" type=\"file\" accept=\"image/gif,image/jpeg,image/jpg,image/png,image/bmp\">';\r\n                comDom += '</footer></div>';\r\n                //输出弹层\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                var clubHtml = $(\".clubList\").html();\r\n                $(\".qz-pop-sel\").html(clubHtml);\r\n                //选择图片\r\n                $(\".qz-pic-list-add,.qzUploadPic\").selectPhoto();\r\n                //选择圈子\r\n                $(\".qz-pop-sel\").change(function (event) {\r\n                    event.preventDefault();\r\n                    var sid = $(this).find('option:selected').val();\r\n                    $(\".clubId\").attr(\"data-selectclubid\", sid);\r\n                });\r\n                //添加弹层动画\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                //设置textarea尺寸\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n                //关闭弹层\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    //等待弹层动画执行完后移除弹层\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                //关闭按钮\r\n                $('.qzPopClose').on('click', closePop);\r\n                //发布按钮\r\n                $qzPop.fabuSubmit(scrolltopval);\r\n\r\n            }\r\n            //绑定发布按钮事件\r\n            $('#qzMain').on('click', '.qzBtnContext', function () {\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var st = $('html').scrollTop();\r\n                        if (st === 0) {\r\n                            st = $('body').scrollTop();\r\n                        }\r\n                        setTimeout(function () {\r\n                            $('html,body').addClass('hideScroll');\r\n                        }, 300);\r\n                        //打开弹层\r\n                        insertContext(st);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        //评论\r\n        addComment: function () {\r\n            function insertComment(scrolltopval, cid, commentId, rename, userId) {\r\n                var comDom = '', placeholder = rename ? '回复 ' + rename + '：' : '我来说两句...';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>评论<a class=\"qz-pop-close qzPopClose\"></a><a data-userId=\"' + userId + '\" data-clubContentId=\"' + cid + '\"  data-commentId=\"' + commentId + '\" class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\"><div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"' + placeholder + '\"></textarea><textarea class=\"mathIpt\" rows=\"3\"></textarea></div></div>';\r\n                comDom += '</div>';\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                //设置textarea尺寸\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                //关闭按钮\r\n                $('.qzPopClose').on('click', closePop);\r\n                //发布按钮\r\n                $('.qzPopSmt').on('click', function () {\r\n                    var context = $qzPop.find('.realIpt').val();\r\n                    //数据提交后执行下面函数\r\n                    $(this).addComment(scrolltopval);\r\n                });\r\n            }\r\n\r\n            $('#qzMain').on('click', '.qzBtnComment', function () {\r\n                var $this = $(this),commNum = $this.data('commcount'),url = $this.data('href');\r\n                if(commNum>0 && $('#qzCardContext').length < 1){\r\n                    window.open(url, '_blank');\r\n                    return false;\r\n                }\r\n                $this.UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var st = $('html').scrollTop(),\r\n                            cid = $this.data('clubcontentid'),\r\n                            //评论数量\r\n                            count = $this.data('commcount'),\r\n                            //回复的用户名\r\n                            uerId = $this.data('userid'),\r\n                            commentId = $this.data('commid'),\r\n                            rename = $this.attr('data-name');\r\n\r\n                        //判断是否单页 单页直接打开弹层，不判断评论数\r\n                        if ($('#qzCardContext').length > 0) {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            //打开弹层\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                            return false;\r\n                        }\r\n                        if (count === 0 || count == \"\") {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            //打开弹层\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n            //todo:2018.03.06 更新 绑定弹出回复\r\n            function commentInner(tar) {\r\n                tar.UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var st = $('html').scrollTop(),\r\n                            cid = tar.data('clubcontentid'),\r\n                            count = tar.data('commcount'),\r\n                            url = tar.data('href'),\r\n                            uerId = tar.data('userid'),\r\n                            commentId = tar.data('commid'),\r\n                            rename = tar.attr('data-name');\r\n\r\n                        if (st === 0) {\r\n                            st = $('body').scrollTop();\r\n                        }\r\n                        setTimeout(function () {\r\n                            $('html,body').addClass('hideScroll');\r\n                        }, 300);\r\n                        insertComment(st, cid, commentId, rename, uerId);\r\n                    }\r\n                });\r\n            }\r\n            $('#qzMain').on('click', '.qzBtnCommentInner', function () {\r\n                var $this = $(this);\r\n                commentInner($this);\r\n            });\r\n        },\r\n        //初始化内容 话题上部\r\n        initPageTopic: function () {\r\n            var tar = '#qzCardListTopic', tarInsert = $(tar);\r\n            if (tarInsert.length > 0) {\r\n                //获取数据，具体参数和方式后端自定义\r\n                var dt = \"http://192.168.0.100:9014/apis/club/api/GetWapClubContentByTopic\";\r\n                var clubId = $(\".clubId\").attr(\"data-selectClubId\");\r\n                var topicTitle = $(\".topic\").attr(\"data-topic\");\r\n                var jsondata = {\r\n                    clubId: clubId,\r\n                    topicTitle: topicTitle,\r\n                    pageIndex: 0\r\n                };\r\n                $.ajax({\r\n                    type: \"post\",\r\n                    dataType: \"json\",\r\n                    url: dt,\r\n                    data: { jsondata: JSON.stringify(jsondata) },\r\n                    beforeSend: function () {\r\n                        //插入加载动画\r\n                        tarInsert.append(qzConfig.loadingDom);\r\n                    },\r\n                    success: function (responseObject) {\r\n                        var result = $.parseJSON(responseObject.body);\r\n                        //判断数据状态\r\n                        if (result.dataType === 'ok' && result.cardgroup.length > 0) {\r\n\r\n                            $(\".comeFrom\").html(result.cardgroup[0].from);\r\n                            //处理获取的数据\r\n                            tarInsert.attr('data-page', result.page);\r\n                            //允许无限加载\r\n                            tarInsert.attr('data-moreload', 'open');\r\n                            qzFunc.insertCard(tar, result.cardgroup);\r\n                            if (result.count <= 1) {\r\n                                $(\".qzCardMoreBtn\").remove();\r\n                            }\r\n                            $(\".qz-rem\").css(\"display\", \"block\");\r\n                        } else {\r\n                            //数据为空是插入提示\r\n                            tarInsert.html(qzConfig.loadnullDom);\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        //初始化内容 内容单页\r\n        initPageContext: function () {\r\n            var tar = '#qzCardContext', tarInsert = $(tar);\r\n            if (tarInsert.length > 0) {\r\n                //todo:2018.03.06 更新 生成内容单页\r\n                var gcContextJsondata = {\r\n                    clubContentId: tarInsert.attr(\"data-cid\")\r\n                };\r\n                var gcContextParamsData = {jsondata: JSON.stringify(gcContextJsondata)}\r\n                clubApis.getWapCardContext(gcContextParamsData,function (responseObject) {\r\n                    var result = $.parseJSON(responseObject.body);\r\n                    if (result.dataType === 'ok') {\r\n                        tarInsert.attr('data-page', result.page);\r\n                        qzFunc.insertCard(tar, result.cardgroup);\r\n                    } else {\r\n                        tarInsert.html(qzConfig.loadnullDom);\r\n                    }\r\n                },function () {\r\n                    tarInsert.append(qzConfig.loadingDom);\r\n                });\r\n                //todo:2018.03.15 更新 生成内容单页评论 vue重构\r\n                var vCardPage = {\r\n                    vmBuild:function () {\r\n                        var cid = $('#clubCardComment').data('cid');\r\n                        //评论内回复组件\r\n                        var CommLine = {\r\n                            template:'\\\r\n                                <div class=\"info-comment\">\\\r\n                                    <div v-for=\"item in rld\" class=\"ic-item qzBtnCommentInner\" :data-clubcontentid=\"cid\" :data-commid=\"item.commid\" :data-name=\"item.name\" :data-userid=\"item.useId\">\\\r\n                                        <a class=\"ici-name\">{{item.name}}</a>\\\r\n                                        <i v-if=\"item.reply\" class=\"ici-rpy\">回复</i>\\\r\n                                        <a v-if=\"item.reply\" class=\"ici-name\">{{item.reply}}</a>\\\r\n                                        <a class=\"ici-name\">：&nbsp;</a><span class=\"ici-context\">{{item.context}}</span>\\\r\n                                    </div>\\\r\n                                    <a class=\"info-comment-more\" v-if=\"more\" :class=\"moregray?\\'disable\\':\\'\\'\" @click=\"moreBtn\">{{moretxt}}</a>\\\r\n                                </div>\\\r\n                            ',\r\n                            data:function () {\r\n                                return {\r\n                                    more:false,\r\n                                    moretxt:'查看全部'+(this.count-2)+'条回复',\r\n                                    moregray:false,\r\n                                    page:2,\r\n                                    pagesize:10\r\n                                }\r\n                            },\r\n                            props:['rld','cid','count'],\r\n                            mounted:function () {\r\n                                if(this.count>2){\r\n                                    this.more = true;\r\n                                }\r\n                            },\r\n                            methods:{\r\n                                moreBtn:function () {\r\n                                    if((this.page-2)*this.pagesize<=(this.count-2)){\r\n                                        this.getListData();\r\n                                    };\r\n                                },\r\n                                getListData:function () {\r\n                                    var that = this,\r\n                                        reqData = {\r\n                                            clubContentId: cid,\r\n                                            pageIndex: 1,\r\n                                            pageSize: 1,\r\n                                            sort:0,\r\n                                            replyPageIndex:that.page,\r\n                                            replyPageSize:that.pagesize\r\n                                        },\r\n                                        reqDataFmt = {jsondata: JSON.stringify(reqData)};\r\n                                    console.log(reqDataFmt)\r\n                                    clubApis.getWapClubCommentwr(reqDataFmt,function (repData) {\r\n                                        console.log(repData)\r\n                                        var result = repData.body;\r\n                                        if(result.dataType === 'ok'){\r\n                                            var repList = result.commlist[0].reply;\r\n                                            that.rld = that.rld.concat(repList);\r\n                                            if(that.pagesize*(that.page-1)>=that.count){\r\n                                                that.moretxt = '全部加载完成';\r\n                                                that.moregray = true;\r\n                                            }else{\r\n                                                that.moretxt = '查看剩余'+(that.count-that.pagesize*(that.page - 1) - 2)+'条回复';\r\n                                            }\r\n                                            that.page++;\r\n                                        }\r\n                                    },function () {\r\n                                        that.moretxt = '加载中...'\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                        //评论组件\r\n                        var CommLi = {\r\n                            template:'\\\r\n                                <li>\\\r\n                                    <a class=\"head\"><img :src=\"item.head\" :alt=\"item.name\"></a>\\\r\n                                    <div class=\"info\">\\\r\n                                        <h5>{{item.name}}<a class=\"info-like\">{{item.replyLike}}</a></h5>\\\r\n                                        <div class=\"info-others\"><span class=\"info-time\">{{item.replyTime}}</span></div>\\\r\n                                        <div class=\"context qzBtnCommentInner\" :data-clubcontentid=\"item.clubContentId\" :data-commid=\"item.commid\" :data-name=\"item.name\" :data-userid=\"item.useId\" v-html=\"item.context\"></div>\\\r\n                                        <comm-line v-if=\"item.replyCount>0\" :count=\"item.replyCount\" :cid=\"item.clubContentId\" :rld=\"item.reply\"></comm-line>\\\r\n                                     </div>\\\r\n                                </li>\\\r\n                            ',\r\n                            props:['item'],\r\n                            components:{\r\n                                CommLine:CommLine\r\n                            },\r\n                            mounted:function () {\r\n                                console.log(this.item)\r\n                            }\r\n                        };\r\n                        var CommHot = {\r\n                            template:'\\\r\n                                <div v-if=\"hotshow\" class=\"club-card-comment-list-hot\">\\\r\n                                    <h4>热门评论</h4>\\\r\n                                    <ul class=\"club-card-comment-list\">\\\r\n                                        <comm-li v-for=\"item in lists\" :item=\"item\"></comm-li>\\\r\n                                    </ul>\\\r\n                                </div>\\\r\n                            ',\r\n                            data:function () {\r\n                                return {\r\n                                    page:1,\r\n                                    lists:[],\r\n                                    hotshow:false\r\n                                }\r\n                            },\r\n                            created:function () {\r\n                                var that = this,reqData = {\r\n                                        clubContentId: cid,\r\n                                        isHot:1,\r\n                                        pageIndex: that.page,\r\n                                        pageSize: 1000 //热门默认全部显示\r\n                                    },\r\n                                    reqDataFmt = {jsondata: JSON.stringify(reqData)};\r\n                                clubApis.getWapClubCommentwr(reqDataFmt,function (res) {\r\n                                    if (res.errorCode === 0) {\r\n                                        var result = res.result;\r\n                                        if(result.count > 0){\r\n                                            that.hotshow = true;\r\n                                            that.lists = result.commlist;\r\n                                        }\r\n                                    }else{\r\n                                        console.log(res.errorMessage)\r\n                                    }\r\n                                });\r\n                            },\r\n                            components:{\r\n                                CommLine:CommLine,\r\n                                CommLi:CommLi\r\n                            }\r\n                        };\r\n                        //全部评论组件\r\n                        var CommAll = {\r\n                            template:'\\\r\n                                <div v-if=\"allshow\" class=\"club-card-comment-list-all\">\\\r\n                                    <nav><a v-for=\"(nav,idx) in navs\" :class=\"nav.sort===sort?\\'cur\\':\\'\\'\" @click=\"sortChange(idx)\">{{nav.txt}}</a></nav>\\\r\n                                    <ul class=\"club-card-comment-list\">\\\r\n                                        <comm-li v-for=\"(item,idx) in navs[sort].list\" :item=\"item\" :key=\"idx\"></comm-li>\\\r\n                                    </ul>\\\r\n                                    <a class=\"club-card-comment-more\" @click=\"getMore\" v-html=\"moreState[navs[sort].more]\"></a>\\\r\n                                </div>\\\r\n                            ',\r\n                            data:function () {\r\n                                return {\r\n                                    sort:1,\r\n                                    eachnum:10,\r\n                                    moreState:['查看更多','全部加载完成','<i></i>正在加载'],\r\n                                    navs:[\r\n                                        {\r\n                                            txt:'最早',\r\n                                            sort:0,\r\n                                            page:1,\r\n                                            pageall:0,\r\n                                            more:1,\r\n                                            list:[]\r\n                                        },\r\n                                        {\r\n                                            txt:'最新',\r\n                                            sort:1,\r\n                                            page:1,\r\n                                            pageall:0,\r\n                                            more:1,\r\n                                            list:[]\r\n                                        }\r\n                                    ],\r\n                                    lists:[],\r\n                                    allshow:false\r\n                                }\r\n                            },\r\n                            created:function () {\r\n                                this.getList(this.navs[this.sort].page);\r\n                            },\r\n                            components:{\r\n                                CommLine:CommLine,\r\n                                CommLi:CommLi\r\n                            },\r\n                            methods:{\r\n                                getList:function (page) {\r\n                                    var that = this,\r\n                                        reqData = {\r\n                                            clubContentId: cid,\r\n                                            pageIndex: page,\r\n                                            pageSize: that.eachnum,\r\n                                            sort:that.sort\r\n                                        },\r\n                                        reqDataFmt = {jsondata: JSON.stringify(reqData)};\r\n                                    clubApis.getWapClubCommentwr(reqDataFmt,function (res) {\r\n                                        if (res.errorCode === 0) {\r\n                                            var result = res.result;\r\n                                            that.allshow = true;\r\n                                            that.navs[that.sort].pageall = result.count;\r\n                                            that.navs[that.sort].list = that.navs[that.sort].list.concat(result.commlist);\r\n                                            if(that.navs[that.sort].page*that.eachnum<result.count){\r\n                                                that.navs[that.sort].more = 0;\r\n                                            }else{\r\n                                                that.navs[that.sort].more = 1;\r\n                                            }\r\n                                        }else{\r\n                                            console.log(res.errorMessage)\r\n                                        }\r\n                                    },function () {\r\n                                        that.navs[that.sort].more = 2;\r\n                                    });\r\n                                },\r\n                                sortChange:function (idx) {\r\n                                    var that = this;\r\n                                    that.sort = idx;\r\n                                    if(that.navs[idx].list.length<1){\r\n                                        that.getList(that.navs[that.sort].page);\r\n                                    }\r\n                                },\r\n                                getMore:function () {\r\n                                    var that = this;\r\n                                    function getFunc() {\r\n                                        that.getList(++that.navs[that.sort].page);\r\n                                    }\r\n                                    if(that.navs[that.sort].page*that.eachnum<that.navs[that.sort].pageall){\r\n                                        getFunc();\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        var VmMain = {\r\n                            template:'<div class=\"club-card-comment-box\"><comm-hot></comm-hot><comm-all></comm-all></div>',\r\n                            components:{\r\n                                CommHot:CommHot,\r\n                                CommAll:CommAll\r\n                            }\r\n                        }\r\n                        var vmCardComment = new Vue({\r\n                            el:'#clubCardComment',\r\n                            components:{\r\n                                VmMain:VmMain\r\n                            }\r\n                        });\r\n                    },\r\n                    init:function () {\r\n                        this.vmBuild();\r\n                    }\r\n                };\r\n                vCardPage.init();\r\n            }\r\n        },\r\n        //无限加载\r\n        infiniteLoad: function (tar, callback) {\r\n            function loadFunc() {\r\n                var tarInsert = $(tar);\r\n                //判断列表是否开启无限加载\r\n                if (tarInsert.attr('data-infiload') === 'open') {\r\n                    //获取数据，具体参数和方式后端自定义\r\n                    if (typeof callback === 'function') {\r\n                        callback(tar, tarInsert);\r\n                    }\r\n                }\r\n            }\r\n            function scrollJudge() {\r\n                var st = $('html').scrollTop(), dh = $(document).height(), wh = $(window).height();\r\n                if (st === 0) {\r\n                    st = $('body').scrollTop();\r\n                }\r\n                if (st > dh - wh - 100 && st > wh - dh && qzConfig.isCanLoading === true) {\r\n                    qzConfig.isCanLoading = false;\r\n                    loadFunc();\r\n                }\r\n            }\r\n            if ($(tar).length > 0) {\r\n                $(window).scroll(function () {\r\n                    scrollJudge();\r\n                });\r\n            }\r\n        },\r\n        //话题页上部加载更多按钮\r\n        topicMore: function () {\r\n            var $moreBtn = $('.qzCardMoreBtn');\r\n            $moreBtn.on('click', function () {\r\n                var tarInsert = $('#qzCardListTopic');\r\n                //判断列表是否开启查看更多\r\n                if (tarInsert.length > 0 && tarInsert.attr('data-moreload') === 'open') {\r\n                    //获取数据，具体参数和方式后端自定义\r\n                    var dt = \"http://192.168.0.100:9014/apis/club/api/GetWapClubContentByTopic\";\r\n                    var clubId = $(\".clubId\").attr(\"data-selectClubId\");\r\n                    var topicTitle = $(\".topic\").attr(\"data-topic\");\r\n                    var excludeclubContentId = tarInsert.find(\".qzCard\").attr(\"data-cid\");\r\n                    var pageIndex = parseInt(tarInsert.attr(\"data-pageIndex\"));\r\n                    var pageSize = pageIndex == 0 ? 9 : 10;\r\n                    pageIndex = pageIndex == 0 ? 1 : pageIndex + 1;\r\n                    var jsondata = {\r\n                        clubId: clubId,\r\n                        topicTitle: topicTitle,\r\n                        excludeclubContentId: excludeclubContentId,\r\n                        pageIndex: pageIndex,\r\n                        pageSize: pageSize\r\n                    };\r\n                    $.ajax({\r\n                        type: \"get\",\r\n                        dataType: \"json\",\r\n                        url: dt,\r\n                        data: { jsondata: JSON.stringify(jsondata) },\r\n                        beforeSend: function () {\r\n                            //插入加载动画\r\n                            tarInsert.append(qzConfig.loadingDom);\r\n                        },\r\n                        success: function (responseObject) {\r\n                            var result = $.parseJSON(responseObject.body);\r\n                            //加载成功后移除加载动画\r\n                            tarInsert.find('.qz-loading').remove();\r\n                            //判断时候还有当前数据页码是否加载完成\r\n                            if (result.cardgroup.length > 0) {\r\n                                //设置新页码\r\n                                tarInsert.attr('data-pageIndex', pageIndex);\r\n                                //插入更多数据\r\n                                qzFunc.appendCard('#qzCardListTopic', result.cardgroup);\r\n                                if (result.cardgroup.length < pageSize) {\r\n                                    tarInsert.attr('data-moreload', 'close');\r\n                                    $moreBtn.html('全部加载完成');\r\n                                }\r\n                            } else {\r\n                                if (tarInsert.attr('data-moreload') === 'open') {\r\n                                    //全部加载完成 关闭加载\r\n                                    tarInsert.attr('data-moreload', 'close');\r\n                                    //按钮 改变提示文字\r\n                                    $moreBtn.html('全部加载完成');\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        //列表切换\r\n        tabNav: function () {\r\n            function navFunc() {\r\n                var $nav = $('.qzNavFx'),\r\n                    //浮动导航层\r\n                    $navWrap = $('.qzNavFxW'),\r\n                    //固定不动的占位导航\r\n                    $navPos = $('.qzNavPos'),\r\n                    loadedTimer;\r\n                //判断滚动距离添加浮动导航\r\n                function fixNav() {\r\n                    var navTop = $navPos.offset().top, srlTop = $('html').scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    if (srlTop >= navTop) {\r\n                        $navWrap.addClass('openQzNavFixed');\r\n                    } else {\r\n                        $navWrap.removeClass('openQzNavFixed');\r\n                    }\r\n                }\r\n                fixNav();\r\n                $(window).scroll(function () {\r\n                    fixNav();\r\n                });\r\n                //加载tab内容前 页面位置\r\n                function scrollLoading() {\r\n                    var $html = $('html'), hh = $html.height(),\r\n                        navSt = $navPos.offset().top, srlTop = $html.scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    $html.css('height', hh);\r\n                    if (srlTop > navSt) {\r\n                        $('html,body').animate({ scrollTop: navSt }, 0);\r\n                    }\r\n                }\r\n                //加载tab内容后 页面位置\r\n                function scrollLoaded() {\r\n                    var $html = $('html');\r\n                    clearTimeout(loadedTimer);\r\n                    loadedTimer = setTimeout(function () {\r\n                        $html.css('height', '');\r\n                    }, 200);\r\n                }\r\n                //点击切换绑定事件\r\n                $nav.find('a').on('click', function () {\r\n                    var $this = $(this), tarCon = '#qzCardList';\r\n                    //设置按钮点击后样式\r\n                    $nav.find('a').removeClass('cur');\r\n                    $this.addClass('cur');\r\n                    $(tarCon).html(\"\").attr(\"data-pageIndex\", 0).attr(\"data-loading\", false);\r\n                    qzConfig.isCanLoading = false;\r\n                    scrollLoading();\r\n                    $(tarCon).getClub(function () {\r\n                        scrollLoaded();\r\n                    });\r\n                })\r\n            }\r\n            if ($('.qzNavFx').length > 0) {\r\n                navFunc();\r\n            }\r\n        },\r\n        //单页跳转\r\n        pageGoto: function () {\r\n            var openId = $('.qz-card-list');\r\n            //点击其他区域跳转到单页\r\n            openId.on('click', '.qzCard .qzZoneHref', function () {\r\n                var $this = $(this), url = $this.data('href');\r\n                //window.location.href = url;\r\n                window.open(url, '_blank');\r\n            });\r\n            //阻止事件冒泡\r\n            openId.on('click', '.qzZoneHref figure,.qzZoneHref a', function (event) {\r\n                event.stopPropagation();\r\n            });\r\n        },\r\n        //构建卡片内评论\r\n        createCardComment: function (cmdt) {\r\n            var commDom = '';\r\n            commDom += '<li data-commid=\"' + cmdt.commid + '\"><a class=\"head\">';\r\n            commDom += '<img src=\"' + cmdt.head + '\" alt=\"' + cmdt.name + '\"></a>';\r\n            commDom += '<div class=\"info qzBtnComment\" data-clubcontentid=\"' + cmdt.clubContentId + '\" data-commid=\"' + cmdt.commid + '\" data-name=\"' + cmdt.name + '\"  data-userId=\"' + cmdt.useId + '\">';\r\n            commDom += '<h5>' + cmdt.name;\r\n            if (cmdt.reply) {\r\n                commDom += '<b>回复</b>' + cmdt.reply;\r\n            }\r\n            commDom += '</h5>';\r\n            commDom += '<p class=\"time\">' + cmdt.replytime + '</p>';\r\n            commDom += '<div class=\"context\">';\r\n            commDom += cmdt.context;\r\n            commDom += '</div></div></li>';\r\n            return commDom;\r\n        },\r\n        //todo 2018-03-14 更新 构建单页评论内回复\r\n        createCommentReply:function (replyData,cid) {\r\n            var reDom = '';\r\n            reDom += '<div class=\"ic-item qzBtnCommentInner\" data-clubcontentid=\"'+cid+'\" data-commid=\"'+replyData.commid+'\" data-name=\"'+replyData.name+'\" data-userid=\"'+replyData.useId+'\"><a class=\"ici-name\">'+replyData.name+'</a>';\r\n            if(replyData.reply !== null){\r\n                reDom += '<i class=\"ici-rpy\">回复</i><a class=\"ici-name\">'+replyData.reply+'</a>';\r\n            }\r\n            reDom += '<a class=\"ici-name\">：&nbsp;</a><span class=\"ici-context\">'+replyData.context+'</span></div>';\r\n            return reDom;\r\n        },\r\n        //todo:2018.03.13 更新 构建卡片内评论\r\n        createCardCommentFull: function (cmdt) {\r\n            var commDom = '',that = this;\r\n            commDom += '<li data-commid=\"' + cmdt.commid + '\"';\r\n            if(cmdt.replylike>=5){\r\n                commDom += ' class=\"with-hot-tags\">';\r\n            }else{\r\n                commDom += '>';\r\n            }\r\n            commDom += '<a class=\"head\">';\r\n            commDom += '<img src=\"' + cmdt.head + '\" alt=\"' + cmdt.name + '\"></a>';\r\n            commDom += '<div class=\"info\">';\r\n            commDom += '<h5>' + cmdt.name;\r\n            if(cmdt.editauth){\r\n                commDom += '<img src=\"'+cmdt.editauth+'\" alt=\"编辑\">';\r\n            }\r\n            commDom += '<a class=\"info-like\">' + cmdt.replylike + '</a>';\r\n            commDom += '</h5>';\r\n            commDom += '<div class=\"info-others\"><span class=\"info-time\">' + cmdt.replytime + '</span><span class=\"info-device\">来自' + cmdt.replydevice + '</span></div>';\r\n\r\n            commDom += '<div class=\"context qzBtnCommentInner\" data-clubcontentid=\"'+cmdt.clubContentId+'\" data-commid=\"'+cmdt.commid+'\" data-name=\"'+cmdt.name+'\" data-userid=\"'+cmdt.useId+'\">';\r\n            commDom += cmdt.context;\r\n            commDom += '</div>';\r\n            if(cmdt.reply !== null){\r\n                commDom += '<div class=\"info-comment\">';\r\n                $.each(cmdt.reply,function (i,item) {\r\n                    if(i<2){\r\n                        commDom += that.createCommentReply(item,cmdt.commid);\r\n                    }\r\n                });\r\n                if(cmdt.reply.length>2){\r\n                    commDom += '<a class=\"info-comment-more\">查看全部'+cmdt.replycount+'条回复</a>'\r\n                }\r\n                commDom += '</div>';\r\n            }\r\n            commDom += '</div></li>';\r\n            return commDom;\r\n        },\r\n        createCardCommentList: function (cmdt) {\r\n            var commDom = '';\r\n            commDom += '<li data-commid=\"' + cmdt.commid + '\"><a class=\"head\">';\r\n            commDom += '<img src=\"' + cmdt.head + '\" alt=\"' + cmdt.name + '\"></a>';\r\n            commDom += '<div class=\"info qzBtnCommentInner\" data-clubcontentid=\"' + cmdt.clubContentId + '\" data-commid=\"' + cmdt.commid + '\" data-name=\"' + cmdt.name + '\"  data-userId=\"' + cmdt.useId + '\">';\r\n            commDom += '<h5>' + cmdt.name;\r\n            if (cmdt.reply) {\r\n                commDom += '<b>回复</b>' + cmdt.reply;\r\n            }\r\n            commDom += '</h5>';\r\n            commDom += '<p class=\"time\">' + cmdt.replytime + '</p>';\r\n            commDom += '<div class=\"context\">';\r\n            commDom += cmdt.context;\r\n            commDom += '</div></div></li>';\r\n            return commDom;\r\n        },\r\n        //todo:2018.03.06 更新 重构卡片内评论\r\n        insertCardComment: function (tar, dt , addMore) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardCommentFull(item);\r\n            });\r\n            if(addMore === true){\r\n                insDom += '<a class=\"club-card-comment-more clubCardCommentMore\" data-clk=\"can\">查看更多</a>';\r\n            }else{\r\n                insDom += '<a class=\"club-card-comment-more\">全部加载完成</a>';\r\n            }\r\n            $(tar).html(insDom);\r\n        },\r\n        //插入卡片内更多评论\r\n        appendCardComment: function (tar, dt , addMore) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardCommentFull(item);\r\n            });\r\n            if(addMore === true){\r\n                insDom += '<a class=\"club-card-comment-more clubCardCommentMore\" data-clk=\"can\">查看更多</a>';\r\n            }else{\r\n                insDom += '<a class=\"club-card-comment-more\">全部加载完成</a>';\r\n            }\r\n            $(tar).append(insDom);\r\n        },\r\n        //构建卡片内赞\r\n        createCardLike: function (lkdt) {\r\n            var likeDom = '';\r\n            likeDom += '<li data-likeid=\"' + lkdt.likeid + '\"><a class=\"head\">';\r\n            likeDom += '<img src=\"' + lkdt.head + '\" alt=\"' + lkdt.name + '\"></a>';\r\n            likeDom += '<div class=\"name\"><a>' + lkdt.name + '</a></div>';\r\n            likeDom += '</div></li>';\r\n            return likeDom;\r\n        },\r\n        //插入卡片内赞\r\n        insertCardLike: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardLike(item);\r\n            });\r\n            $(tar).html(insDom);\r\n        },\r\n        //插入卡片内更多赞\r\n        appendCardLike: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardLike(item);\r\n            });\r\n            $(tar).append(insDom);\r\n        },\r\n        //打开视频弹窗\r\n        openVideoPop: function () {\r\n            function videoPop(vdsrc) {\r\n                var popDom = '';\r\n                popDom += '<div class=\"qz-video-pop qzVideoPop\">';\r\n                popDom += '<div class=\"qz-video-pop-con\">';\r\n                popDom += '<iframe height=\"100%\" width=\"100%\" src=\"http://player.youku.com/embed/' + vdsrc + '\" frameborder=0 allowfullscreen></iframe>';\r\n                popDom += '</div>';\r\n                popDom += '<div class=\"qz-video-bar\"><a class=\"qz-video-pop-close qzVideoPopClose\"></div></a>';\r\n                popDom += '</div>';\r\n                $('body').append(popDom);\r\n                var $pop = $('.qzVideoPop');\r\n                setTimeout(function () {\r\n                    $pop.addClass('cur');\r\n                }, 10);\r\n                function closePop() {\r\n                    $pop.removeClass('cur');\r\n                    setTimeout(function () {\r\n                        $pop.remove();\r\n                    }, 250);\r\n                }\r\n                $pop.on('click', closePop);\r\n                $pop.on('click', 'iframe', function (event) {\r\n                    event.stopPropagation();\r\n                });\r\n            }\r\n            $('.qzVideoPopBtn').on('click', function () {\r\n                var $this = $(this), vdurl = $this.data('href'), vdsrc = '';\r\n                var ykSign = 'http://v.youku.com/v_show/id_', ykIndexOfBegin = vdurl.indexOf(ykSign) + ykSign.length, ykIndexOfEnd = vdurl.indexOf('==.html');\r\n                vdsrc = vdurl.substring(ykIndexOfBegin, ykIndexOfEnd);\r\n                videoPop(vdsrc);\r\n            })\r\n        },\r\n        //构建全部话题列表\r\n        createAllTopic: function (dt) {\r\n            var topicDom = '';\r\n            topicDom += '<li data-topicid=\"' + dt.Id + '\" data-topic=\"' + dt.Title + '\"><a href=\"http://192.168.0.100:9014/apis/m/topic/' + dt.Id + '\"><b>' + dt.Title + '</b><span><i class=\"num-in\">0</i>人参与<i class=\"num-comm\">0</i>条主题</span></a></li>';\r\n            return topicDom;\r\n        },\r\n        //插入全部话题列表\r\n        allTopic: function () {\r\n            var $topicList = $('#qzAllTopicList');\r\n            var dataOriUrl = \"http://192.168.0.100:9014/apis/club/api/gettopicall\";\r\n            var pageSize = $topicList.attr(\"data-pageSize\");\r\n            function createList(dt) {\r\n                var listDom = '';\r\n                $.each(dt, function (i, item) {\r\n                    listDom += qzFunc.createAllTopic(item);\r\n                });\r\n                $topicList.html(listDom);\r\n                $(\"#qzAllTopicList li\").allTopicJoinCount();\r\n            }\r\n            function addList(dt) {\r\n                var listDom = '';\r\n                $.each(dt, function (i, item) {\r\n                    listDom += qzFunc.createAllTopic(item);\r\n                });\r\n                $topicList.append(listDom);\r\n                $(\"#qzAllTopicList li\").allTopicJoinCount();\r\n            }\r\n            function getListData() {\r\n                var pageIndex = parseInt($topicList.attr(\"data-page\")) + 1;\r\n                var jsondata = {\r\n                    pageIndex: pageIndex,\r\n                    pageSize: pageSize\r\n                };\r\n                $.ajax({\r\n                    type: \"get\",\r\n                    dataType: \"jsonp\",\r\n                    url: dataOriUrl,\r\n                    data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                    success: function (result) {\r\n                        $topicList.attr({ 'data-page': pageIndex, 'data-infiload': 'open' });\r\n                        createList(result);\r\n                    }\r\n                })\r\n            }\r\n            if ($topicList.length > 0) {\r\n                getListData();\r\n                qzFunc.infiniteLoad('#qzAllTopicList', function (tar, tarInsert) {\r\n                    var $main = $('#qzMain'), pageIndex = parseInt($topicList.attr(\"data-page\")) + 1;\r\n                    var jsondata = {\r\n                        pageIndex: pageIndex,\r\n                        pageSize: pageSize\r\n                    };\r\n                    $.ajax({\r\n                        type: \"get\",\r\n                        dataType: \"jsonp\",\r\n                        url: dataOriUrl,\r\n                        data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                        beforeSend: function () {\r\n                            //插入加载动画\r\n                            $main.append(qzConfig.loadingDom);\r\n                        },\r\n                        success: function (result) {\r\n                            //加载成功后移除加载动画\r\n                            $main.find('.qz-loading').remove();\r\n                            //判断时候还有当前数据页码是否加载完成\r\n                            if (result.length > 0) {\r\n                                //设置新页码\r\n                                tarInsert.attr('data-page', pageIndex);\r\n                                //插入更多数据\r\n                                addList(result);\r\n                            } else {\r\n                                if (tarInsert.attr('data-infiload') === 'open') {\r\n                                    //全部加载完成 关闭加载\r\n                                    tarInsert.attr('data-infiload', 'close');\r\n                                    //插入 全部加载完成 提示\r\n                                    $main.append(qzConfig.loadedDom);\r\n                                }\r\n                            }\r\n                            qzConfig.isCanLoading = true;\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        //todo 2018-03-13 更新：添加百度分享\r\n        //百度分享弹窗\r\n        popBaiduShare:function (url,text) {\r\n            var that = this;\r\n            function createPop() {\r\n                var popDom = '';\r\n                popDom += '<div class=\"club-pop-baidu-mask clubPopBaidu clubPopBaiduClose\"></div>';\r\n                popDom += '<div class=\"club-pop-baidu-main clubPopBaidu\">';\r\n                popDom += '<div class=\"club-pop-baidu-head\">分享</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-body\">';\r\n                popDom += '<div class=\"club-pop-baidu-btns bdsharebuttonbox\" data-tag=\"share_1\"><a class=\"bds_tsina\" data-cmd=\"tsina\"></a><a class=\"bds_sqq\" data-cmd=\"sqq\"></a><a class=\"bds_qzone\" data-cmd=\"qzone\"></a><a class=\"bds_more\" data-cmd=\"more\"></a><a class=\"bds_count\" data-cmd=\"count\"></a></div>';\r\n                popDom += '</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-foot\"><a class=\"clubPopBaiduClose\">取消</a></div>';\r\n                popDom += '</div>';\r\n                return popDom;\r\n            }\r\n            \r\n            function initBaiduShare() {\r\n                var baiduSrc = 'http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5);\r\n                window._bd_share_config = {\r\n                    common : {\r\n                        bdText : text,\r\n                        bdDesc : text,\r\n                        bdUrl : url\r\n                    },\r\n                    share : [{\r\n                        \"tag\" : \"share_1\",\r\n                        \"bdSize\" : 32\r\n                    }]\r\n                };\r\n                if(typeof _bd_share_main === 'object'){\r\n                    _bd_share_main.init();\r\n                }else{\r\n                    $.getScript(baiduSrc);\r\n                }\r\n            }\r\n\r\n            function closePop() {\r\n                var $pop = $('.clubPopBaidu');\r\n                $pop.removeClass('cur');\r\n                setTimeout(function () {\r\n                    $pop.remove();\r\n                    that.popCommon.close();\r\n                },250);\r\n            }\r\n\r\n            function showPop() {\r\n                var popDom = createPop();\r\n                $('body').append(popDom);\r\n                that.popCommon.open();\r\n                setTimeout(function () {\r\n                    $('.clubPopBaidu').addClass('cur');\r\n                },50);\r\n                $('.clubPopBaiduClose').on('click',function () {\r\n                    closePop();\r\n                });\r\n                initBaiduShare();\r\n            };\r\n\r\n            showPop();\r\n        },\r\n        //global bind\r\n        globalBind:function () {\r\n            var $main = $('#qzMain'),that = this;\r\n            $main.on('click','.qzBtnShare',function () {\r\n                var $this = $(this),sharetext = $this.data('sharetext'),shareurl = $this.data('shareurl');\r\n                that.popBaiduShare(shareurl,sharetext);\r\n            })\r\n        },\r\n        //入口\r\n        main: function () {\r\n            //设置屏幕缩放\r\n            qzFunc.setRem();\r\n            //插入图片弹层，只需执行一次\r\n            qzFunc.addSwpOnce();\r\n            //开启评论\r\n            qzFunc.addComment();\r\n            //开启赞喜欢\r\n            //qzFunc.addLike();\r\n            //开启发布/参与\r\n            qzFunc.addContext();\r\n            //插入测试数据 话题页\r\n            qzFunc.initPageTopic();\r\n            //插入测试数据 内容单页\r\n            qzFunc.initPageContext();\r\n            //列表切换导航\r\n            qzFunc.tabNav();\r\n            //插入测试数据 模拟无限加载\r\n            qzFunc.infiniteLoad('#qzCardList', function (tar, tarInsert) {\r\n                tarInsert.getClub();\r\n            });\r\n            //开启 话题页上部加载更多按钮功能\r\n            qzFunc.topicMore();\r\n            //开启 内容单页 跳转功能\r\n            qzFunc.pageGoto();\r\n            //加载 全部话题 列表\r\n            qzFunc.allTopic();\r\n            //旋转屏幕需要执行的函数\r\n            $(window).resize(function () {\r\n                qzFunc.setRem();\r\n            });\r\n            //绑定全局事件\r\n            qzFunc.globalBind();\r\n        }\r\n    };\r\n    qzFunc.main();\r\n    //发布话题输入框\r\n    $(document).ready(function () {\r\n        $(\"#qzCardList\").getClub();\r\n        $(\".qzBtnLike\").addLike();\r\n        $(\".themeNum\").joinCount();\r\n        $(\".qz-nav-sort\").change(function (event) {\r\n            event.preventDefault();\r\n            var sort = $(this).find('option:selected').attr(\"data-sort\");\r\n            $(this).attr(\"data-sort\", sort);\r\n            $(\"#qzCardList\").html(\"\").attr(\"data-pageIndex\", 0).attr(\"data-loading\", false).getClub();\r\n        });\r\n    });\r\n    $.fn.fabuSubmit = function (beforeOpenSt) {\r\n        return this.each(function () {\r\n            var $div = $(this), maxnum = parseInt($div.find(\".maxNum\").html());\r\n            var $textarea = $div.find(\".mathIpt\");\r\n            var minH = $textarea.height(), rowH = parseInt($textarea.css(\"line-height\"));//行高\r\n            var maxH = rowH * 15; //最小高度\r\n\r\n            $textarea.textareaAutoHeight({ minHeight: minH, maxHeight: maxH });//文本框自适应高度\r\n            $div.on(\"focus\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"placeholder\");\r\n                $this.attr(\"data-val\", htm).removeAttr(\"placeholder\").parent().addClass(\"cur\");\r\n            }).on(\"blur\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"data-val\");\r\n                $this.attr(\"placeholder\", htm).parent().removeClass(\"cur\");\r\n            }).on(\"keyup blur\", \".mathIpt\", function () {\r\n                var len = this.value.length;\r\n                this.value = this.value.substr(0, maxnum);\r\n                $div.find(\".curNum\").html(len);\r\n                $div.find(\".fabu-num\").css(\"display\", len > 0 ? 'block' : '');\r\n            });\r\n\r\n            //提交发布\r\n            $div.on(\"click\", \".qzPopSmt\", function () {\r\n                var $lipic = $(\".qz-pic-list-li:not(.temp)\");\r\n                var $fabuVideo = $(\".fabuVideo\");\r\n                var valHtm = '', picHtm = '', videoHtm = '';\r\n                var valcon = $(\".mathIpt\").val();\r\n                var content = valcon == '' ? $(\".realIpt\").html() : valcon;\r\n                var clubId = $(\".clubId\").attr(\"data-selectClubId\");\r\n                if ($(this).attr(\"data-isclick\") == 'true') {\r\n                    return;\r\n                }\r\n                $(this).attr(\"data-isclick\", true);\r\n                //处理图片\r\n                var images = \"\";\r\n                var len = $lipic.length > 9 ? 9 : $lipic.length - 1;\r\n                if (len > 0) {\r\n                    images = [];\r\n                    for (var i = 0; i < len; i++) {\r\n                        var type = $lipic.eq(i).find(\"img\").attr(\"data-type\");\r\n                        var src = $lipic.eq(i).find(\"img\").attr(\"src\");\r\n                        var small = src.replace(\"tiny\", \"small\");\r\n                        var origin = src.replace(\"tiny\", \"origin\");\r\n                        var tinysquare = src.replace(\"tiny\", \"tinysquare\");\r\n                        if (type == \"gif\") {\r\n                            origin = origin.replace(\".jpg\", \".gif\");\r\n                        }\r\n                        var height = $lipic.eq(i).find(\"img\").attr(\"data-height\");\r\n                        var width = $lipic.eq(i).find(\"img\").attr(\"data-width\");\r\n                        images.push({ \"tiny\": src, \"tinysquare\": tinysquare, \"small\": small, \"origin\": origin, \"height\": height, \"width\": width, \"imageType\": type });\r\n                    }\r\n                }\r\n\r\n                //判断视频是否添加\r\n                var videos = \"\";\r\n                if ($fabuVideo.length > 0) {\r\n                    var avvid = '', avtit = '', avurl = '', avimg = '', avname = '';\r\n                    if ($fabuVideo.attr(\"data-tit\") == undefined) {\r\n                        avtit = '视频链接'; //视频标题\r\n                    } else {\r\n                        avvid = $fabuVideo.attr(\"data-vid\"); //视频id\r\n                        avtit = $fabuVideo.attr(\"data-tit\"); //视频标题\r\n                        avimg = $fabuVideo.attr(\"data-img\"); //视频图片\r\n                        avname = $fabuVideo.attr(\"data-sitename\"); //视频图片\r\n                    }\r\n                    avurl = $fabuVideo.attr(\"data-url\"); //视频地址\r\n                    videos = { \"image\": avimg, \"title\": avtit, \"videoUrl\": avurl, \"videoVid\": avvid, \"siteName\": avname };\r\n                }\r\n                //如果图片和视频为空就判断输入框是为空\r\n                if (images == '' && videos == '' && !isTrim(content)) { alert(\"你还没有输入内容!\"); return; }\r\n                //上传图片或添加视频后，空内容也可以提交，否则空内容不可以提交;\r\n                var jsondata = {\r\n                    content: content,\r\n                    images: images,\r\n                    videos: videos,\r\n                    clubId: clubId,\r\n                    device: 1\r\n                };\r\n                $.ajax({\r\n                    type: \"post\",\r\n                    dataType: \"json\",\r\n                    url: \"http://192.168.0.100:9014/apis/club/api/addclubcontent\",\r\n                    data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                    success: function (result) {\r\n                        if (result.dataType == \"ok\") {\r\n                            $(this).attr(\"data-isclick\", false);\r\n                            $(\".mathIpt\").val(\"\");\r\n                            var html = qzFunc.createCard(result.cardgroup);\r\n                            $(\"#qzCardList\").prepend(html);\r\n                            qzFunc.photoSwp();\r\n                            //点赞\r\n                            $(\".qzBtnLike\").like();\r\n                            $(\".qzBtnLike\").addLike();\r\n                            $(\".qzBtnComment\").commentCount();\r\n                            $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                            setTimeout(function () {\r\n                                $(\".qzPop\").remove();\r\n                            }, 250);\r\n                        }\r\n                        else {\r\n                            alert(\"发布失败，请重试！\");\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n    $.fn.selectPhoto = function () {\r\n        return this.each(function () {\r\n            $(this).bind(\"click\", function () {\r\n                $(\"#fileupload\").trigger(\"click\");\r\n                $('#fileupload').fileupload({\r\n                    dataType: 'json',\r\n                    maxFileSize: '5000000',//5M\r\n                    url: 'http://192.168.0.100:9014/apis/uploadpic/index',\r\n                    done: function (e, data) {\r\n                        var result = data.result;\r\n                        if (result.status == \"ok\") {\r\n                            var count = $(\".qz-pic-list-li .qz-img-remove\").length + 1;\r\n                            if (count > 9) {\r\n                                alert(\"最多只能传9张\");\r\n                                $(\".qz-pic-list .temp:first\").remove();\r\n                            }\r\n                            else {\r\n                                if (count == 9) {\r\n                                    $(\".qz-pic-list-add\").parent().css(\"display\", \"none\");\r\n                                }\r\n                                var html = \"<img src='\" + result.tiny + \"' data-original='\" + result.original + \"' data-height=\\\"\" + result.height + \"\\\" data-width=\\\"\" + result.width + \"\\\" data-type=\\\"\" + result.imageclass + \"\\\"><a class='qz-img-remove'></a>\";\r\n                                $(\".qz-pic-list .temp:first\").removeClass(\"temp\").html(html);\r\n\r\n                            }\r\n                            $(\".qz-pic-list .qz-img-remove\").each(function () {\r\n                                $(this).unbind(\"click\");\r\n                                $(this).bind(\"click\", function () {\r\n                                    var original = $(this).parents(\".pic\").find(\"img\").attr(\"data-original\");\r\n                                    var len = $(\".qz-pic-list-li\").not(\":last\").length;\r\n                                    $(this).parent(\".qz-pic-list-li\").remove();\r\n                                    $.ajax({\r\n                                        type: \"get\", dataType: \"json\", url: \"http://192.168.0.100:9014/apis/uploadpic/delete?origin=\" + original,\r\n                                        data: {},\r\n                                        success: function (responseJson) {\r\n                                        }\r\n                                    });\r\n                                    if (len < 9) {\r\n                                        $(\".qz-pic-list-add\").parent().css(\"display\", \"block\");\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        else {\r\n                            alert(\"包含不支持的文件格式\");\r\n                            $(\".qz-pic-list .temp:first\").remove();\r\n\r\n                        }\r\n                    },\r\n                    change: function (e, data) {\r\n                        var i = 0;\r\n                        var settingSize = parseInt($(\"#fileupload\").attr(\"data-imagesize\"));\r\n                        var settingSizeMb = settingSize / 1024;\r\n                        $.each(data.files, function (index, item) {\r\n                            if (item.size / 1024 > settingSize && i <= 0) {\r\n                                i += 1;\r\n                                alert(\"图片容量超过\" + settingSizeMb + \"MB，无法上传！\");\r\n                            }\r\n                            else {\r\n                                if (item.size / 1024 <= settingSize) {\r\n                                    var html = '<div class=\"qz-pic-list-li temp\"><img src=\"http://image.gamersky.com/webimg15/user/club/pc/loading.gif\" ></div>';\r\n                                    $(\".qz-pic-list-li:first\").before(html);\r\n                                }\r\n                            }\r\n                        });\r\n                    },\r\n                });\r\n            });\r\n        })\r\n    };\r\n    //todo:2018-03-13 更新：修改排序\r\n    $.fn.getClub = function (callback) {\r\n        return this.each(function () {\r\n            var $this = $(this),\r\n                cfg = $(\".qzNavFx a.cur\").attr(\"data-cfg\"),\r\n                contentType = clubConfig.listNavSetter[cfg].type,\r\n                sort = clubConfig.listNavSetter[cfg].sort,\r\n                clubId = $(\".clubId\").attr(\"data-clubId\"),\r\n                topic = $(\".topic\").attr(\"data-topic\"),\r\n                topicId = $(\".topic\").attr(\"data-topicId\"),\r\n                pageIndex = parseInt($this.attr(\"data-pageIndex\")) + 1,\r\n                pageSize = $this.attr(\"data-pageSize\"),\r\n                loading = $this.attr(\"data-loading\");\r\n            if (loading == \"true\") {\r\n                return;\r\n            }\r\n            $this.attr(\"data-loading\", \"true\");\r\n            var length = $this.find(\".qzCard\").length,\r\n                index = 0,\r\n                excludeIds = $this.find(\".qzCard:first\").attr(\"data-cid\");\r\n            if (excludeIds == undefined || excludeIds==null){\r\n                excludeIds=\"\"\r\n            }\r\n            if (length >= 50) {\r\n                index = length - 50;\r\n            }\r\n            excludeIds+=\",\";\r\n            $this.find(\".qzCard:gt(\" + index + \")\").each(function () {\r\n                excludeIds += $(this).attr(\"data-cid\") + \",\";\r\n            });\r\n            var jsondata = {\r\n                contentType: contentType,\r\n                sort: sort,\r\n                pageIndex: pageIndex,\r\n                pageSize: pageSize,\r\n                clubId: clubId,\r\n                topic: topic,\r\n                topicId: topicId,\r\n                excludeIds: excludeIds\r\n            };\r\n            $this.attr(\"data-pageIndex\", pageIndex);\r\n            var clubListParams = {jsondata: JSON.stringify(jsondata)}\r\n            clubApis.getWapClubContext(clubListParams,function (responseObject) {\r\n                var result = $.parseJSON(responseObject.body);\r\n                $this.attr(\"data-loading\", \"false\");\r\n                $this.find('.qz-loading').remove();\r\n                var len = result.cardgroup.length;\r\n                if (pageIndex == 1 && len == 0) {\r\n                    $this.html(qzConfig.loadnullDom).attr('data-infiload', 'close');\r\n                }\r\n                else if (pageIndex == 1 && len > 0) {\r\n                    qzFunc.insertCard($this, result.cardgroup);\r\n                    if (len >= pageSize) {\r\n                        $this.attr(\"data-infiload\", \"open\");\r\n                        qzConfig.isCanLoading = true;\r\n                    }\r\n                    else {\r\n                        qzConfig.isCanLoading = false;\r\n                        $this.attr('data-infiload', 'close').append(qzConfig.loadedDom);\r\n                    }\r\n                }\r\n                else if (pageIndex > 1 && len > 0) {\r\n                    qzFunc.appendCard($this, result.cardgroup);\r\n                    $this.attr(\"data-infiload\", \"open\");\r\n                    qzConfig.isCanLoading = true;\r\n                }\r\n                else {\r\n                    $this.attr('data-infiload', 'close').append(qzConfig.loadedDom);\r\n                }\r\n                if (typeof callback === 'function') {\r\n                    callback && callback();\r\n                }\r\n            },function () {\r\n                //插入加载动画\r\n                $(\".qz-loadnull,.qz-loaded\").remove();\r\n                $this.append(qzConfig.loadingDom);\r\n            });\r\n        });\r\n    };\r\n    //todo 2018-03-13 更新：修复点赞样式\r\n    //获取点赞数据\r\n    $.fn.like = function () {\r\n        var support = \"\";\r\n        $(this).each(function () {\r\n            if (support != \"\") {\r\n                support = support + \",\"\r\n            }\r\n            support = support + $(this).attr(\"data-clubcontentid\");\r\n        });\r\n        var jsondata = {\r\n            clubContentId: support\r\n        };\r\n        var transData = {jsondata: JSON.stringify(jsondata)};\r\n        clubApis.getLike(transData,function (data) {\r\n            if (data.status == \"ok\") {\r\n                var body = $.parseJSON(data.body);\r\n                $.each(body, function (index, value) {\r\n                    $(\".qzBtnLike[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                        $(this).find(\"b\")\r\n                            .html(value.digg)\r\n                            .attr(\"data-likecount\", value.digg);\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    };\r\n    //todo 2018-03-13 更新：修复点赞样式\r\n    //添加点赞\r\n    $.fn.addLike = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.unbind(\"click\");\r\n            $this.click(function (event) {\r\n                event.preventDefault();\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var Id = $this.attr(\"data-clubcontentid\");\r\n                        var jsondata = {\r\n                            clubContentId: Id,\r\n                            fromDevice: 1,\r\n                        };\r\n                        var transData = {jsondata: JSON.stringify(jsondata)};\r\n                        clubApis.addLike(transData,function (responseJson) {\r\n                            if (responseJson.status == \"err\") {\r\n                                alert(responseJson.body);\r\n                            }\r\n                            else {\r\n                                var m = parseInt($this.find(\"b\").html()) + 1;\r\n                                $this.find(\"b\").html(m);\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n            });\r\n        });\r\n    };\r\n    $.fn.commentCount = function () {\r\n        var that = this;\r\n        function commentDo() {\r\n            var support = \"\";\r\n            $(that).each(function () {\r\n                if (support != \"\") {\r\n                    support = support + \",\"\r\n                }\r\n                support = support + $(this).attr(\"data-clubcontentid\");\r\n            });\r\n            var jsondata = {\r\n                clubContentId: support\r\n            };\r\n            var gCommentCountParams = {jsondata: JSON.stringify(jsondata)};\r\n            clubApis.getCommentCount(gCommentCountParams,function (data) {\r\n                if (data.status == \"ok\") {\r\n                    var body = $.parseJSON(data.body);\r\n                    $.each(body, function (index, value) {\r\n                        $(\".qzBtnComment[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                            var $th = $(this);\r\n                            if ($(that).parents(\".qzClComment\").length > 0) {\r\n                                return;\r\n                            }\r\n                            $th.html(value.commentCount);\r\n                            $th.attr(\"data-commcount\", value.commentCount);\r\n                            if($('#qzCardList').length>0&&value.commentCount>0){\r\n                                $th.insertListComment();\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        commentDo();\r\n    };\r\n    //todo:2018-03-13 更新：注释掉卡片内回复\r\n    //卡片列表内评论\r\n    $.fn.insertListComment = function () {\r\n        var $this = $(this);\r\n        function initFnc() {\r\n            var $card = $this.closest('.qzCard'),commDom = '',\r\n                pageIndex = 1,\r\n                clubContentId = $this.data(\"clubcontentid\"),\r\n                jsondata = {\r\n                    clubContentId: clubContentId,\r\n                    pageIndex: pageIndex,\r\n                    pageSize: 10\r\n                },\r\n                transData = { jsondata: JSON.stringify(jsondata) };\r\n            clubApis.getWapClubComment(transData,function (responseObject) {\r\n                var result = $.parseJSON(responseObject.body);\r\n                //判断数据状态\r\n                if (result.dataType === 'ok' && $this.attr('data-isinsert') != 'ok') {\r\n                    $this.attr('data-isinsert','ok');\r\n                    //处理获取的数据\r\n                    commDom += '<div class=\"qz-comment-inlist\"><ul>';\r\n                    $.each(result.commlist,function (i,item) {\r\n                        if(i<3){\r\n                            commDom += qzFunc.createCardCommentList(item);\r\n                        }\r\n                    });\r\n                    commDom += '</ul></div>';\r\n                    $(commDom).insertBefore($card.find('footer'));\r\n                }\r\n            });\r\n        }\r\n        if(clubConfig.innerCommentState === 'open'){\r\n            initFnc();\r\n        }\r\n    };\r\n    //获取参与人数\r\n    $.fn.joinCount = function () {\r\n        var topic = \"\";\r\n        $(this).each(function () {\r\n            if (topic != \"\") {\r\n                topic = topic + \",\"\r\n            }\r\n            topic = topic + $(this).attr(\"data-topic\");\r\n        });\r\n        var jsondata = {\r\n            topic: topic\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"http://192.168.0.100:9014/apis/club/api/getjoinarraycount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    $.each(data.result, function (index, value) {\r\n                        $(\".themeNum[data-topic='\" + value.topic + \"']\").each(function () {\r\n                            $(this).find(\".join\").html(value.join + \"人\");\r\n                            $(this).find(\".theme\").html(value.clubContent);\r\n                            $(this).find(\"span i\").html(value.clubContent);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    $.fn.allTopicJoinCount = function () {\r\n        var topic = \"\";\r\n        $(this).each(function () {\r\n            if (topic != \"\") {\r\n                topic = topic + \",\"\r\n            }\r\n            topic = topic + $(this).attr(\"data-topic\");\r\n        });\r\n        var jsondata = {\r\n            topic: topic\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"http://192.168.0.100:9014/apis/club/api/getjoinarraycount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    $.each(data.result, function (index, value) {\r\n                        $(\"#qzAllTopicList li[data-topic='\" + value.topic + \"']\").each(function () {\r\n                            $(this).find(\".num-in\").html(value.join);\r\n                            $(this).find(\".num-comm\").html(value.clubContent);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    //发布评论\r\n    $.fn.addComment = function (beforeOpenSt) {\r\n        var $this = $(this);\r\n        if ($this.attr(\"data-isclick\") == 'true') {\r\n            return;\r\n        }\r\n        $this.attr(\"data-isclick\", true);\r\n        var text = $.trim($this.parent().siblings(\".pop-con\").find(\".mathIpt\").val());\r\n        var userId = $this.data(\"userid\");\r\n        var clubContentId = $this.data(\"clubcontentid\");\r\n        var replyCommentId = $this.data(\"commentid\");\r\n        if (text == \"\") {\r\n            alert(\"评论不能为空！\");\r\n            return;\r\n        }\r\n        else if (text.length >= 5000) {\r\n            alert(\"评论不能超过5000个字符！\");\r\n            return;\r\n        }\r\n        else {\r\n            var jsondata = {\r\n                userId: userId,\r\n                clubContentId: clubContentId,\r\n                content: text,\r\n                replyId: replyCommentId,\r\n                fromDevice: 1\r\n            };\r\n            $.ajax({\r\n                type: \"post\",\r\n                dataType: \"json\",\r\n                url: \"http://192.168.0.100:9014/apis/club/api/addcomment\",\r\n                data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                success: function (result) {\r\n                    if (result.dataType == \"ok\") {\r\n                        $this.attr(\"data-isclick\", false);\r\n                        var $qzClComment = $(\"#qzClComment\");\r\n                        if ($qzClComment.length > 0) {\r\n                            var html = qzFunc.createCardComment(result.commlist);\r\n                            $qzClComment.find(\"li\").length == 0 ? $qzClComment.html(html) : $qzClComment.prepend(html);\r\n                            var m = parseInt($(\".commentNum i,.qzBtnComment\").html()) + 1;\r\n                            $(\".commentNum i,#qzCardContext .btn-comment\").html(m);\r\n                        }\r\n                        else {\r\n                            $(\".qzBtnComment[data-clubcontentid=\" + clubContentId + \"]\").html(\"1\").attr(\"data-commcount\", 1);\r\n                        }\r\n                        $(\".qzPop\").removeClass('cur');\r\n                        $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                        //等待弹层动画执行完后移除弹层\r\n                        setTimeout(function () {\r\n                            $(\".qzPop\").remove();\r\n                        }, 250);\r\n                    }\r\n                    else {\r\n                        alert(result.body);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    $.fn.UserOnline = function (fun) {\r\n        $.ajax({\r\n            type: \"GET\", dataType: \"jsonp\", url: \"http://192.168.0.100:9014/apis/api/logincheck\",\r\n            success: function (responseJson) {\r\n                if(jsmodel === 'dev'){\r\n                    fun(responseJson);\r\n                }else{\r\n                    if (responseJson.status !== \"ok\") {\r\n                        $(\".ymw-loginpop-btns\").insertYmwLoginPop();\r\n                        $(\".ymw-loginpop-btns\").QZloginForm();\r\n                    }\r\n                    else {\r\n                        fun(responseJson);\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    };\r\n    $.fn.QZloginForm = function () {\r\n        var $this = $(this);\r\n        $this.on(\"click\", \"#qqLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"http://192.168.0.100:9014/apis/oauth/authorizelogin?authorizetype=qq&returnUrl=\" + encodeURI(returnUrl);\r\n        }).on(\"click\", \"#sinaLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"http://192.168.0.100:9014/apis/oauth/authorizelogin?authorizetype=sina&returnUrl=\" + encodeURI(returnUrl);\r\n        })\r\n    };\r\n    $.fn.insertYmwLoginPop = function () {\r\n        $(\".gsZpPopLoginClose\").show();\r\n        $(\".gs_zp_pop_login\").show();\r\n        $('.gsZpPopLoginClose').on('click', function () {\r\n            $(\".gs_zp_pop_login\").hide();\r\n            $(\".gsZpPopLoginClose\").hide();\r\n        })\r\n    };\r\n    $.fn.removeTarget = function () {\r\n        return this.each(function () {\r\n            $(this).find(\"a\").attr(\"target\", \"_self\");\r\n        })\r\n    }\r\n})(jQuery);"]}