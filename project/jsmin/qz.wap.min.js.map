{"version":3,"sources":["qz.wap.min.js"],"names":["$","jsmodel","clubApis","getWapCardComment","paramsData","callback","beforeSendFnc","apiUrl","ajax","type","dataType","url","data","beforeSend","success","backData","error","err","console","log","getWapCardContext","getWapClubContext","getCommentCount","getWapClubComment","getwapclubuserlike","getLike","addLike","getWapCardCommentPage1","paramsFmt","JSON","parse","jsondata","pages","pageIndex","sort","getWapCardCommentPageHot","getWapCardCommentReply","replyPageIndex","clubConfig","listNavSetter","new","hot","best","innerCommentState","isTrim","s","replace","fn","extend","textareaAutoHeight","options","this","_options","minHeight","maxHeight","init","p","parseFloat","height","attr","keyup","resetHeight","change","focus","_minHeight","_maxHeight","browser","msie","h","scrollHeight","scrollTop","css","qzConfig","isCanLoading","loadingDom","loadedDom","loadnullDom","qzFunc","setRem","pw","window","width","font-size","popCommon","open","addClass","close","removeClass","createCard","cdp","cardDom","cardid","head","user","vauth","createtime","spectop","specvalue","isVideo","text","video","src","videoTitle","piclist","length","each","i","item","ext","large","origin","size","undefined","picbig","picType","pic","fromUrl","from","addSwpOnce","swp","append","photoSwp","initPhotoSwipeFromDOM","gallerySelector","parseThumbnailElements","el","figureEl","linkEl","thumbElements","childNodes","numNodes","items","nodeType","children","getAttribute","split","w","parseInt","ori","title","innerHTML","msrc","push","closest","parentNode","onThumbnailsClick","e","event","preventDefault","returnValue","eTarget","target","srcElement","clickedListItem","tagName","toUpperCase","index","clickedGallery","numChildNodes","nodeIndex","openPhotoSwipe","galleryElement","disableAnimation","fromURL","setOrigin","num","gallery","pswpElement","shareEl","fullscreenEl","zoomEl","bgOpacity","showHideOpacity","galleryUID","history","tapToClose","getThumbBoundsFn","thumbnail","getElementsByTagName","pageYScroll","pageYOffset","document","documentElement","rect","getBoundingClientRect","x","left","y","top","galleryPIDs","j","pid","isNaN","showAnimationDuration","PhotoSwipe","PhotoSwipeUI_Default","listen","getCurrentIndex","animate","opacity","galleryElements","querySelectorAll","l","setAttribute","onclick","insertCard","tar","dt","insDom","html","like","removeTarget","commentCount","openVideoPop","appendCard","addContext","insertContext","scrolltopval","setAreaSize","$qzPop","find","on","val","textsth","closePop","setTimeout","remove","topic","comDom","clubHtml","selectPhoto","sid","fabuSubmit","UserOnline","response","status","st","addComment","insertComment","cid","commentId","rename","userId","placeholder","commentInner","uerId","$this","commNum","count","initPageTopic","tarInsert","clubId","topicTitle","stringify","responseObject","result","parseJSON","body","cardgroup","page","initPageContext","gcContextJsondata","clubContentId","gcContextParamsData","vCardPage","vmBuild","CommLine","template","more","moretxt","moregray","pagesize","props","mounted","methods","moreBtn","getListData","that","reqData","pageSize","replyPageSize","reqDataFmt","repData","repList","commlist","reply","rld","concat","CommLi","components","CommHot","lists","hotshow","created","res","CommAll","eachnum","moreState","navs","txt","pageall","list","allshow","getList","sortChange","idx","getMore","getFunc","VmMain","Vue","infiniteLoad","loadFunc","scrollJudge","dh","wh","scroll","topicMore","$moreBtn","excludeclubContentId","tabNav","navFunc","fixNav","navTop","$navPos","offset","srlTop","$navWrap","scrollLoading","$html","hh","navSt","scrollLoaded","clearTimeout","loadedTimer","$nav","tarCon","getClub","pageGoto","openId","stopPropagation","createCardComment","cmdt","commDom","commid","name","useId","replytime","context","createCommentReply","replyData","reDom","createCardCommentFull","replylike","editauth","replydevice","replycount","createCardCommentList","insertCardComment","addMore","appendCardComment","createCardLike","lkdt","likeDom","likeid","insertCardLike","appendCardLike","videoPop","vdsrc","$pop","popDom","vdurl","ykSign","ykIndexOfBegin","indexOf","ykIndexOfEnd","substring","createAllTopic","topicDom","Id","Title","allTopic","createList","listDom","$topicList","allTopicJoinCount","addList","dataOriUrl","data-page","data-infiload","$main","popBaiduShare","createPop","initBaiduShare","baiduSrc","Date","_bd_share_main","getScript","showPop","globalBind","main","resize","ready","joinCount","beforeOpenSt","$div","maxnum","$textarea","minH","rowH","maxH","htm","removeAttr","parent","len","value","substr","$lipic","$fabuVideo","valcon","content","images","eq","small","tinysquare","tiny","imageType","videos","avvid","avtit","avurl","avimg","avname","image","videoUrl","videoVid","siteName","alert","device","prepend","bind","trigger","fileupload","maxFileSize","done","original","imageclass","unbind","parents","not","responseJson","settingSize","settingSizeMb","files","before","cfg","contentType","topicId","loading","excludeIds","clubListParams","support","transData","digg","click","fromDevice","m","commentDo","gCommentCountParams","$th","insertListComment","initFnc","$card","insertBefore","join","clubContent","trim","siblings","replyCommentId","replyId","$qzClComment","fun","insertYmwLoginPop","QZloginForm","returnUrl","location","href","encodeURI","show","hide","jQuery"],"mappings":"CAAA,SAAWA,GACP,GAAIC,GAAU,MAEVC,GAEAC,kBAAkB,SAAUC,EAAWC,EAASC,GAC5C,GAAIC,GAAS,gCACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBG,kBAAkB,SAAUhB,EAAWC,EAASC,GAC5C,GAAIC,GAAS,2DACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBI,kBAAkB,SAAUjB,EAAWC,EAASC,GAC5C,GAAIC,GAAS,2DACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBK,gBAAgB,SAAUlB,EAAWC,EAASC,GAC1C,GAAIC,GAAS,yDACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,QACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBM,kBAAkB,SAAUnB,EAAWC,EAASC,GAC5C,GAAIC,GAAS,2DACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBO,mBAAmB,SAAUpB,EAAWC,EAASC,GAC7C,GAAIC,GAAS,4DACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBQ,QAAQ,SAAUrB,EAAWC,EAASC,GAClC,GAAIC,GAAS,iDACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,QACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBS,QAAQ,SAAUtB,EAAWC,EAASC,GAClC,GAAIC,GAAS,iDACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,QACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAMxBU,uBAAuB,SAAUvB,EAAWC,EAASC,GACjD,GAAIsB,GAAYC,KAAKC,MAAM1B,EAAW2B,UAClCC,EAAQJ,EAAUK,UAAUC,EAAON,EAAUM,KAE7C3B,EAAS,gCACD,KAAT2B,GAAwB,IAAVF,EACbzB,EAAS,wCACK,IAAT2B,GAAwB,IAAVF,EACnBzB,EAAS,wCACK,IAAT2B,GAAwB,IAAVF,IACnBzB,EAAS,kCAEbP,EAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBkB,yBAAyB,SAAU/B,EAAWC,EAASC,GACnD,GAAIC,GAAS,8BACbP,GAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,OAKxBmB,uBAAuB,SAAUhC,EAAWC,EAASC,GACjD,GAAIsB,GAAYC,KAAKC,MAAM1B,EAAW2B,UAClCC,EAAQJ,EAAUS,eAElB9B,EAAS,sCACA,KAAVyB,IACCzB,EAAS,wCAEbP,EAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKJ,EACLK,KAAMR,EACNS,WAAY,WACoB,kBAAlBP,IACNA,KAGRQ,QAAS,SAAUC,GACQ,kBAAbV,IACNA,EAASU,IAGjBC,MAAM,SAAUC,GACZC,QAAQC,IAAIF,QAKxBqB,GAEAC,eAEIC,OACIN,KAAK,EACLzB,KAAK,GAGTgC,KACIP,KAAK,EACLzB,KAAK,GAGTiC,MACIR,KAAK,EACLzB,KAAK,IAIbkC,kBAAkB,SAGlBC,EAAS,SAAUC,GACnB,MAAkB,mBAAP,IAGJA,EAAEC,QAAQ,iBAAkB,IAEvC9C,GAAE+C,GAAGC,QAEDC,mBAAoB,SAAUC,GAC1BC,KAAKC,UAAaC,UAAW,EAAGC,UAAW,KAC3CH,KAAKI,KAAO,WACR,IAAK,GAAIC,KAAKN,GACVC,KAAKC,SAASI,GAAKN,EAAQM,EAEA,IAA3BL,KAAKC,SAASC,YACdF,KAAKC,SAASC,UAAYI,WAAWzD,EAAEmD,MAAMO,UAEjD,KAAK,GAAIF,KAAKL,MAAKC,SACQ,MAAnBpD,EAAEmD,MAAMQ,KAAKH,IACbxD,EAAEmD,MAAMQ,KAAKH,EAAGL,KAAKC,SAASI,GAGtCxD,GAAEmD,MAAMS,MAAMT,KAAKU,aAAaC,OAAOX,KAAKU,aAAaE,MAAMZ,KAAKU,cAExEV,KAAKU,YAAc,WACf,GAAIG,GAAaP,WAAWzD,EAAEmD,MAAMQ,KAAK,cACrCM,EAAaR,WAAWzD,EAAEmD,MAAMQ,KAAK,aAEpC3D,GAAEkE,QAAQC,MAAQnE,EAAEmD,MAAMO,OAAO,EACtC,IAAIU,GAAIX,WAAWN,KAAKkB,aACxBD,GAAIA,EAAIJ,EAAaA,EAAaI,EAAIH,EAAaA,EAAaG,EAChEpE,EAAEmD,MAAMO,OAAOU,GAAGE,UAAUF,GAC5BpE,EAAEmD,MAAMoB,IAAI,aAAcH,GAAKH,EAAa,SAAW,WAE3Dd,KAAKI,SAGb,IAAIiB,IAEAC,cAAc,EAEdC,WAAY,qCAEZC,UAAW,sCAEXC,YAAa,wCAEbC,GAEAC,OAAQ,WACJ,GAAIC,GAAK/E,EAAEgF,QAAQC,OACfF,IAAM,MACNA,EAAK,KAET/E,EAAE,QAAQuE,KAAMW,YAAaH,EAAK,IAAM,QAG5CI,WACIC,KAAK,WACDpF,EAAE,QAAQqF,SAAS,cACnBrF,EAAE,kBAAkBuE,IAAI,UAAU,SAEtCe,MAAM,WACFtF,EAAE,QAAQuF,YAAY,cACtBvF,EAAE,kBAAkBuE,IAAI,UAAU,WAI1CiB,WAAY,SAAUC,GAClB,GAAIC,GAAU,EAkEd,IAhEAA,GAAW,yCAA2CD,EAAIE,OAAS,KAGnED,GAAW,qCAAuCD,EAAIG,KAAO,oBAC7DF,GAAW,yBAEXA,GAAW,MAAQD,EAAII,KAAO,OAE1BjD,EAAO6C,EAAIK,SACXJ,GAAW,aAAeD,EAAIK,MAAQ,MAM1CJ,GAAW,WAEXA,GAAW,sBAAwBD,EAAIM,WAAa,UACpDL,GAAW,OACXA,GAAW,SAEPD,EAAIO,WAAY,GAAQP,EAAIQ,aAAc,IAC1CP,GAAW,2BACPD,EAAIO,WAAY,IAChBN,GAAW,8BAEXD,EAAIQ,aAAc,IAClBP,GAAW,+BAEfA,GAAW,UAEfA,GAAW,YAIXA,GAAW,iDAAmDD,EAAI9E,IAAM,KAExE+E,GAAW,wBACPD,EAAIS,SACJR,GAAWD,EAAIU,KACfT,GAAW,WAAaD,EAAIW,MAAMC,IAAM,uBAAyBZ,EAAIW,MAAME,WAAa,QAGxFZ,GAAWD,EAAIU,KAEnBT,GAAW,SAEPD,EAAIc,QAAQC,OAAS,IACrBd,GAAW,uEACX1F,EAAEyG,KAAKhB,EAAIc,QAAS,SAAUG,EAAGC,GAC7BjB,GAAW,8BAEM,QAAbiB,EAAKC,KACLlB,GAAW,QACXiB,EAAKE,MAAQF,EAAKG,QACE,SAAbH,EAAKC,MACZlB,GAAW,UAGfA,GAAW,sBAAwBiB,EAAKC,IAAM,kBAAoBD,EAAKG,OAAS,kBAAoBH,EAAKE,MAAQ,gBAAkBF,EAAKI,KAAO,eAAiBJ,EAAKhG,IAAM,oBAE/K+E,GAAW,gBAGSsB,QAApBvB,EAAIwB,OAAOJ,MAAoB,CAC/BpB,EAAIwB,OAAOJ,MAAQpB,EAAIwB,OAAOtG,GAC9B,IAAIuG,GAAU,EACdxB,IAAW,kCAEY,QAAnBD,EAAIwB,OAAOL,KACXM,EAAU,OACVzB,EAAIwB,OAAOJ,MAAQpB,EAAIwB,OAAOH,QACJ,SAAnBrB,EAAIwB,OAAOL,MAClBM,EAAU,SAGdxB,GAAW,oBAAsBwB,EAAU,uBAAyBzB,EAAIwB,OAAOL,IAAM,kBAAoBnB,EAAIwB,OAAOH,OAAS,iBAAmBrB,EAAIwB,OAAOJ,MAAQ,gBAAkBpB,EAAIwB,OAAOF,KAAO,eAAiBtB,EAAIwB,OAAOtG,IAAM,6CA4B7O,MAzBI8E,GAAIS,UACJR,GAAW,4BAEXA,GAAW,uCAAyCD,EAAIW,MAAMC,IAAM,eAAiBZ,EAAIW,MAAMe,IAAM,uBAGzGzB,GAAW,aAEPD,EAAI2B,UAEJ1B,GAAW,iCAAmCD,EAAI2B,QAAU,MAAQ3B,EAAI4B,KAAO,cAKnF3B,GAAW,WACXA,GAAW,iDAAmDD,EAAIE,OAAS,WAC3ED,GAAW,2FAA6FD,EAAIE,OAAS,kBAAoBF,EAAI9E,IAAM,UACnJ+E,GAAW,oFAAsFD,EAAIE,OAAS,yBAC9GD,GAAW,YAEXA,GAAW,SACXA,GAAW,GACXA,GAAW,IAKf4B,WAAY,WACR,GAAIC,GAAM,8xCACVvH,GAAE,QAAQwH,OAAOD,IAGrBE,SAAU,WACN,GAAIC,GAAwB,SAAUC,GA+HlC,IAAK,GA9HDC,GAAyB,SAAUC,GAQnC,IAAK,GAJDC,GACAC,EACAhB,EACAJ,EANAqB,EAAgBH,EAAGI,WACnBC,EAAWF,EAAcxB,OACzB2B,KAKKzB,EAAI,EAAGA,EAAIwB,EAAUxB,IAC1BoB,EAAWE,EAActB,GACC,IAAtBoB,EAASM,WAGbL,EAASD,EAASO,SAAS,GAC3BtB,EAAOgB,EAAOO,aAAa,aAAaC,MAAM,KAC9C5B,GACIN,IAAK0B,EAAOO,aAAa,cACzBE,EAAGC,SAAS1B,EAAK,GAAI,IACrB3C,EAAGqE,SAAS1B,EAAK,GAAI,IACrB2B,IAAKX,EAAOO,aAAa,eACzBpB,QAASa,EAAOO,aAAa,iBAE7BR,EAASO,SAAS7B,OAAS,IAC3BG,EAAKgC,MAAQb,EAASO,SAAS,GAAGO,WAElCb,EAAOM,SAAS7B,OAAS,IACzBG,EAAKkC,KAAOd,EAAOM,SAAS,GAAGC,aAAa,QAEhD3B,EAAKkB,GAAKC,EACVK,EAAMW,KAAKnC,GAEf,OAAOwB,IAEPY,EAAU,QAASA,GAAQlB,EAAI9E,GAC/B,MAAO8E,KAAO9E,EAAG8E,GAAMA,EAAKkB,EAAQlB,EAAGmB,WAAYjG,KAEnDkG,EAAoB,SAAUC,GAC9BA,EAAIA,GAAKlE,OAAOmE,MAChBD,EAAEE,eAAiBF,EAAEE,iBAAmBF,EAAEG,aAAc,CACxD,IAAIC,GAAUJ,EAAEK,QAAUL,EAAEM,WACxBC,EAAkBV,EAAQO,EAAS,SAAUzB,GAC7C,MAAQA,GAAG6B,SAAwC,WAA7B7B,EAAG6B,QAAQC,eAErC,IAAKF,EAAL,CAQA,IAAK,GADDG,GAJAC,EAAiBJ,EAAgBT,WACjCf,EAAawB,EAAgBT,WAAWf,WACxC6B,EAAgB7B,EAAWzB,OAC3BuD,EAAY,EAEPrD,EAAI,EAAGA,EAAIoD,EAAepD,IAC/B,GAA+B,IAA3BuB,EAAWvB,GAAG0B,SAAlB,CAGA,GAAIH,EAAWvB,KAAO+C,EAAiB,CACnCG,EAAQG,CACR,OAEJA,IAKJ,MAHIH,IAAS,GACTI,EAAeJ,EAAOC,IAEnB,IAGPG,EAAiB,SAAUJ,EAAOK,EAAgBC,EAAkBC,GA4CpE,QAASC,GAAUC,GACfrK,EAAE,kBAAkB2D,KAAK,OAAQwE,EAAMkC,GAAK3B,KA5ChD,GACI4B,GACApH,EACAiF,EAHAoC,EAAcvK,EAAE,SAAS,EAqB7B,IAjBAmI,EAAQP,EAAuBqC,GAC/B/G,GACIsH,SAAS,EACTC,cAAc,EACdC,QAAQ,EACRC,UAAW,EACXC,gBAAiB,EACjBC,WAAYZ,EAAe3B,aAAa,iBACxCwC,SAAS,EACTC,YAAW,EACXC,iBAAkB,SAAUpB,GACxB,GAAIqB,GAAY9C,EAAMyB,GAAO/B,GAAGqD,qBAAqB,OAAO,GACxDC,EAAcnG,OAAOoG,aAAeC,SAASC,gBAAgBhH,UAC7DiH,EAAON,EAAUO,uBACrB,QAASC,EAAGF,EAAKG,KAAMC,EAAGJ,EAAKK,IAAMT,EAAa3C,EAAG+C,EAAKtG,SAG9DkF,EACA,GAAIjH,EAAQ2I,aACR,IAAK,GAAIC,GAAI,EAAGA,EAAI3D,EAAM3B,OAAQsF,IAC9B,GAAI3D,EAAM2D,GAAGC,KAAOnC,EAAO,CACvB1G,EAAQ0G,MAAQkC,CAChB,YAIR5I,GAAQ0G,MAAQnB,SAASmB,EAAO,IAAM,MAG1C1G,GAAQ0G,MAAQnB,SAASmB,EAAO,GAEhCoC,OAAM9I,EAAQ0G,SAGdM,IACAhH,EAAQ+I,sBAAwB,GAEpC3B,EAAU,GAAI4B,YAAW3B,EAAa4B,qBAAsBhE,EAAOjF,GACnEoH,EAAQ/G,OAIR+G,EAAQ8B,OAAO,gBAAiB,WAC5BhC,EAAUE,EAAQ+B,mBAClBrM,EAAE,SAASsM,SAAUC,QAAW,GAAK,OAEzCjC,EAAQ8B,OAAO,iBAAkB,WAC7BpM,EAAE,SAASsM,SAAUC,QAAW,GAAK,OAEzCjC,EAAQ8B,OAAO,cAAe,WAC1BhC,EAAUE,EAAQ+B,uBAGtBG,EAAkBnB,SAASoB,iBAAiB9E,GACvCjB,EAAI,EAAGgG,EAAIF,EAAgBhG,OAAQE,EAAIgG,EAAGhG,IAC/C8F,EAAgB9F,GAAGiG,aAAa,gBAAiBjG,EAAI,GACrD8F,EAAgB9F,GAAGkG,QAAU3D,EAGrCvB,GAAsB,eAG1BmF,WAAY,SAAUC,EAAKC,GACvB,GAAIC,GAAS,EACbhN,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GAEpBqG,GAAUnI,EAAOW,WAAWmB,KAEhC3G,EAAE8M,GAAKG,KAAKD,GAEZhN,EAAE,cAAckN,OAChBlN,EAAE,cAAc0B,UAChB1B,EAAE,oBAAoBmN,eACtBnN,EAAE,iBAAiBoN,eAEnBvI,EAAO4C,WAEP5C,EAAOwI,gBAGXC,WAAY,SAAUR,EAAKC,GACvB,GAAIC,GAAS,EACbhN,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GAEpBqG,GAAUnI,EAAOW,WAAWmB,KAEhC3G,EAAE8M,GAAKtF,OAAOwF,GAEdhN,EAAE,cAAckN,OAChBlN,EAAE,cAAc0B,UAChB1B,EAAE,oBAAoBmN,eACtBnN,EAAE,iBAAiBoN,eAEnBvI,EAAO4C,WAEP5C,EAAOwI,gBAGXE,WAAY,WACR,QAASC,GAAcC,GA6CnB,QAASC,KACLC,EAAOC,KAAK,YAAYC,GAAG,QAAS,WAChCF,EAAOC,KAAK,YAAYE,IAAIH,EAAOC,KAAK,YAAYE,MACpD,IAAIC,GAAUJ,EAAOC,KAAK,YAAY,GAAGvJ,YACzCsJ,GAAOC,KAAK,YAAYrJ,IAAI,SAAUwJ,KAK9C,QAASC,KACLL,EAAOpI,YAAY,OACnBvF,EAAE,aAAauF,YAAY,cAAc+G,SAAUhI,UAAWmJ,GAAgB,GAE9EQ,WAAW,WACPN,EAAOO,UACR,KA3DP,GAAIC,GAAQnO,EAAE,UAAU2D,KAAK,aAChB,KAATwK,IACAA,EAAQnO,EAAE,UAAU2D,KAAK,oBAE7B,IAAIyK,GAAS,EACbA,IAAU,6BACVA,GAAU,oGACVA,GAAU,wBACVA,GAAU,4EACNxL,EAAOuL,KACPC,GAAUD,GAEdC,GAAU,sEAEVA,GAAU,qCACVA,GAAU,gGACVA,GAAU,SACVA,GAAU,yHAEVA,GAAU,SACVA,GAAU,6GAEVA,GAAU,YAGVA,GAAU,kBAEVpO,EAAE,QAAQwH,OAAO4G,EACjB,IAAIT,GAAS3N,EAAE,UACXqO,EAAWrO,EAAE,aAAaiN,MAC9BjN,GAAE,eAAeiN,KAAKoB,GAEtBrO,EAAE,iCAAiCsO,cAEnCtO,EAAE,eAAe8D,OAAO,SAAUqF,GAC9BA,EAAMC,gBACN,IAAImF,GAAMvO,EAAEmD,MAAMyK,KAAK,mBAAmBE,KAC1C9N,GAAE,WAAW2D,KAAK,oBAAqB4K,KAG3CN,WAAW,WACPN,EAAOtI,SAAS,QACjB,IASHqI,IAWA1N,EAAE,eAAe6N,GAAG,QAASG,GAE7BL,EAAOa,WAAWf,GAItBzN,EAAE,WAAW6N,GAAG,QAAS,gBAAiB,WACtC7N,EAAEmD,MAAMsL,WAAW,SAAUC,GACzB,GAAuB,MAAnBA,EAASC,QAA8B,QAAZ1O,EAAmB,CAC9C,GAAI2O,GAAK5O,EAAE,QAAQsE,WACR,KAAPsK,IACAA,EAAK5O,EAAE,QAAQsE,aAEnB2J,WAAW,WACPjO,EAAE,aAAaqF,SAAS,eACzB,KAEHmI,EAAcoB,SAM9BC,WAAY,WACR,QAASC,GAAcrB,EAAcsB,EAAKC,EAAWC,EAAQC,GAYzD,QAASxB,KACLC,EAAOC,KAAK,YAAYC,GAAG,QAAS,WAChCF,EAAOC,KAAK,YAAYE,IAAIH,EAAOC,KAAK,YAAYE,MACpD,IAAIC,GAAUJ,EAAOC,KAAK,YAAY,GAAGvJ,YACzCsJ,GAAOC,KAAK,YAAYrJ,IAAI,SAAUwJ,KAK9C,QAASC,KACLL,EAAOpI,YAAY,OACnBvF,EAAE,aAAauF,YAAY,cAAc+G,SAAUhI,UAAWmJ,GAAgB,GAC9EQ,WAAW,WACPN,EAAOO,UACR,KAzBP,GAAIE,GAAS,GAAIe,EAAcF,EAAS,MAAQA,EAAS,IAAM,UAC/Db,IAAU,6BACVA,GAAU,oEAAsEc,EAAS,yBAA2BH,EAAM,sBAAwBC,EAAY,gDAC9JZ,GAAU,oFAAsFe,EAAc,0EAC9Gf,GAAU,SACVpO,EAAE,QAAQwH,OAAO4G,EACjB,IAAIT,GAAS3N,EAAE,SACfiO,YAAW,WACPN,EAAOtI,SAAS,QACjB,IASHqI,IAUA1N,EAAE,eAAe6N,GAAG,QAASG,GAE7BhO,EAAE,aAAa6N,GAAG,QAAS,WACTF,EAAOC,KAAK,YAAYE,KAEtC9N,GAAEmD,MAAM0L,WAAWpB,KA+C3B,QAAS2B,GAAatC,GAClBA,EAAI2B,WAAW,SAAUC,GACrB,GAAuB,MAAnBA,EAASC,QAA8B,QAAZ1O,EAAmB,CAC9C,GAAI2O,GAAK5O,EAAE,QAAQsE,YACfyK,EAAMjC,EAAIlM,KAAK,iBAGfyO,GAFQvC,EAAIlM,KAAK,aACXkM,EAAIlM,KAAK,QACPkM,EAAIlM,KAAK,WACjBoO,EAAYlC,EAAIlM,KAAK,UACrBqO,EAASnC,EAAInJ,KAAK,YAEX,KAAPiL,IACAA,EAAK5O,EAAE,QAAQsE,aAEnB2J,WAAW,WACPjO,EAAE,aAAaqF,SAAS,eACzB,KACHyJ,EAAcF,EAAIG,EAAKC,EAAWC,EAAQI,MA5DtDrP,EAAE,WAAW6N,GAAG,QAAS,gBAAiB,WACtC,GAAIyB,GAAQtP,EAAEmD,MAAMoM,EAAUD,EAAM1O,KAAK,aAAaD,EAAM2O,EAAM1O,KAAK,OACvE,OAAG2O,GAAQ,GAAKvP,EAAE,kBAAkBwG,OAAS,GACzCxB,OAAOI,KAAKzE,EAAK,WACV,OAEX2O,GAAMb,WAAW,SAAUC,GACvB,GAAuB,MAAnBA,EAASC,QAA8B,QAAZ1O,EAAmB,CAC9C,GAAI2O,GAAK5O,EAAE,QAAQsE,YACfyK,EAAMO,EAAM1O,KAAK,iBAEjB4O,EAAQF,EAAM1O,KAAK,aAEnByO,EAAQC,EAAM1O,KAAK,UACnBoO,EAAYM,EAAM1O,KAAK,UACvBqO,EAASK,EAAM3L,KAAK,YAGxB,IAAI3D,EAAE,kBAAkBwG,OAAS,EAS7B,MARW,KAAPoI,IACAA,EAAK5O,EAAE,QAAQsE,aAEnB2J,WAAW,WACPjO,EAAE,aAAaqF,SAAS,eACzB,KAEHyJ,EAAcF,EAAIG,EAAKC,EAAWC,EAAQI,IACnC,CAEG,KAAVG,GAAwB,IAATA,IACJ,IAAPZ,IACAA,EAAK5O,EAAE,QAAQsE,aAEnB2J,WAAW,WACPjO,EAAE,aAAaqF,SAAS,eACzB,KAEHyJ,EAAcF,EAAIG,EAAKC,EAAWC,EAAQI,SA2B1DrP,EAAE,WAAW6N,GAAG,QAAS,qBAAsB,WAC3C,GAAIyB,GAAQtP,EAAEmD,KACdiM,GAAaE,MAIrBG,cAAe,WACX,GAAI3C,GAAM,mBAAoB4C,EAAY1P,EAAE8M,EAC5C,IAAI4C,EAAUlJ,OAAS,EAAG,CAEtB,GAAIuG,GAAK,mEACL4C,EAAS3P,EAAE,WAAW2D,KAAK,qBAC3BiM,EAAa5P,EAAE,UAAU2D,KAAK,cAC9B5B,GACA4N,OAAQA,EACRC,WAAYA,EACZ3N,UAAW,EAEfjC,GAAEQ,MACEC,KAAM,OACNC,SAAU,OACVC,IAAKoM,EACLnM,MAAQmB,SAAUF,KAAKgO,UAAU9N,IACjClB,WAAY,WAER6O,EAAUlI,OAAOhD,EAASE,aAE9B5D,QAAS,SAAUgP,GACf,GAAIC,GAAS/P,EAAEgQ,UAAUF,EAAeG,KAEhB,QAApBF,EAAOrP,UAAqBqP,EAAOG,UAAU1J,OAAS,GAEtDxG,EAAE,aAAaiN,KAAK8C,EAAOG,UAAU,GAAG7I,MAExCqI,EAAU/L,KAAK,YAAaoM,EAAOI,MAEnCT,EAAU/L,KAAK,gBAAiB,QAChCkB,EAAOgI,WAAWC,EAAKiD,EAAOG,WAC1BH,EAAOP,OAAS,GAChBxP,EAAE,kBAAkBkO,SAExBlO,EAAE,WAAWuE,IAAI,UAAW,UAG5BmL,EAAUzC,KAAKzI,EAASI,kBAO5CwL,gBAAiB,WACb,GAAItD,GAAM,iBAAkB4C,EAAY1P,EAAE8M,EAC1C,IAAI4C,EAAUlJ,OAAS,EAAG,CAEtB,GAAI6J,IACAC,cAAeZ,EAAU/L,KAAK,aAE9B4M,GAAuBxO,SAAUF,KAAKgO,UAAUQ,GACpDnQ,GAASkB,kBAAkBmP,EAAoB,SAAUT,GACrD,GAAIC,GAAS/P,EAAEgQ,UAAUF,EAAeG,KAChB,QAApBF,EAAOrP,UACPgP,EAAU/L,KAAK,YAAaoM,EAAOI,MACnCtL,EAAOgI,WAAWC,EAAKiD,EAAOG,YAE9BR,EAAUzC,KAAKzI,EAASI,cAE9B,WACE8K,EAAUlI,OAAOhD,EAASE,aAG9B,IAAI8L,IACAC,QAAQ,WACJ,GAAI1B,GAAM/O,EAAE,oBAAoBY,KAAK,OAEjC8P,GACAC,SAAS,s3BAqBT/P,KAAK,WACD,OACIgQ,MAAK,EACLC,QAAQ,QAAQ1N,KAAKqM,MAAM,GAAG,MAC9BsB,UAAS,EACTX,KAAK,EACLY,SAAS,KAGjBC,OAAO,MAAM,MAAM,SACnBC,QAAQ,WACD9N,KAAKqM,MAAM,IACVrM,KAAKyN,MAAO,IAGpBM,SACIC,QAAQ,YACAhO,KAAKgN,KAAK,GAAGhN,KAAK4N,UAAW5N,KAAKqM,MAAM,GACxCrM,KAAKiO,eAGbA,YAAY,WACR,GAAIC,GAAOlO,KACPmO,GACIhB,cAAevB,EACf9M,UAAW,EACXsP,SAAU,EACVrP,KAAK,EACLG,eAAegP,EAAKlB,KACpBqB,cAAcH,EAAKN,UAEvBU,GAAc1P,SAAUF,KAAKgO,UAAUyB,GAC3CpR,GAASkC,uBAAuBqP,EAAW,SAAUC,GACjD,GAAI3B,GAAS2B,EAAQzB,IACrB,IAAuB,OAApBF,EAAOrP,SAAkB,CACxB,GAAIiR,GAAU5B,EAAO6B,SAAS,GAAGC,KACjCR,GAAKS,IAAMT,EAAKS,IAAIC,OAAOJ,GACxBN,EAAKN,UAAUM,EAAKlB,KAAK,IAAIkB,EAAK7B,OACjC6B,EAAKR,QAAU,SACfQ,EAAKP,UAAW,GAEhBO,EAAKR,QAAU,QAAQQ,EAAK7B,MAAM6B,EAAKN,UAAUM,EAAKlB,KAAO,GAAK,GAAG,MAEzEkB,EAAKlB,SAEX,WACEkB,EAAKR,QAAU,cAM3BmB,GACArB,SAAS,+3BAqBTK,OAAO,QACPiB,YACIvB,SAASA,IAGbwB,GACAvB,SAAS,2ZAeT/P,KAAK,WACD,OACIuP,KAAK,EACLgC,SACAC,SAAQ,IAGhBC,QAAQ,WACJ,GAAIhB,GAAOlO,KAAKmO,GACRhB,cAAevB,EACf9M,UAAWoP,EAAKlB,KAChBoB,SAAU,KAEdE,GAAc1P,SAAUF,KAAKgO,UAAUyB,GAC3CpR,GAASiC,yBAAyBsP,EAAW,SAAUa,GACnD,GAAIvC,GAASuC,EAAIrC,IACO,QAApBF,EAAOrP,WACP2Q,EAAKe,SAAU,EACff,EAAKc,MAAQpC,EAAO6B,aAIhCK,YACIvB,SAASA,EACTsB,OAAOA,IAIXO,GACA5B,SAAS,8pBAiBT/P,KAAK,WACD,OACIsB,KAAK,EACLsQ,QAAQ,GACRC,WAAW,OAAO,SAAS,eAC3BC,OAEQC,IAAI,KACJzQ,KAAK,EACLiO,KAAK,EACLyC,QAAQ,EACRhC,KAAK,EACLiC,UAGAF,IAAI,KACJzQ,KAAK,EACLiO,KAAK,EACLyC,QAAQ,EACRhC,KAAK,EACLiC,UAGRV,SACAW,SAAQ,IAGhBT,QAAQ,WACJlP,KAAK4P,QAAQ5P,KAAKuP,KAAKvP,KAAKjB,MAAMiO,OAEtC8B,YACIvB,SAASA,EACTsB,OAAOA,GAEXd,SACI6B,QAAQ,SAAU5C,GACd,GAAIkB,GAAOlO,KACPmO,GACIhB,cAAevB,EACf9M,UAAWkO,EACXoB,SAAUF,EAAKmB,QACftQ,KAAKmP,EAAKnP,MAEduP,GAAc1P,SAAUF,KAAKgO,UAAUyB,GAC3CpR,GAASyB,uBAAuB8P,EAAW,SAAUa,GACjD,GAAIvC,GAASuC,EAAIrC,IACO,QAApBF,EAAOrP,WACP2Q,EAAKyB,SAAU,EACfzB,EAAKqB,KAAKrB,EAAKnP,MAAM0Q,QAAU7C,EAAOP,MACtC6B,EAAKqB,KAAKrB,EAAKnP,MAAM2Q,KAAOxB,EAAKqB,KAAKrB,EAAKnP,MAAM2Q,KAAKd,OAAOhC,EAAO6B,UACjEP,EAAKqB,KAAKrB,EAAKnP,MAAMiO,KAAKkB,EAAKmB,QAAQzC,EAAOP,MAC7C6B,EAAKqB,KAAKrB,EAAKnP,MAAM0O,KAAO,EAE5BS,EAAKqB,KAAKrB,EAAKnP,MAAM0O,KAAO,IAGtC,WACES,EAAKqB,KAAKrB,EAAKnP,MAAM0O,KAAO,KAGpCoC,WAAW,SAAUC,GACjB,GAAI5B,GAAOlO,IACXkO,GAAKnP,KAAO+Q,EACT5B,EAAKqB,KAAKO,GAAKJ,KAAKrM,OAAO,GAC1B6K,EAAK0B,QAAQ1B,EAAKqB,KAAKrB,EAAKnP,MAAMiO,OAG1C+C,QAAQ,WAEJ,QAASC,KACL9B,EAAK0B,UAAU1B,EAAKqB,KAAKrB,EAAKnP,MAAMiO,MAFxC,GAAIkB,GAAOlO,IAIRkO,GAAKqB,KAAKrB,EAAKnP,MAAMiO,KAAKkB,EAAKmB,QAAQnB,EAAKqB,KAAKrB,EAAKnP,MAAM0Q,SAC3DO,OAKZC,GACAzC,SAAS,sFACTsB,YACIC,QAAQA,EACRK,QAAQA,GAGI,IAAIc,MACpBxL,GAAG,mBACHoK,YACImB,OAAOA,MAInB7P,KAAK,WACDJ,KAAKsN,WAGbD,GAAUjN,SAIlB+P,aAAc,SAAUxG,EAAKzM,GACzB,QAASkT,KACL,GAAI7D,GAAY1P,EAAE8M,EAEsB,UAApC4C,EAAU/L,KAAK,kBAES,kBAAbtD,IACPA,EAASyM,EAAK4C,GAI1B,QAAS8D,KACL,GAAI5E,GAAK5O,EAAE,QAAQsE,YAAamP,EAAKzT,EAAEqL,UAAU3H,SAAUgQ,EAAK1T,EAAEgF,QAAQtB,QAC/D,KAAPkL,IACAA,EAAK5O,EAAE,QAAQsE,aAEfsK,EAAK6E,EAAKC,EAAK,IAAM9E,EAAK8E,EAAKD,GAAMjP,EAASC,gBAAiB,IAC/DD,EAASC,cAAe,EACxB8O,KAGJvT,EAAE8M,GAAKtG,OAAS,GAChBxG,EAAEgF,QAAQ2O,OAAO,WACbH,OAKZI,UAAW,WACP,GAAIC,GAAW7T,EAAE,iBACjB6T,GAAShG,GAAG,QAAS,WACjB,GAAI6B,GAAY1P,EAAE,mBAElB,IAAI0P,EAAUlJ,OAAS,GAAyC,SAApCkJ,EAAU/L,KAAK,iBAA6B,CAEpE,GAAIoJ,GAAK,mEACL4C,EAAS3P,EAAE,WAAW2D,KAAK,qBAC3BiM,EAAa5P,EAAE,UAAU2D,KAAK,cAC9BmQ,EAAuBpE,EAAU9B,KAAK,WAAWjK,KAAK,YACtD1B,EAAYwG,SAASiH,EAAU/L,KAAK,mBACpC4N,EAAwB,GAAbtP,EAAiB,EAAI,EACpCA,GAAyB,GAAbA,EAAiB,EAAIA,EAAY,CAC7C,IAAIF,IACA4N,OAAQA,EACRC,WAAYA,EACZkE,qBAAsBA,EACtB7R,UAAWA,EACXsP,SAAUA,EAEdvR,GAAEQ,MACEC,KAAM,MACNC,SAAU,OACVC,IAAKoM,EACLnM,MAAQmB,SAAUF,KAAKgO,UAAU9N,IACjClB,WAAY,WAER6O,EAAUlI,OAAOhD,EAASE,aAE9B5D,QAAS,SAAUgP,GACf,GAAIC,GAAS/P,EAAEgQ,UAAUF,EAAeG,KAExCP,GAAU9B,KAAK,eAAeM,SAE1B6B,EAAOG,UAAU1J,OAAS,GAE1BkJ,EAAU/L,KAAK,iBAAkB1B,GAEjC4C,EAAOyI,WAAW,mBAAoByC,EAAOG,WACzCH,EAAOG,UAAU1J,OAAS+K,IAC1B7B,EAAU/L,KAAK,gBAAiB,SAChCkQ,EAAS5G,KAAK,YAGsB,SAApCyC,EAAU/L,KAAK,mBAEf+L,EAAU/L,KAAK,gBAAiB,SAEhCkQ,EAAS5G,KAAK,kBAS1C8G,OAAQ,WACJ,QAASC,KAQL,QAASC,KACL,GAAIC,GAASC,EAAQC,SAASxI,IAAKyI,EAASrU,EAAE,QAAQsE,WACvC,KAAX+P,IACAA,EAASrU,EAAE,QAAQsE,aAEnB+P,GAAUH,EACVI,EAASjP,SAAS,kBAElBiP,EAAS/O,YAAY,kBAQ7B,QAASgP,KACL,GAAIC,GAAQxU,EAAE,QAASyU,EAAKD,EAAM9Q,SAC9BgR,EAAQP,EAAQC,SAASxI,IAAKyI,EAASG,EAAMlQ,WAClC,KAAX+P,IACAA,EAASrU,EAAE,QAAQsE,aAEvBkQ,EAAMjQ,IAAI,SAAUkQ,GAChBJ,EAASK,GACT1U,EAAE,aAAasM,SAAUhI,UAAWoQ,GAAS,GAIrD,QAASC,KACL,GAAIH,GAAQxU,EAAE,OACd4U,cAAaC,GACbA,EAAc5G,WAAW,WACrBuG,EAAMjQ,IAAI,SAAU,KACrB,KAxCP,GAKIsQ,GALAC,EAAO9U,EAAE,YAETsU,EAAWtU,EAAE,aAEbmU,EAAUnU,EAAE,YAchBiU,KACAjU,EAAEgF,QAAQ2O,OAAO,WACbM,MAuBJa,EAAKlH,KAAK,KAAKC,GAAG,QAAS,WACvB,GAAIyB,GAAQtP,EAAEmD,MAAO4R,EAAS,aAE9BD,GAAKlH,KAAK,KAAKrI,YAAY,OAC3B+J,EAAMjK,SAAS,OACfrF,EAAE+U,GAAQ9H,KAAK,IAAItJ,KAAK,iBAAkB,GAAGA,KAAK,gBAAgB,GAClEa,EAASC,cAAe,EACxB8P,IACAvU,EAAE+U,GAAQC,QAAQ,WACdL,QAIR3U,EAAE,YAAYwG,OAAS,GACvBwN,KAIRiB,SAAU,WACN,GAAIC,GAASlV,EAAE,gBAEfkV,GAAOrH,GAAG,QAAS,sBAAuB,WACtC,GAAIyB,GAAQtP,EAAEmD,MAAOxC,EAAM2O,EAAM1O,KAAK,OAEtCoE,QAAOI,KAAKzE,EAAK,YAGrBuU,EAAOrH,GAAG,QAAS,mCAAoC,SAAU1E,GAC7DA,EAAMgM,qBAIdC,kBAAmB,SAAUC,GACzB,GAAIC,GAAU,EAad,OAZAA,IAAW,oBAAsBD,EAAKE,OAAS,qBAC/CD,GAAW,aAAeD,EAAKzP,KAAO,UAAYyP,EAAKG,KAAO,SAC9DF,GAAW,sDAAwDD,EAAK/E,cAAgB,kBAAoB+E,EAAKE,OAAS,gBAAkBF,EAAKG,KAAO,mBAAqBH,EAAKI,MAAQ,KAC1LH,GAAW,OAASD,EAAKG,KACrBH,EAAKxD,QACLyD,GAAW,YAAcD,EAAKxD,OAElCyD,GAAW,QACXA,GAAW,mBAAqBD,EAAKK,UAAY,OACjDJ,GAAW,wBACXA,GAAWD,EAAKM,QAChBL,GAAW,qBAIfM,mBAAmB,SAAUC,EAAU9G,GACnC,GAAI+G,GAAQ,EAMZ,OALAA,IAAS,8DAA8D/G,EAAI,kBAAkB8G,EAAUN,OAAO,gBAAgBM,EAAUL,KAAK,kBAAkBK,EAAUJ,MAAM,yBAAyBI,EAAUL,KAAK,OAChM,OAApBK,EAAUhE,QACTiE,GAAS,gDAAgDD,EAAUhE,MAAM,QAE7EiE,GAAS,4DAA4DD,EAAUF,QAAQ,iBAI3FI,sBAAuB,SAAUV,GAC7B,GAAIC,GAAU,GAAGjE,EAAOlO,IAkCxB,OAjCAmS,IAAW,oBAAsBD,EAAKE,OAAS,IAE3CD,GADDD,EAAKW,WAAW,EACJ,0BAEA,IAEfV,GAAW,mBACXA,GAAW,aAAeD,EAAKzP,KAAO,UAAYyP,EAAKG,KAAO,SAC9DF,GAAW,qBACXA,GAAW,OAASD,EAAKG,KACtBH,EAAKY,WACJX,GAAW,aAAaD,EAAKY,SAAS,eAE1CX,GAAW,wBAA0BD,EAAKW,UAAY,OACtDV,GAAW,QACXA,GAAW,oDAAsDD,EAAKK,UAAY,sCAAwCL,EAAKa,YAAc,gBAE7IZ,GAAW,8DAA8DD,EAAK/E,cAAc,kBAAkB+E,EAAKE,OAAO,gBAAgBF,EAAKG,KAAK,kBAAkBH,EAAKI,MAAM,KACjLH,GAAWD,EAAKM,QAChBL,GAAW,SACO,OAAfD,EAAKxD,QACJyD,GAAW,6BACXtV,EAAEyG,KAAK4O,EAAKxD,MAAM,SAAUnL,EAAEC,GACvBD,EAAE,IACD4O,GAAWjE,EAAKuE,mBAAmBjP,EAAK0O,EAAKE,WAGlDF,EAAKxD,MAAMrL,OAAO,IACjB8O,GAAW,oCAAoCD,EAAKc,WAAW,WAEnEb,GAAW,UAEfA,GAAW,eAGfc,sBAAuB,SAAUf,GAC7B,GAAIC,GAAU,EAad,OAZAA,IAAW,oBAAsBD,EAAKE,OAAS,qBAC/CD,GAAW,aAAeD,EAAKzP,KAAO,UAAYyP,EAAKG,KAAO,SAC9DF,GAAW,2DAA6DD,EAAK/E,cAAgB,kBAAoB+E,EAAKE,OAAS,gBAAkBF,EAAKG,KAAO,mBAAqBH,EAAKI,MAAQ,KAC/LH,GAAW,OAASD,EAAKG,KACrBH,EAAKxD,QACLyD,GAAW,YAAcD,EAAKxD,OAElCyD,GAAW,QACXA,GAAW,mBAAqBD,EAAKK,UAAY,OACjDJ,GAAW,wBACXA,GAAWD,EAAKM,QAChBL,GAAW,qBAIfe,kBAAmB,SAAUvJ,EAAKC,EAAKuJ,GACnC,GAAItJ,GAAS,EACbhN,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GAEpBqG,GAAUnI,EAAOkR,sBAAsBpP,KAGvCqG,GADDsJ,KAAY,EACD,gFAEA,+CAEdtW,EAAE8M,GAAKG,KAAKD,IAGhBuJ,kBAAmB,SAAUzJ,EAAKC,EAAKuJ,GACnC,GAAItJ,GAAS,EACbhN,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GAEpBqG,GAAUnI,EAAOkR,sBAAsBpP,KAGvCqG,GADDsJ,KAAY,EACD,gFAEA,+CAEdtW,EAAE8M,GAAKtF,OAAOwF,IAGlBwJ,eAAgB,SAAUC,GACtB,GAAIC,GAAU,EAKd,OAJAA,IAAW,oBAAsBD,EAAKE,OAAS,qBAC/CD,GAAW,aAAeD,EAAK7Q,KAAO,UAAY6Q,EAAKjB,KAAO,SAC9DkB,GAAW,wBAA0BD,EAAKjB,KAAO,aACjDkB,GAAW,eAIfE,eAAgB,SAAU9J,EAAKC,GAC3B,GAAIC,GAAS,EACbhN,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GAEpBqG,GAAUnI,EAAO2R,eAAe7P,KAEpC3G,EAAE8M,GAAKG,KAAKD,IAGhB6J,eAAgB,SAAU/J,EAAKC,GAC3B,GAAIC,GAAS,EACbhN,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GAEpBqG,GAAUnI,EAAO2R,eAAe7P,KAEpC3G,EAAE8M,GAAKtF,OAAOwF,IAGlBK,aAAc,WACV,QAASyJ,GAASC,GAad,QAAS/I,KACLgJ,EAAKzR,YAAY,OACjB0I,WAAW,WACP+I,EAAK9I,UACN,KAhBP,GAAI+I,GAAS,EACbA,IAAU,wCACVA,GAAU,iCACVA,GAAU,yEAA2EF,EAAQ,4CAC7FE,GAAU,SACVA,GAAU,qFACVA,GAAU,SACVjX,EAAE,QAAQwH,OAAOyP,EACjB,IAAID,GAAOhX,EAAE,cACbiO,YAAW,WACP+I,EAAK3R,SAAS,QACf,IAOH2R,EAAKnJ,GAAG,QAASG,GACjBgJ,EAAKnJ,GAAG,QAAS,SAAU,SAAU1E,GACjCA,EAAMgM,oBAGdnV,EAAE,kBAAkB6N,GAAG,QAAS,WAC5B,GAAIyB,GAAQtP,EAAEmD,MAAO+T,EAAQ5H,EAAM1O,KAAK,QAASmW,EAAQ,GACrDI,EAAS,gCAAiCC,EAAiBF,EAAMG,QAAQF,GAAUA,EAAO3Q,OAAQ8Q,EAAeJ,EAAMG,QAAQ,UACnIN,GAAQG,EAAMK,UAAUH,EAAgBE,GACxCR,EAASC,MAIjBS,eAAgB,SAAUzK,GACtB,GAAI0K,GAAW,EAEf,OADAA,IAAY,qBAAuB1K,EAAG2K,GAAK,iBAAmB3K,EAAG4K,MAAQ,qDAAuD5K,EAAG2K,GAAK,QAAU3K,EAAG4K,MAAQ,oFAIjKC,SAAU,WAIN,QAASC,GAAW9K,GAChB,GAAI+K,GAAU,EACd9X,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GACpBmR,GAAWjT,EAAO2S,eAAe7Q,KAErCoR,EAAW9K,KAAK6K,GAChB9X,EAAE,sBAAsBgY,oBAE5B,QAASC,GAAQlL,GACb,GAAI+K,GAAU,EACd9X,GAAEyG,KAAKsG,EAAI,SAAUrG,EAAGC,GACpBmR,GAAWjT,EAAO2S,eAAe7Q,KAErCoR,EAAWvQ,OAAOsQ,GAClB9X,EAAE,sBAAsBgY,oBAE5B,QAAS5G,KACL,GAAInP,GAAYwG,SAASsP,EAAWpU,KAAK,cAAgB,EACrD5B,GACAE,UAAWA,EACXsP,SAAUA,EAEdvR,GAAEQ,MACEC,KAAM,MACNC,SAAU,QACVC,IAAKuX,EACLtX,MAAQmB,SAAYF,KAAKgO,UAAU9N,IACnCjB,QAAS,SAAUiP,GACfgI,EAAWpU,MAAOwU,YAAalW,EAAWmW,gBAAiB,SAC3DP,EAAW9H,MAhCvB,GAAIgI,GAAa/X,EAAE,mBACfkY,EAAa,sDACb3G,EAAWwG,EAAWpU,KAAK,gBAkC3BoU,GAAWvR,OAAS,IACpB4K,IACAvM,EAAOyO,aAAa,kBAAmB,SAAUxG,EAAK4C,GAClD,GAAI2I,GAAQrY,EAAE,WAAYiC,EAAYwG,SAASsP,EAAWpU,KAAK,cAAgB,EAC3E5B,GACAE,UAAWA,EACXsP,SAAUA,EAEdvR,GAAEQ,MACEC,KAAM,MACNC,SAAU,QACVC,IAAKuX,EACLtX,MAAQmB,SAAYF,KAAKgO,UAAU9N,IACnClB,WAAY,WAERwX,EAAM7Q,OAAOhD,EAASE,aAE1B5D,QAAS,SAAUiP,GAEfsI,EAAMzK,KAAK,eAAeM,SAEtB6B,EAAOvJ,OAAS,GAEhBkJ,EAAU/L,KAAK,YAAa1B,GAE5BgW,EAAQlI,IAEgC,SAApCL,EAAU/L,KAAK,mBAEf+L,EAAU/L,KAAK,gBAAiB,SAEhC0U,EAAM7Q,OAAOhD,EAASG,YAG9BH,EAASC,cAAe,SAQ5C6T,cAAc,WAEV,QAASC,KACL,GAAItB,GAAS,EAWb,OAVAA,IAAU,yEACVA,GAAU,iDACVA,GAAU,4CAEVA,GAAU,oCACVA,GAAU,0RACVA,GAAU,SAEVA,GAAU,6EACVA,GAAU,SAId,QAASuB,KACL,GAAIC,GAAW,qEAAqE,GAAIC,MAAO,KAClE,iBAAnBC,gBACNA,eAAepV,OAEfvD,EAAE4Y,UAAUH,GAIpB,QAASzK,KACL,GAAIgJ,GAAOhX,EAAE,gBACbgX,GAAKzR,YAAY,OACjB0I,WAAW,WACP+I,EAAK9I,SACLmD,EAAKlM,UAAUG,SACjB,KAGN,QAASuT,KACL,GAAI5B,GAASsB,GACbvY,GAAE,QAAQwH,OAAOyP,GACjB5F,EAAKlM,UAAUC,OACf6I,WAAW,WACPjO,EAAE,iBAAiBqF,SAAS,QAC9B,IACFrF,EAAE,sBAAsB6N,GAAG,QAAQ,WAC/BG,MAEJwK,IA5CJ,GAAInH,GAAOlO,IA+CX0V,MAGJC,WAAW,WACP,GAAIT,GAAQrY,EAAE,WAAWqR,EAAOlO,IAChCkV,GAAMxK,GAAG,QAAQ,cAAc,WAC3BwD,EAAKiH,mBAIbS,KAAM,WAEFlU,EAAOC,SAEPD,EAAOyC,aAEPzC,EAAOgK,aAIPhK,EAAO0I,aAEP1I,EAAO4K,gBAEP5K,EAAOuL,kBAEPvL,EAAOkP,SAEPlP,EAAOyO,aAAa,cAAe,SAAUxG,EAAK4C,GAC9CA,EAAUsF,YAGdnQ,EAAO+O,YAEP/O,EAAOoQ,WAEPpQ,EAAO+S,WAEP5X,EAAEgF,QAAQgU,OAAO,WACbnU,EAAOC,WAGXD,EAAOiU,cAGfjU,GAAOkU,OAEP/Y,EAAEqL,UAAU4N,MAAM,WACdjZ,EAAE,eAAegV,UACjBhV,EAAE,cAAc0B,UAChB1B,EAAE,aAAakZ,YACflZ,EAAE,gBAAgB8D,OAAO,SAAUqF,GAC/BA,EAAMC,gBACN,IAAIlH,GAAOlC,EAAEmD,MAAMyK,KAAK,mBAAmBjK,KAAK,YAChD3D,GAAEmD,MAAMQ,KAAK,YAAazB,GAC1BlC,EAAE,eAAeiN,KAAK,IAAItJ,KAAK,iBAAkB,GAAGA,KAAK,gBAAgB,GAAOqR,cAGxFhV,EAAE+C,GAAGyL,WAAa,SAAU2K,GACxB,MAAOhW,MAAKsD,KAAK,WACb,GAAI2S,GAAOpZ,EAAEmD,MAAOkW,EAAS5Q,SAAS2Q,EAAKxL,KAAK,WAAWX,QACvDqM,EAAYF,EAAKxL,KAAK,YACtB2L,EAAOD,EAAU5V,SAAU8V,EAAO/Q,SAAS6Q,EAAU/U,IAAI,gBACzDkV,EAAc,GAAPD,CAEXF,GAAUrW,oBAAqBI,UAAWkW,EAAMjW,UAAWmW,IAC3DL,EAAKvL,GAAG,QAAS,WAAY,WACzB,GAAIyB,GAAQtP,EAAEmD,MAAOuW,EAAMpK,EAAM3L,KAAK,cACtC2L,GAAM3L,KAAK,WAAY+V,GAAKC,WAAW,eAAeC,SAASvU,SAAS,SACzEwI,GAAG,OAAQ,WAAY,WACtB,GAAIyB,GAAQtP,EAAEmD,MAAOuW,EAAMpK,EAAM3L,KAAK,WACtC2L,GAAM3L,KAAK,cAAe+V,GAAKE,SAASrU,YAAY,SACrDsI,GAAG,aAAc,WAAY,WAC5B,GAAIgM,GAAM1W,KAAK2W,MAAMtT,MACrBrD,MAAK2W,MAAQ3W,KAAK2W,MAAMC,OAAO,EAAGV,GAClCD,EAAKxL,KAAK,WAAWX,KAAK4M,GAC1BT,EAAKxL,KAAK,aAAarJ,IAAI,UAAWsV,EAAM,EAAI,QAAU,MAI9DT,EAAKvL,GAAG,QAAS,YAAa,WAC1B,GAAImM,GAASha,EAAE,8BACXia,EAAaja,EAAE,cAEfka,EAASla,EAAE,YAAY8N,MACvBqM,EAAoB,IAAVD,EAAela,EAAE,YAAYiN,OAASiN,EAChDvK,EAAS3P,EAAE,WAAW2D,KAAK,oBAC/B,IAAoC,QAAhC3D,EAAEmD,MAAMQ,KAAK,gBAAjB,CAGA3D,EAAEmD,MAAMQ,KAAK,gBAAgB,EAE7B,IAAIyW,GAAS,GACTP,EAAMG,EAAOxT,OAAS,EAAI,EAAIwT,EAAOxT,OAAS,CAClD,IAAIqT,EAAM,EAAG,CACTO,IACA,KAAK,GAAI1T,GAAI,EAAGA,EAAImT,EAAKnT,IAAK,CAC1B,GAAIjG,GAAOuZ,EAAOK,GAAG3T,GAAGkH,KAAK,OAAOjK,KAAK,aACrC0C,EAAM2T,EAAOK,GAAG3T,GAAGkH,KAAK,OAAOjK,KAAK,OACpC2W,EAAQjU,EAAIvD,QAAQ,OAAQ,SAC5BgE,EAAST,EAAIvD,QAAQ,OAAQ,UAC7ByX,EAAalU,EAAIvD,QAAQ,OAAQ,aACzB,QAARrC,IACAqG,EAASA,EAAOhE,QAAQ,OAAQ,QAEpC,IAAIY,GAASsW,EAAOK,GAAG3T,GAAGkH,KAAK,OAAOjK,KAAK,eACvCsB,EAAQ+U,EAAOK,GAAG3T,GAAGkH,KAAK,OAAOjK,KAAK,aAC1CyW,GAAOtR,MAAO0R,KAAQnU,EAAKkU,WAAcA,EAAYD,MAASA,EAAOxT,OAAUA,EAAQpD,OAAUA,EAAQuB,MAASA,EAAOwV,UAAaha,KAK9I,GAAIia,GAAS,EACb,IAAIT,EAAWzT,OAAS,EAAG,CACvB,GAAImU,GAAQ,GAAIC,EAAQ,GAAIC,EAAQ,GAAIC,EAAQ,GAAIC,EAAS,EAC1B/T,SAA/BiT,EAAWtW,KAAK,YAChBiX,EAAQ,QAERD,EAAQV,EAAWtW,KAAK,YACxBiX,EAAQX,EAAWtW,KAAK,YACxBmX,EAAQb,EAAWtW,KAAK,YACxBoX,EAASd,EAAWtW,KAAK,kBAE7BkX,EAAQZ,EAAWtW,KAAK,YACxB+W,GAAWM,MAASF,EAAOnS,MAASiS,EAAOK,SAAYJ,EAAOK,SAAYP,EAAOQ,SAAYJ,GAGjG,GAAc,IAAVX,GAA0B,IAAVM,IAAiB9X,EAAOuX,GAAgC,WAApBiB,OAAM,YAE9D,IAAIrZ,IACAoY,QAASA;AACTC,OAAQA,EACRM,OAAQA,EACR/K,OAAQA,EACR0L,OAAQ,EAEZrb,GAAEQ,MACEC,KAAM,OACNC,SAAU,OACVC,IAAK,yDACLC,MAAQmB,SAAYF,KAAKgO,UAAU9N,IACnCjB,QAAS,SAAUiP,GACf,GAAuB,MAAnBA,EAAOrP,SAAkB,CACzBV,EAAEmD,MAAMQ,KAAK,gBAAgB,GAC7B3D,EAAE,YAAY8N,IAAI,GAClB,IAAIb,GAAOpI,EAAOW,WAAWuK,EAAOG,UACpClQ,GAAE,eAAesb,QAAQrO,GACzBpI,EAAO4C,WAEPzH,EAAE,cAAckN,OAChBlN,EAAE,cAAc0B,UAChB1B,EAAE,iBAAiBoN,eACnBpN,EAAE,aAAauF,YAAY,cAAc+G,SAAUhI,UAAW6U,GAAgB,GAC9ElL,WAAW,WACPjO,EAAE,UAAUkO,UACb,SAGHkN,OAAM,sBAO9Bpb,EAAE+C,GAAGuL,YAAc,WACf,MAAOnL,MAAKsD,KAAK,WACbzG,EAAEmD,MAAMoY,KAAK,QAAS,WAClBvb,EAAE,eAAewb,QAAQ,SACzBxb,EAAE,eAAeyb,YACb/a,SAAU,OACVgb,YAAa,UACb/a,IAAK,iDACLgb,KAAM,SAAUzS,EAAGtI,GACf,GAAImP,GAASnP,EAAKmP,MAClB,IAAqB,MAAjBA,EAAOpB,OAAgB,CACvB,GAAIa,GAAQxP,EAAE,kCAAkCwG,OAAS,CACzD,IAAIgJ,EAAQ,EACR4L,MAAM,WACNpb,EAAE,4BAA4BkO,aAE7B,CACY,GAATsB,GACAxP,EAAE,oBAAoB4Z,SAASrV,IAAI,UAAW,OAElD,IAAI0I,GAAO,aAAe8C,EAAOyK,KAAO,oBAAsBzK,EAAO6L,SAAW,mBAAqB7L,EAAOrM,OAAS,iBAAqBqM,EAAO9K,MAAQ,gBAAoB8K,EAAO8L,WAAa,kCACjM7b,GAAE,4BAA4BuF,YAAY,QAAQ0H,KAAKA,GAG3DjN,EAAE,+BAA+ByG,KAAK,WAClCzG,EAAEmD,MAAM2Y,OAAO,SACf9b,EAAEmD,MAAMoY,KAAK,QAAS,WAClB,GAAIK,GAAW5b,EAAEmD,MAAM4Y,QAAQ,QAAQnO,KAAK,OAAOjK,KAAK,iBACpDkW,EAAM7Z,EAAE,mBAAmBgc,IAAI,SAASxV,MAC5CxG,GAAEmD,MAAMyW,OAAO,mBAAmB1L,SAClClO,EAAEQ,MACEC,KAAM,MAAOC,SAAU,OAAQC,IAAK,0DAA4Dib,EAChGhb,QACAE,QAAS,SAAUmb,OAGnBpC,EAAM,GACN7Z,EAAE,oBAAoB4Z,SAASrV,IAAI,UAAW,iBAM1D6W,OAAM,cACNpb,EAAE,4BAA4BkO,UAItCpK,OAAQ,SAAUoF,EAAGtI,GACjB,GAAI8F,GAAI,EACJwV,EAAczT,SAASzI,EAAE,eAAe2D,KAAK,mBAC7CwY,EAAgBD,EAAc,IAClClc,GAAEyG,KAAK7F,EAAKwb,MAAO,SAAUxS,EAAOjD,GAChC,GAAIA,EAAKI,KAAO,KAAOmV,GAAexV,GAAK,EACvCA,GAAK,EACL0U,MAAM,SAAWe,EAAgB,gBAGjC,IAAIxV,EAAKI,KAAO,MAAQmV,EAAa,CACjC,GAAIjP,GAAO,iHACXjN,GAAE,yBAAyBqc,OAAOpP,cAUlEjN,EAAE+C,GAAGiS,QAAU,SAAU3U,GACrB,MAAO8C,MAAKsD,KAAK,WACb,GAAI6I,GAAQtP,EAAEmD,MACVmZ,EAAMtc,EAAE,kBAAkB2D,KAAK,YAC/B4Y,EAAcja,EAAWC,cAAc+Z,GAAK7b,KAC5CyB,EAAOI,EAAWC,cAAc+Z,GAAKpa,KACrCyN,EAAS3P,EAAE,WAAW2D,KAAK,eAC3BwK,EAAQnO,EAAE,UAAU2D,KAAK,cACzB6Y,EAAUxc,EAAE,UAAU2D,KAAK,gBAC3B1B,EAAYwG,SAAS6G,EAAM3L,KAAK,mBAAqB,EACrD4N,EAAWjC,EAAM3L,KAAK,iBACtB8Y,EAAUnN,EAAM3L,KAAK,eACzB,IAAe,QAAX8Y,EAAJ,CAGAnN,EAAM3L,KAAK,eAAgB,OAC3B,IAAI6C,GAAS8I,EAAM1B,KAAK,WAAWpH,OAC/BoD,EAAQ,EACR8S,EAAapN,EAAM1B,KAAK,iBAAiBjK,KAAK,WAChCqD,SAAd0V,GAAuC,MAAZA,IAC3BA,EAAW,IAEXlW,GAAU,KACVoD,EAAQpD,EAAS,IAErBkW,GAAY,IACZpN,EAAM1B,KAAK,cAAgBhE,EAAQ,KAAKnD,KAAK,WACzCiW,GAAc1c,EAAEmD,MAAMQ,KAAK,YAAc,KAE7C,IAAI5B,IACAwa,YAAaA,EACbra,KAAMA,EACND,UAAWA,EACXsP,SAAUA,EACV5B,OAAQA,EACRxB,MAAOA,EACPqO,QAASA,EACTE,WAAYA,EAEhBpN,GAAM3L,KAAK,iBAAkB1B,EAC7B,IAAI0a,IAAkB5a,SAAUF,KAAKgO,UAAU9N,GAC/C7B,GAASmB,kBAAkBsb,EAAe,SAAU7M,GAChD,GAAIC,GAAS/P,EAAEgQ,UAAUF,EAAeG,KACxCX,GAAM3L,KAAK,eAAgB,SAC3B2L,EAAM1B,KAAK,eAAeM,QAC1B,IAAI2L,GAAM9J,EAAOG,UAAU1J,MACV,IAAbvE,GAAyB,GAAP4X,EAClBvK,EAAMrC,KAAKzI,EAASI,aAAajB,KAAK,gBAAiB,SAErC,GAAb1B,GAAkB4X,EAAM,GAC7BhV,EAAOgI,WAAWyC,EAAOS,EAAOG,WAC5B2J,GAAOtI,GACPjC,EAAM3L,KAAK,gBAAiB,QAC5Ba,EAASC,cAAe,IAGxBD,EAASC,cAAe,EACxB6K,EAAM3L,KAAK,gBAAiB,SAAS6D,OAAOhD,EAASG,aAGpD1C,EAAY,GAAK4X,EAAM,GAC5BhV,EAAOyI,WAAWgC,EAAOS,EAAOG,WAChCZ,EAAM3L,KAAK,gBAAiB,QAC5Ba,EAASC,cAAe,GAGxB6K,EAAM3L,KAAK,gBAAiB,SAAS6D,OAAOhD,EAASG,WAEjC,kBAAbtE,IACPA,GAAYA,KAElB,WAEEL,EAAE,2BAA2BkO,SAC7BoB,EAAM9H,OAAOhD,EAASE,kBAMlC1E,EAAE+C,GAAGmK,KAAO,WACR,GAAI0P,GAAU,EACd5c,GAAEmD,MAAMsD,KAAK,WACM,IAAXmW,IACAA,GAAoB,KAExBA,GAAoB5c,EAAEmD,MAAMQ,KAAK,uBAErC,IAAI5B,IACAuO,cAAesM,GAEfC,GAAa9a,SAAUF,KAAKgO,UAAU9N,GAC1C7B,GAASuB,QAAQob,EAAU,SAAUjc,GACjC,GAAmB,MAAfA,EAAK+N,OAAgB,CACrB,GAAIsB,GAAOjQ,EAAEgQ,UAAUpP,EAAKqP,KAC5BjQ,GAAEyG,KAAKwJ,EAAM,SAAUrG,EAAOkQ,GAC1B9Z,EAAE,kCAAoC8Z,EAAMpC,GAAK,MAAMjR,KAAK,WACxDzG,EAAEmD,MAAMyK,KAAK,KACRX,KAAK6M,EAAMgD,MACXnZ,KAAK,iBAAkBmW,EAAMgD,cAQtD9c,EAAE+C,GAAGrB,QAAU,SAAUwB,GACrB,MAAOC,MAAKsD,KAAK,WACb,GAAI6I,GAAQtP,EAAEmD,KACdmM,GAAMwM,OAAO,SACbxM,EAAMyN,MAAM,SAAU5T,GAClBA,EAAMC,iBACNpJ,EAAEmD,MAAMsL,WAAW,SAAUC,GACzB,GAAuB,MAAnBA,EAASC,QAA8B,QAAZ1O,EAAmB,CAC9C,GAAIyX,GAAKpI,EAAM3L,KAAK,sBAChB5B,GACAuO,cAAeoH,EACfsF,WAAY,GAEZH,GAAa9a,SAAUF,KAAKgO,UAAU9N,GAC1C7B,GAASwB,QAAQmb,EAAU,SAAUZ,GACjC,GAA2B,OAAvBA,EAAatN,OACbyM,MAAMa,EAAahM,UAElB,CACD,GAAIgN,GAAIxU,SAAS6G,EAAM1B,KAAK,KAAKX,QAAU,CAC3CqC,GAAM1B,KAAK,KAAKX,KAAKgQ,cAQjDjd,EAAE+C,GAAGqK,aAAe,WAEhB,QAAS8P,KACL,GAAIN,GAAU,EACd5c,GAAEqR,GAAM5K,KAAK,WACM,IAAXmW,IACAA,GAAoB,KAExBA,GAAoB5c,EAAEmD,MAAMQ,KAAK,uBAErC,IAAI5B,IACAuO,cAAesM,GAEfO,GAAuBpb,SAAUF,KAAKgO,UAAU9N,GACpD7B,GAASoB,gBAAgB6b,EAAoB,SAAUvc,GACnD,GAAmB,MAAfA,EAAK+N,OAAgB,CACrB,GAAIsB,GAAOjQ,EAAEgQ,UAAUpP,EAAKqP,KAC5BjQ,GAAEyG,KAAKwJ,EAAM,SAAUrG,EAAOkQ,GAC1B9Z,EAAE,qCAAuC8Z,EAAMpC,GAAK,MAAMjR,KAAK,WAC3D,GAAI2W,GAAMpd,EAAEmD,KACRnD,GAAEqR,GAAM0K,QAAQ,gBAAgBvV,OAAS,IAG7C4W,EAAInQ,KAAK6M,EAAM1M,cACfgQ,EAAIzZ,KAAK,iBAAkBmW,EAAM1M,cAC9BpN,EAAE,eAAewG,OAAO,GAAGsT,EAAM1M,aAAa,GAC7CgQ,EAAIC,4BAzB5B,GAAIhM,GAAOlO,IAgCX+Z,MAIJld,EAAE+C,GAAGsa,kBAAoB,WAErB,QAASC,KACL,GAAIC,GAAQjO,EAAMvG,QAAQ,WAAWuM,EAAU,GAC3CrT,EAAY,EACZqO,EAAgBhB,EAAM1O,KAAK,iBAC3BmB,GACIuO,cAAeA,EACfrO,UAAWA,EACXsP,SAAU,IAEdsL,GAAc9a,SAAUF,KAAKgO,UAAU9N,GAC3C7B,GAASqB,kBAAkBsb,EAAU,SAAU/M,GAC3C,GAAIC,GAAS/P,EAAEgQ,UAAUF,EAAeG,KAEhB,QAApBF,EAAOrP,UAAoD,MAA/B4O,EAAM3L,KAAK,mBACvC2L,EAAM3L,KAAK,gBAAgB,MAE3B2R,GAAW,sCACXtV,EAAEyG,KAAKsJ,EAAO6B,SAAS,SAAUlL,EAAEC,GAC5BD,EAAE,IACD4O,GAAWzQ,EAAOuR,sBAAsBzP,MAGhD2O,GAAW,cACXtV,EAAEsV,GAASkI,aAAaD,EAAM3P,KAAK,cAxB/C,GAAI0B,GAAQtP,EAAEmD,KA4BsB,UAAjCb,EAAWK,mBACV2a,KAIRtd,EAAE+C,GAAGmW,UAAY,WACb,GAAI/K,GAAQ,EACZnO,GAAEmD,MAAMsD,KAAK,WACI,IAAT0H,IACAA,GAAgB,KAEpBA,GAAgBnO,EAAEmD,MAAMQ,KAAK,eAEjC,IAAI5B,IACAoM,MAAOA,EAEXnO,GAAEQ,MACEC,KAAM,MAAOC,SAAU,QAASC,IAAK,4DACrCC,MAAQmB,SAAUF,KAAKgO,UAAU9N,IACjCjB,QAAS,SAAUF,GACI,MAAfA,EAAK+N,QACL3O,EAAEyG,KAAK7F,EAAKmP,OAAQ,SAAUnG,EAAOkQ,GACjC9Z,EAAE,yBAA2B8Z,EAAM3L,MAAQ,MAAM1H,KAAK,WAClDzG,EAAEmD,MAAMyK,KAAK,SAASX,KAAK6M,EAAM2D,KAAO,KACxCzd,EAAEmD,MAAMyK,KAAK,UAAUX,KAAK6M,EAAM4D,aAClC1d,EAAEmD,MAAMyK,KAAK,UAAUX,KAAK6M,EAAM4D,qBAO1D1d,EAAE+C,GAAGiV,kBAAoB,WACrB,GAAI7J,GAAQ,EACZnO,GAAEmD,MAAMsD,KAAK,WACI,IAAT0H,IACAA,GAAgB,KAEpBA,GAAgBnO,EAAEmD,MAAMQ,KAAK,eAEjC,IAAI5B,IACAoM,MAAOA,EAEXnO,GAAEQ,MACEC,KAAM,MAAOC,SAAU,QAASC,IAAK,4DACrCC,MAAQmB,SAAUF,KAAKgO,UAAU9N,IACjCjB,QAAS,SAAUF,GACI,MAAfA,EAAK+N,QACL3O,EAAEyG,KAAK7F,EAAKmP,OAAQ,SAAUnG,EAAOkQ,GACjC9Z,EAAE,kCAAoC8Z,EAAM3L,MAAQ,MAAM1H,KAAK,WAC3DzG,EAAEmD,MAAMyK,KAAK,WAAWX,KAAK6M,EAAM2D,MACnCzd,EAAEmD,MAAMyK,KAAK,aAAaX,KAAK6M,EAAM4D,qBAQ7D1d,EAAE+C,GAAG8L,WAAa,SAAUsK,GACxB,GAAI7J,GAAQtP,EAAEmD,KACd,IAAkC,QAA9BmM,EAAM3L,KAAK,gBAAf,CAGA2L,EAAM3L,KAAK,gBAAgB,EAC3B,IAAIwC,GAAOnG,EAAE2d,KAAKrO,EAAMsK,SAASgE,SAAS,YAAYhQ,KAAK,YAAYE,OACnEoB,EAASI,EAAM1O,KAAK,UACpB0P,EAAgBhB,EAAM1O,KAAK,iBAC3Bid,EAAiBvO,EAAM1O,KAAK,YAChC,IAAY,IAARuF,EAEA,WADAiV,OAAM,UAGL,IAAIjV,EAAKK,QAAU,IAEpB,WADA4U,OAAM,iBAIN,IAAIrZ,IACAmN,OAAQA,EACRoB,cAAeA,EACf6J,QAAShU,EACT2X,QAASD,EACTb,WAAY,EAEhBhd,GAAEQ,MACEC,KAAM,OACNC,SAAU,OACVC,IAAK,qDACLC,MAAQmB,SAAYF,KAAKgO,UAAU9N,IACnCjB,QAAS,SAAUiP,GACf,GAAuB,MAAnBA,EAAOrP,SAAkB,CACzB4O,EAAM3L,KAAK,gBAAgB,EAC3B,IAAIoa,GAAe/d,EAAE,eACrB,IAAI+d,EAAavX,OAAS,EAAG,CACzB,GAAIyG,GAAOpI,EAAOuQ,kBAAkBrF,EAAO6B,SACT,IAAlCmM,EAAanQ,KAAK,MAAMpH,OAAcuX,EAAa9Q,KAAKA,GAAQ8Q,EAAazC,QAAQrO,EACrF,IAAIgQ,GAAIxU,SAASzI,EAAE,+BAA+BiN,QAAU,CAC5DjN,GAAE,6CAA6CiN,KAAKgQ,OAGpDjd,GAAE,oCAAsCsQ,EAAgB,KAAKrD,KAAK,KAAKtJ,KAAK,iBAAkB,EAElG3D,GAAE,UAAUuF,YAAY,OACxBvF,EAAE,aAAauF,YAAY,cAAc+G,SAAUhI,UAAW6U,GAAgB,GAE9ElL,WAAW,WACPjO,EAAE,UAAUkO,UACb,SAGHkN,OAAMrL,EAAOE,WAMjCjQ,EAAE+C,GAAG0L,WAAa,SAAUuP,GACxBhe,EAAEQ,MACEC,KAAM,MAAOC,SAAU,QAASC,IAAK,gDACrCG,QAAS,SAAUmb,GACA,QAAZhc,EACC+d,EAAI/B,GAEwB,OAAxBA,EAAatN,QACb3O,EAAE,sBAAsBie,oBACxBje,EAAE,sBAAsBke,eAGxBF,EAAI/B,OAMxBjc,EAAE+C,GAAGmb,YAAc,WACf,GAAI5O,GAAQtP,EAAEmD,KACdmM,GAAMzB,GAAG,QAAS,WAAY,SAAU1E,GACpCA,EAAMC,gBACN,IAAI+U,GAAYnZ,OAAOoZ,SAASC,IAChCrZ,QAAOoZ,SAASC,KAAO,kFAAoFC,UAAUH,KACtHtQ,GAAG,QAAS,aAAc,SAAU1E,GACnCA,EAAMC,gBACN,IAAI+U,GAAYnZ,OAAOoZ,SAASC,IAChCrZ,QAAOoZ,SAASC,KAAO,oFAAsFC,UAAUH,MAG/Hne,EAAE+C,GAAGkb,kBAAoB,WACrBje,EAAE,sBAAsBue,OACxBve,EAAE,oBAAoBue,OACtBve,EAAE,sBAAsB6N,GAAG,QAAS,WAChC7N,EAAE,oBAAoBwe,OACtBxe,EAAE,sBAAsBwe,UAGhCxe,EAAE+C,GAAGoK,aAAe,WAChB,MAAOhK,MAAKsD,KAAK,WACbzG,EAAEmD,MAAMyK,KAAK,KAAKjK,KAAK,SAAU,aAG1C8a","file":"qz.wap.min.js","sourcesContent":["(function ($) {\r\n    var jsmodel = 'dev';\r\n    //todo:2018.03.06 更新 分离Api处理\r\n    var clubApis = {\r\n        //获取单页评论接口\r\n        getWapCardComment:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"./data/fake.comment.page1.json\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取单页内容接口\r\n        getWapCardContext:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapcardcontext\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取圈子列表数据接口\r\n        getWapClubContext:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubcontent\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取圈子评论数接口\r\n        getCommentCount:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getcommentcount\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取圈子评论接口\r\n        getWapClubComment:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubcomment\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取点赞带头像数据接口\r\n        getwapclubuserlike:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getwapclubuserlike\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取点赞数据接口\r\n        getLike:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/getlike\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //提交点赞接口\r\n        addLike:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"http://192.168.0.100:9014/apis/club/api/addlike\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //静态页演示用接口，线上不需要保留\r\n        //获取单页评论第一页接口（接口做静态页演示专用）\r\n        getWapCardCommentPage1:function (paramsData,callback,beforeSendFnc) {\r\n            var paramsFmt = JSON.parse(paramsData.jsondata);\r\n            var pages = paramsFmt.pageIndex,sort = paramsFmt.sort;\r\n            //模拟传参返回数据\r\n            var apiUrl = \"./data/fake.comment.page1.json\";\r\n            if(sort === 0 && pages === 1){\r\n                apiUrl = \"./data/fake.comment.page1.oldest.json\";\r\n            }else if(sort === 0 && pages === 2){\r\n                apiUrl = \"./data/fake.comment.page2.oldest.json\";\r\n            }else if(sort === 1 && pages === 2){\r\n                apiUrl = \"./data/fake.comment.page2.json\";\r\n            }\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取单页热门评论（接口做静态页演示专用）\r\n        getWapCardCommentPageHot:function (paramsData,callback,beforeSendFnc) {\r\n            var apiUrl = \"./data/fake.comment.hot.json\";\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        },\r\n        //获取单页评论回复（接口做静态页演示专用）\r\n        getWapCardCommentReply:function (paramsData,callback,beforeSendFnc) {\r\n            var paramsFmt = JSON.parse(paramsData.jsondata);\r\n            var pages = paramsFmt.replyPageIndex;\r\n            //模拟传参返回数据\r\n            var apiUrl = \"./data/fake.comment.reply.page1.json\";\r\n            if(pages === 3){\r\n                apiUrl = \"./data/fake.comment.reply.page2.json\";\r\n            }\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n                url: apiUrl,\r\n                data: paramsData,\r\n                beforeSend: function () {\r\n                    if(typeof beforeSendFnc === 'function'){\r\n                        beforeSendFnc();\r\n                    }\r\n                },\r\n                success: function (backData) {\r\n                    if(typeof callback === 'function'){\r\n                        callback(backData);\r\n                    }\r\n                },\r\n                error:function (err) {\r\n                    console.log(err)\r\n                }\r\n            });\r\n        }\r\n    };\r\n    var clubConfig = {\r\n        //卡片列表排序方式\r\n        listNavSetter:{\r\n            //最新\r\n            new:{\r\n                sort:1,\r\n                type:0\r\n            },\r\n            //最热\r\n            hot:{\r\n                sort:2,\r\n                type:0\r\n            },\r\n            //精品\r\n            best:{\r\n                sort:1,\r\n                type:1\r\n            }\r\n        },\r\n        // 是否开启开篇列表内回复 val: open | close\r\n        innerCommentState:'close'\r\n    };\r\n    //模拟加载更多用测试数据begin\r\n    var isTrim = function (s) {\r\n        if (typeof (s) == 'undefined') {\r\n            return false;\r\n        }\r\n        return s.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n    };  //清除空格\r\n    $.fn.extend({\r\n        //文本框自适应高度\r\n        textareaAutoHeight: function (options) {\r\n            this._options = { minHeight: 0, maxHeight: 1000 }\r\n            this.init = function () {\r\n                for (var p in options) {\r\n                    this._options[p] = options[p];\r\n                }\r\n                if (this._options.minHeight == 0) {\r\n                    this._options.minHeight = parseFloat($(this).height());\r\n                }\r\n                for (var p in this._options) {\r\n                    if ($(this).attr(p) == null) {\r\n                        $(this).attr(p, this._options[p]);\r\n                    }\r\n                }\r\n                $(this).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight);\r\n            }\r\n            this.resetHeight = function () {\r\n                var _minHeight = parseFloat($(this).attr(\"minHeight\"));\r\n                var _maxHeight = parseFloat($(this).attr(\"maxHeight\"));\r\n\r\n                if (!$.browser.msie) { $(this).height(0); }\r\n                var h = parseFloat(this.scrollHeight);\r\n                h = h < _minHeight ? _minHeight : h > _maxHeight ? _maxHeight : h;\r\n                $(this).height(h).scrollTop(h);\r\n                $(this).css(\"overflow-y\", h >= _maxHeight ? \"scroll\" : \"hidden\");\r\n            }\r\n            this.init();\r\n        }\r\n    });\r\n    var qzConfig = {\r\n        // 判断是否开始无限加载\r\n        isCanLoading: true,\r\n        //加载中 结构\r\n        loadingDom: '<div class=\"qz-loading\">正在加载</div>',\r\n        //全部加载完成 结构\r\n        loadedDom: '<div class=\"qz-loaded\">全部加载完成</div>',\r\n        //内容为空 结构\r\n        loadnullDom: '<div class=\"qz-loadnull\">还没有内容</div>'\r\n    };\r\n    var qzFunc = {\r\n        //设置屏幕缩放\r\n        setRem: function () {\r\n            var pw = $(window).width();\r\n            if (pw >= 640) {\r\n                pw = 640;\r\n            }\r\n            $('html').css({ 'font-size': pw / 6.4 + 'px' });\r\n        },\r\n        //弹窗公用方法\r\n        popCommon:{\r\n            open:function () {\r\n                $('html').addClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','none');\r\n            },\r\n            close:function () {\r\n                $('html').removeClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','block');\r\n            }\r\n        },\r\n        //构建卡片\r\n        createCard: function (cdp) {\r\n            var cardDom = '';\r\n            //插入卡片ID cdp.cardid\r\n            cardDom += '<div class=\"qz-card qzCard\" data-cid=\"' + cdp.cardid + '\">';\r\n            //头部 begin\r\n            //插入用户头像 cdp.head\r\n            cardDom += '<header><a class=\"head\"><img src=\"' + cdp.head + '\" alt=\"head\"></a>';\r\n            cardDom += '<div class=\"info\"><h5>';\r\n            //插入用户名 cdp.user\r\n            cardDom += '<a>' + cdp.user + '</a>';\r\n            //是否加V图标\r\n            if (isTrim(cdp.vauth)) {\r\n                cardDom += '<img src=\"' + cdp.vauth + '\">';\r\n            }\r\n            //是否加编辑V图标\r\n            //if (isTrim(cdp.editauth)) {\r\n            //  cardDom += '<i class=\"member member-v2\"></i>';\r\n            // }\r\n            cardDom += '</h5><p>';\r\n            //插入创建时间 cdp.createtime\r\n            cardDom += '<span class=\"time\">' + cdp.createtime + '</span>';\r\n            cardDom += '</p>';\r\n            cardDom += '</div>';\r\n            //是否加置顶 cdp.spectop 和 精 cdp.specvalue 图标\r\n            if (cdp.spectop === true || cdp.specvalue === true) {\r\n                cardDom += '<div class=\"spec-icons\">';\r\n                if (cdp.spectop === true) {\r\n                    cardDom += '<a class=\"spec-top\">置顶</a>';\r\n                }\r\n                if (cdp.specvalue === true) {\r\n                    cardDom += '<a class=\"spec-value\">精</a>';\r\n                }\r\n                cardDom += '</div>';\r\n            }\r\n            cardDom += '</header>';\r\n            //头部 end\r\n            //主体 begin\r\n            //插入卡片跳转地址 cdp.url\r\n            cardDom += '<section class=\"detail qzZoneHref\" data-href=\"' + cdp.url + '\">';\r\n            //插入卡片内容 cdp.text\r\n            cardDom += '<div class=\"content\">';\r\n            if (cdp.isVideo) {\r\n                cardDom += cdp.text;\r\n                cardDom += '<a href=' + cdp.video.src + ' class=\"link-video\">' + cdp.video.videoTitle + '</a>';\r\n            }\r\n            else {\r\n                cardDom += cdp.text;\r\n            }\r\n            cardDom += '</div>';\r\n            //判断 插入 图片列表 cdp.piclist\r\n            if (cdp.piclist.length > 0) {\r\n                cardDom += '<div class=\"media-pic-list\"><div class=\"clearfix qz-figs qzPicPswp\">';\r\n                $.each(cdp.piclist, function (i, item) {\r\n                    cardDom += '<figure class=\"qzPicPswpBtn';\r\n                    //输出数据文件中的图片样式item.ext\r\n                    if (item.ext === 'gif') {\r\n                        cardDom += ' gif\"';\r\n                        item.large = item.origin;\r\n                    } else if (item.ext === 'long') {\r\n                        cardDom += ' long\"';\r\n                    }\r\n                    //大图地址item.large,尺寸item.size,缩略图地址item.url\r\n                    cardDom += '\"><a data-picType=\"' + item.ext + '\" data-origin=\"' + item.origin + '\"  data-large=\"' + item.large + '\" data-size=\"' + item.size + '\"><img src=\"' + item.url + '\"></a></figure>';\r\n                });\r\n                cardDom += '</div></div>';\r\n            }\r\n            //判断是否插入大图\r\n            if (cdp.picbig.large != undefined) {\r\n                cdp.picbig.large = cdp.picbig.url;\r\n                var picType = \"\";\r\n                cardDom += '<div class=\"qzPicPswp media-pic';\r\n                //输出数据文件中的图片样式 item.ext\r\n                if (cdp.picbig.ext === 'gif') {\r\n                    picType = ' gif';\r\n                    cdp.picbig.large = cdp.picbig.origin;\r\n                } else if (cdp.picbig.ext === 'long') {\r\n                    picType = ' long';\r\n                }\r\n                //大图地址cdp.picbig.large,尺寸cdp.picbig.size,缩略图地址cdp.picbig.url\r\n                cardDom += '\"><figure class=\"' + picType + '\"><a  data-picType=\"' + cdp.picbig.ext + '\" data-origin=\"' + cdp.picbig.origin + '\" data-large=\"' + cdp.picbig.large + '\" data-size=\"' + cdp.picbig.size + '\"><img src=\"' + cdp.picbig.url + '\" class=\"qzPicPswpBtn\"></a></figure></div>';\r\n            }\r\n            //判断是否插入视频\r\n            if (cdp.isVideo) {\r\n                cardDom += '<div class=\"media-video\">';\r\n                //视频跳转地址 cdp.video.src,视频缩略图 cdp.video.pic\r\n                cardDom += '<a class=\"qzVideoPopBtn\" data-href=\"' + cdp.video.src + '\"><img src=\"' + cdp.video.pic + '\" alt=\"\"></a></div>'\r\n            }\r\n\r\n            cardDom += '</section>';\r\n            //判断是否输出来源\r\n            if (cdp.fromUrl) {\r\n                //来源地址cdp.fromUrl,来源名称cdp.from\r\n                cardDom += '<div class=\"from\">来自：<a href=\"' + cdp.fromUrl + '\" >' + cdp.from + '</a></div>';\r\n            }\r\n            //主体 end\r\n            //底部 begin\r\n            //todo:2018-03-13 更新：添加分享按钮，修改排列\r\n            cardDom += '<footer>';\r\n            cardDom += '<a class=\"btn-share qzBtnShare\" data-shareid=\"' + cdp.cardid + '\">分享</a>';\r\n            cardDom += '<span></span><a class=\"btn-comment qzBtnComment\" data-commcount=\"\"  data-clubcontentid=\"' + cdp.cardid + '\"   data-href=\"' + cdp.url + '\">0</a>';\r\n            cardDom += '<span></span><a class=\"btn-like qzBtnLike\" data-likecount=\"\" data-clubcontentid=\"' + cdp.cardid + '\" ><i></i><b>0</b></a>';\r\n            cardDom += '</footer>';\r\n            //底部 end\r\n            cardDom += '</div>';\r\n            cardDom += '';\r\n            cardDom += '';\r\n\r\n            return cardDom;\r\n        },\r\n        //图片弹出层 默认执行,一般情况不需要修改\r\n        addSwpOnce: function () {\r\n            var swp = '<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button><a target=\"_blank\" class=\"pswp__button pswpBtnOrigin pswp__single-tap\" title=\"查看原图\"></a> <button class=\"pswp__button pswp__button--share\" title=\"Share\"></button> <button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button> <button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"><div class=\"pswp__share-tooltip\"></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\"></button> <button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\"></button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div>';\r\n            $('body').append(swp);\r\n        },\r\n        //图片弹出层方法 默认执行,一般情况不需要修改\r\n        photoSwp: function () {\r\n            var initPhotoSwipeFromDOM = function (gallerySelector) {\r\n                var parseThumbnailElements = function (el) {\r\n                    var thumbElements = el.childNodes,\r\n                        numNodes = thumbElements.length,\r\n                        items = [],\r\n                        figureEl,\r\n                        linkEl,\r\n                        size,\r\n                        item;\r\n                    for (var i = 0; i < numNodes; i++) {\r\n                        figureEl = thumbElements[i];\r\n                        if (figureEl.nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        linkEl = figureEl.children[0];\r\n                        size = linkEl.getAttribute('data-size').split('x');\r\n                        item = {\r\n                            src: linkEl.getAttribute('data-large'),\r\n                            w: parseInt(size[0], 10),\r\n                            h: parseInt(size[1], 10),\r\n                            ori: linkEl.getAttribute('data-origin'),\r\n                            picType: linkEl.getAttribute('data-picType')\r\n                        };\r\n                        if (figureEl.children.length > 1) {\r\n                            item.title = figureEl.children[1].innerHTML;\r\n                        }\r\n                        if (linkEl.children.length > 0) {\r\n                            item.msrc = linkEl.children[0].getAttribute('src');\r\n                        }\r\n                        item.el = figureEl;\r\n                        items.push(item);\r\n                    }\r\n                    return items;\r\n                };\r\n                var closest = function closest(el, fn) {\r\n                    return el && (fn(el) ? el : closest(el.parentNode, fn));\r\n                };\r\n                var onThumbnailsClick = function (e) {\r\n                    e = e || window.event;\r\n                    e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n                    var eTarget = e.target || e.srcElement;\r\n                    var clickedListItem = closest(eTarget, function (el) {\r\n                        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');\r\n                    });\r\n                    if (!clickedListItem) {\r\n                        return;\r\n                    }\r\n                    var clickedGallery = clickedListItem.parentNode,\r\n                        childNodes = clickedListItem.parentNode.childNodes,\r\n                        numChildNodes = childNodes.length,\r\n                        nodeIndex = 0,\r\n                        index;\r\n                    for (var i = 0; i < numChildNodes; i++) {\r\n                        if (childNodes[i].nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        if (childNodes[i] === clickedListItem) {\r\n                            index = nodeIndex;\r\n                            break;\r\n                        }\r\n                        nodeIndex++;\r\n                    }\r\n                    if (index >= 0) {\r\n                        openPhotoSwipe(index, clickedGallery);\r\n                    }\r\n                    return false;\r\n                };\r\n\r\n                var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {\r\n                    var pswpElement = $('.pswp')[0],\r\n                        gallery,\r\n                        options,\r\n                        items;\r\n                    items = parseThumbnailElements(galleryElement);\r\n                    options = {\r\n                        shareEl: false,\r\n                        fullscreenEl: false,\r\n                        zoomEl: false,\r\n                        bgOpacity: 1,\r\n                        showHideOpacity: 0,\r\n                        galleryUID: galleryElement.getAttribute('data-pswp-uid'),\r\n                        history: false,\r\n                        tapToClose:true,\r\n                        getThumbBoundsFn: function (index) {\r\n                            var thumbnail = items[index].el.getElementsByTagName('img')[0],\r\n                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\r\n                                rect = thumbnail.getBoundingClientRect();\r\n                            return { x: rect.left, y: rect.top + pageYScroll, w: rect.width };\r\n                        }\r\n                    };\r\n                    if (fromURL) {\r\n                        if (options.galleryPIDs) {\r\n                            for (var j = 0; j < items.length; j++) {\r\n                                if (items[j].pid == index) {\r\n                                    options.index = j;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            options.index = parseInt(index, 10) - 1;\r\n                        }\r\n                    } else {\r\n                        options.index = parseInt(index, 10);\r\n                    }\r\n                    if (isNaN(options.index)) {\r\n                        return;\r\n                    }\r\n                    if (disableAnimation) {\r\n                        options.showAnimationDuration = 0;\r\n                    }\r\n                    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\r\n                    gallery.init();\r\n                    function setOrigin(num) {\r\n                        $('.pswpBtnOrigin').attr('href', items[num].ori)\r\n                    }\r\n                    gallery.listen('initialZoomIn', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                        $('.pswp').animate({ 'opacity': 1 }, 333);\r\n                    });\r\n                    gallery.listen('initialZoomOut', function () {\r\n                        $('.pswp').animate({ 'opacity': 0 }, 200);\r\n                    });\r\n                    gallery.listen('afterChange', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                    });\r\n                };\r\n                var galleryElements = document.querySelectorAll(gallerySelector);\r\n                for (var i = 0, l = galleryElements.length; i < l; i++) {\r\n                    galleryElements[i].setAttribute('data-pswp-uid', i + 1);\r\n                    galleryElements[i].onclick = onThumbnailsClick;\r\n                }\r\n            };\r\n            initPhotoSwipeFromDOM('.qzPicPswp');\r\n        },\r\n        //插入卡片\r\n        insertCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).html(insDom);\r\n            //点赞\r\n            $(\".qzBtnLike\").like();\r\n            $(\".qzBtnLike\").addLike();\r\n            $(\".qzCard .content\").removeTarget();\r\n            $(\".qzBtnComment\").commentCount();\r\n            //构建完成后调用图片弹出层\r\n            qzFunc.photoSwp();\r\n            //开启视频弹窗\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //加载更多卡片\r\n        appendCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).append(insDom);\r\n            //点赞\r\n            $(\".qzBtnLike\").like();\r\n            $(\".qzBtnLike\").addLike();\r\n            $(\".qzCard .content\").removeTarget();\r\n            $(\".qzBtnComment\").commentCount();\r\n            //构建完成后调用图片弹出层\r\n            qzFunc.photoSwp();\r\n            //开启视频弹窗\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //发布/参与\r\n        addContext: function () {\r\n            function insertContext(scrolltopval) {\r\n                var topic = $(\".topic\").attr(\"data-topic\");\r\n                if (topic == '') {\r\n                    topic = $(\".topic\").attr(\"data-selecttopic\");\r\n                }\r\n                var comDom = '';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>发布内容<a class=\"qz-pop-close qzPopClose\"></a><a class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\">';\r\n                comDom += '<div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"分享你的游戏心得...\">';\r\n                if (isTrim(topic)) {\r\n                    comDom += topic;\r\n                }\r\n                comDom += '</textarea > <textarea class=\"mathIpt\" rows=\"3\"></textarea></div > ';\r\n                //上传图片后显示，不传图片不显示 begin\r\n                comDom += '<div class=\"clearfix qz-pic-list\">';\r\n                comDom += '<div class=\"qz-pic-list-li\"><label for=\"qzSelectPhoto\" class=\"qz-pic-list-add\"></label></div>';\r\n                comDom += '</div>';\r\n                comDom += '<input id=\"fileupload\" data-imagesize=\"5120\"  type=\"file\" style=\"display:none\" name=\"files\" method=\"POST\" multiple=\"\">';\r\n                //上传图片后显示，不传图片不显示 end\r\n                comDom += '</div>';\r\n                comDom += '<footer><label for=\"qzSelectPhoto\" class=\"qz-upload-pic qzUploadPic\">图片</label><select class=\"qz-pop-sel\">';\r\n                //右下角选项\r\n                comDom += '</select>';\r\n                //隐藏的上传input\r\n                //comDom += '<input id=\"qzSelectPhoto\" class=\"qz-select-photo\" type=\"file\" accept=\"image/gif,image/jpeg,image/jpg,image/png,image/bmp\">';\r\n                comDom += '</footer></div>';\r\n                //输出弹层\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                var clubHtml = $(\".clubList\").html();\r\n                $(\".qz-pop-sel\").html(clubHtml);\r\n                //选择图片\r\n                $(\".qz-pic-list-add,.qzUploadPic\").selectPhoto();\r\n                //选择圈子\r\n                $(\".qz-pop-sel\").change(function (event) {\r\n                    event.preventDefault();\r\n                    var sid = $(this).find('option:selected').val();\r\n                    $(\".clubId\").attr(\"data-selectclubid\", sid);\r\n                });\r\n                //添加弹层动画\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                //设置textarea尺寸\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n                //关闭弹层\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    //等待弹层动画执行完后移除弹层\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                //关闭按钮\r\n                $('.qzPopClose').on('click', closePop);\r\n                //发布按钮\r\n                $qzPop.fabuSubmit(scrolltopval);\r\n\r\n            }\r\n            //绑定发布按钮事件\r\n            $('#qzMain').on('click', '.qzBtnContext', function () {\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var st = $('html').scrollTop();\r\n                        if (st === 0) {\r\n                            st = $('body').scrollTop();\r\n                        }\r\n                        setTimeout(function () {\r\n                            $('html,body').addClass('hideScroll');\r\n                        }, 300);\r\n                        //打开弹层\r\n                        insertContext(st);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        //评论\r\n        addComment: function () {\r\n            function insertComment(scrolltopval, cid, commentId, rename, userId) {\r\n                var comDom = '', placeholder = rename ? '回复 ' + rename + '：' : '我来说两句...';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>评论<a class=\"qz-pop-close qzPopClose\"></a><a data-userId=\"' + userId + '\" data-clubContentId=\"' + cid + '\"  data-commentId=\"' + commentId + '\" class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\"><div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"' + placeholder + '\"></textarea><textarea class=\"mathIpt\" rows=\"3\"></textarea></div></div>';\r\n                comDom += '</div>';\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                //设置textarea尺寸\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                //关闭按钮\r\n                $('.qzPopClose').on('click', closePop);\r\n                //发布按钮\r\n                $('.qzPopSmt').on('click', function () {\r\n                    var context = $qzPop.find('.realIpt').val();\r\n                    //数据提交后执行下面函数\r\n                    $(this).addComment(scrolltopval);\r\n                });\r\n            }\r\n\r\n            $('#qzMain').on('click', '.qzBtnComment', function () {\r\n                var $this = $(this),commNum = $this.data('commcount'),url = $this.data('href');\r\n                if(commNum>0 && $('#qzCardContext').length < 1){\r\n                    window.open(url, '_blank');\r\n                    return false;\r\n                }\r\n                $this.UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var st = $('html').scrollTop(),\r\n                            cid = $this.data('clubcontentid'),\r\n                            //评论数量\r\n                            count = $this.data('commcount'),\r\n                            //回复的用户名\r\n                            uerId = $this.data('userid'),\r\n                            commentId = $this.data('commid'),\r\n                            rename = $this.attr('data-name');\r\n\r\n                        //判断是否单页 单页直接打开弹层，不判断评论数\r\n                        if ($('#qzCardContext').length > 0) {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            //打开弹层\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                            return false;\r\n                        }\r\n                        if (count === 0 || count == \"\") {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            //打开弹层\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n            //todo:2018.03.06 更新 绑定弹出回复\r\n            function commentInner(tar) {\r\n                tar.UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var st = $('html').scrollTop(),\r\n                            cid = tar.data('clubcontentid'),\r\n                            count = tar.data('commcount'),\r\n                            url = tar.data('href'),\r\n                            uerId = tar.data('userid'),\r\n                            commentId = tar.data('commid'),\r\n                            rename = tar.attr('data-name');\r\n\r\n                        if (st === 0) {\r\n                            st = $('body').scrollTop();\r\n                        }\r\n                        setTimeout(function () {\r\n                            $('html,body').addClass('hideScroll');\r\n                        }, 300);\r\n                        insertComment(st, cid, commentId, rename, uerId);\r\n                    }\r\n                });\r\n            }\r\n            $('#qzMain').on('click', '.qzBtnCommentInner', function () {\r\n                var $this = $(this);\r\n                commentInner($this);\r\n            });\r\n        },\r\n        //初始化内容 话题上部\r\n        initPageTopic: function () {\r\n            var tar = '#qzCardListTopic', tarInsert = $(tar);\r\n            if (tarInsert.length > 0) {\r\n                //获取数据，具体参数和方式后端自定义\r\n                var dt = \"http://192.168.0.100:9014/apis/club/api/GetWapClubContentByTopic\";\r\n                var clubId = $(\".clubId\").attr(\"data-selectClubId\");\r\n                var topicTitle = $(\".topic\").attr(\"data-topic\");\r\n                var jsondata = {\r\n                    clubId: clubId,\r\n                    topicTitle: topicTitle,\r\n                    pageIndex: 0\r\n                };\r\n                $.ajax({\r\n                    type: \"post\",\r\n                    dataType: \"json\",\r\n                    url: dt,\r\n                    data: { jsondata: JSON.stringify(jsondata) },\r\n                    beforeSend: function () {\r\n                        //插入加载动画\r\n                        tarInsert.append(qzConfig.loadingDom);\r\n                    },\r\n                    success: function (responseObject) {\r\n                        var result = $.parseJSON(responseObject.body);\r\n                        //判断数据状态\r\n                        if (result.dataType === 'ok' && result.cardgroup.length > 0) {\r\n\r\n                            $(\".comeFrom\").html(result.cardgroup[0].from);\r\n                            //处理获取的数据\r\n                            tarInsert.attr('data-page', result.page);\r\n                            //允许无限加载\r\n                            tarInsert.attr('data-moreload', 'open');\r\n                            qzFunc.insertCard(tar, result.cardgroup);\r\n                            if (result.count <= 1) {\r\n                                $(\".qzCardMoreBtn\").remove();\r\n                            }\r\n                            $(\".qz-rem\").css(\"display\", \"block\");\r\n                        } else {\r\n                            //数据为空是插入提示\r\n                            tarInsert.html(qzConfig.loadnullDom);\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        //初始化内容 内容单页\r\n        initPageContext: function () {\r\n            var tar = '#qzCardContext', tarInsert = $(tar);\r\n            if (tarInsert.length > 0) {\r\n                //todo:2018.03.06 更新 生成内容单页\r\n                var gcContextJsondata = {\r\n                    clubContentId: tarInsert.attr(\"data-cid\")\r\n                };\r\n                var gcContextParamsData = {jsondata: JSON.stringify(gcContextJsondata)}\r\n                clubApis.getWapCardContext(gcContextParamsData,function (responseObject) {\r\n                    var result = $.parseJSON(responseObject.body);\r\n                    if (result.dataType === 'ok') {\r\n                        tarInsert.attr('data-page', result.page);\r\n                        qzFunc.insertCard(tar, result.cardgroup);\r\n                    } else {\r\n                        tarInsert.html(qzConfig.loadnullDom);\r\n                    }\r\n                },function () {\r\n                    tarInsert.append(qzConfig.loadingDom);\r\n                });\r\n                //todo:2018.03.15 更新 生成内容单页评论 vue重构\r\n                var vCardPage = {\r\n                    vmBuild:function () {\r\n                        var cid = $('#clubCardComment').data('cid');\r\n                        //评论内回复组件\r\n                        var CommLine = {\r\n                            template:'\\\r\n                                <div class=\"info-comment\">\\\r\n                                    <div v-for=\"item in rld\" class=\"ic-item qzBtnCommentInner\" :data-clubcontentid=\"cid\" :data-commid=\"item.commid\" :data-name=\"item.name\" :data-userid=\"item.useId\">\\\r\n                                        <a class=\"ici-name\">{{item.name}}</a>\\\r\n                                        <i v-if=\"item.reply\" class=\"ici-rpy\">回复</i>\\\r\n                                        <a v-if=\"item.reply\" class=\"ici-name\">{{item.reply}}</a>\\\r\n                                        <a class=\"ici-name\">：&nbsp;</a><span class=\"ici-context\">{{item.context}}</span>\\\r\n                                    </div>\\\r\n                                    <a class=\"info-comment-more\" v-if=\"more\" :class=\"moregray?\\'disable\\':\\'\\'\" @click=\"moreBtn\">{{moretxt}}</a>\\\r\n                                </div>\\\r\n                            ',\r\n                            data:function () {\r\n                                return {\r\n                                    more:false,\r\n                                    moretxt:'查看全部'+(this.count-2)+'条回复',\r\n                                    moregray:false,\r\n                                    page:2,\r\n                                    pagesize:10\r\n                                }\r\n                            },\r\n                            props:['rld','cid','count'],\r\n                            mounted:function () {\r\n                                if(this.count>2){\r\n                                    this.more = true;\r\n                                }\r\n                            },\r\n                            methods:{\r\n                                moreBtn:function () {\r\n                                    if((this.page-2)*this.pagesize<=(this.count-2)){\r\n                                        this.getListData();\r\n                                    };\r\n                                },\r\n                                getListData:function () {\r\n                                    var that = this,\r\n                                        reqData = {\r\n                                            clubContentId: cid,\r\n                                            pageIndex: 1,\r\n                                            pageSize: 1,\r\n                                            sort:0,\r\n                                            replyPageIndex:that.page,\r\n                                            replyPageSize:that.pagesize\r\n                                        },\r\n                                        reqDataFmt = {jsondata: JSON.stringify(reqData)};\r\n                                    clubApis.getWapCardCommentReply(reqDataFmt,function (repData) {\r\n                                        var result = repData.body;\r\n                                        if(result.dataType === 'ok'){\r\n                                            var repList = result.commlist[0].reply;\r\n                                            that.rld = that.rld.concat(repList);\r\n                                            if(that.pagesize*(that.page-1)>=that.count){\r\n                                                that.moretxt = '全部加载完成';\r\n                                                that.moregray = true;\r\n                                            }else{\r\n                                                that.moretxt = '查看剩余'+(that.count-that.pagesize*(that.page - 1) - 2)+'条回复';\r\n                                            }\r\n                                            that.page++;\r\n                                        }\r\n                                    },function () {\r\n                                        that.moretxt = '加载中...'\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                        //评论组件\r\n                        var CommLi = {\r\n                            template:'\\\r\n                                <li>\\\r\n                                    <a class=\"head\"><img :src=\"item.head\" :alt=\"item.name\"></a>\\\r\n                                    <div class=\"info\">\\\r\n                                        <h5>{{item.name}}<a class=\"info-like\">{{item.replylike}}</a></h5>\\\r\n                                        <div class=\"info-others\"><span class=\"info-time\">{{item.replytime}}</span></div>\\\r\n                                        <div class=\"context qzBtnCommentInner\" :data-clubcontentid=\"item.clubContentId\" :data-commid=\"item.commid\" :data-name=\"item.name\" :data-userid=\"item.useId\" v-html=\"item.context\"></div>\\\r\n                                        <comm-line v-if=\"item.reply\" :count=\"item.replycount\" :cid=\"item.clubContentId\" :rld=\"item.reply\"></comm-line>\\\r\n                                     </div>\\\r\n                                </li>\\\r\n                            ',\r\n                            props:['item'],\r\n                            components:{\r\n                                CommLine:CommLine\r\n                            }\r\n                        }\r\n                        var CommHot = {\r\n                            template:'\\\r\n                                <div v-if=\"hotshow\" class=\"club-card-comment-list-hot\">\\\r\n                                    <h4>热门评论</h4>\\\r\n                                    <ul class=\"club-card-comment-list\">\\\r\n                                        <comm-li v-for=\"item in lists\" :item=\"item\"></comm-li>\\\r\n                                    </ul>\\\r\n                                </div>\\\r\n                            ',\r\n                            data:function () {\r\n                                return {\r\n                                    page:1,\r\n                                    lists:[],\r\n                                    hotshow:false\r\n                                }\r\n                            },\r\n                            created:function () {\r\n                                var that = this,reqData = {\r\n                                        clubContentId: cid,\r\n                                        pageIndex: that.page,\r\n                                        pageSize: 1000 //热门默认全部显示\r\n                                    },\r\n                                    reqDataFmt = {jsondata: JSON.stringify(reqData)};\r\n                                clubApis.getWapCardCommentPageHot(reqDataFmt,function (res) {\r\n                                    var result = res.body;\r\n                                    if (result.dataType === 'ok') {\r\n                                        that.hotshow = true;\r\n                                        that.lists = result.commlist;\r\n                                    }\r\n                                });\r\n                            },\r\n                            components:{\r\n                                CommLine:CommLine,\r\n                                CommLi:CommLi\r\n                            }\r\n                        };\r\n                        //全部评论组件\r\n                        var CommAll = {\r\n                            template:'\\\r\n                                <div v-if=\"allshow\" class=\"club-card-comment-list-all\">\\\r\n                                    <nav><a v-for=\"(nav,idx) in navs\" :class=\"nav.sort===sort?\\'cur\\':\\'\\'\" @click=\"sortChange(idx)\">{{nav.txt}}</a></nav>\\\r\n                                    <ul class=\"club-card-comment-list\">\\\r\n                                        <comm-li v-for=\"(item,idx) in navs[sort].list\" :item=\"item\" :key=\"idx\"></comm-li>\\\r\n                                    </ul>\\\r\n                                    <a class=\"club-card-comment-more\" @click=\"getMore\" v-html=\"moreState[navs[sort].more]\"></a>\\\r\n                                </div>\\\r\n                            ',\r\n                            data:function () {\r\n                                return {\r\n                                    sort:1,\r\n                                    eachnum:10,\r\n                                    moreState:['查看更多','全部加载完成','<i></i>正在加载'],\r\n                                    navs:[\r\n                                        {\r\n                                            txt:'最早',\r\n                                            sort:0,\r\n                                            page:1,\r\n                                            pageall:0,\r\n                                            more:1,\r\n                                            list:[]\r\n                                        },\r\n                                        {\r\n                                            txt:'最新',\r\n                                            sort:1,\r\n                                            page:1,\r\n                                            pageall:0,\r\n                                            more:1,\r\n                                            list:[]\r\n                                        }\r\n                                    ],\r\n                                    lists:[],\r\n                                    allshow:false\r\n                                }\r\n                            },\r\n                            created:function () {\r\n                                this.getList(this.navs[this.sort].page);\r\n                            },\r\n                            components:{\r\n                                CommLine:CommLine,\r\n                                CommLi:CommLi\r\n                            },\r\n                            methods:{\r\n                                getList:function (page) {\r\n                                    var that = this,\r\n                                        reqData = {\r\n                                            clubContentId: cid,\r\n                                            pageIndex: page,\r\n                                            pageSize: that.eachnum,\r\n                                            sort:that.sort\r\n                                        },\r\n                                        reqDataFmt = {jsondata: JSON.stringify(reqData)};\r\n                                    clubApis.getWapCardCommentPage1(reqDataFmt,function (res) {\r\n                                        var result = res.body;\r\n                                        if (result.dataType === 'ok') {\r\n                                            that.allshow = true;\r\n                                            that.navs[that.sort].pageall = result.count;\r\n                                            that.navs[that.sort].list = that.navs[that.sort].list.concat(result.commlist);\r\n                                            if(that.navs[that.sort].page*that.eachnum<result.count){\r\n                                                that.navs[that.sort].more = 0;\r\n                                            }else{\r\n                                                that.navs[that.sort].more = 1;\r\n                                            }\r\n                                        }\r\n                                    },function () {\r\n                                        that.navs[that.sort].more = 2;\r\n                                    });\r\n                                },\r\n                                sortChange:function (idx) {\r\n                                    var that = this;\r\n                                    that.sort = idx;\r\n                                    if(that.navs[idx].list.length<1){\r\n                                        that.getList(that.navs[that.sort].page);\r\n                                    }\r\n                                },\r\n                                getMore:function () {\r\n                                    var that = this;\r\n                                    function getFunc() {\r\n                                        that.getList(++that.navs[that.sort].page);\r\n                                    }\r\n                                    if(that.navs[that.sort].page*that.eachnum<that.navs[that.sort].pageall){\r\n                                        getFunc();\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        var VmMain = {\r\n                            template:'<div class=\"club-card-comment-box\"><comm-hot></comm-hot><comm-all></comm-all></div>',\r\n                            components:{\r\n                                CommHot:CommHot,\r\n                                CommAll:CommAll\r\n                            }\r\n                        }\r\n                        var vmCardComment = new Vue({\r\n                            el:'#clubCardComment',\r\n                            components:{\r\n                                VmMain:VmMain\r\n                            }\r\n                        });\r\n                    },\r\n                    init:function () {\r\n                        this.vmBuild();\r\n                    }\r\n                };\r\n                vCardPage.init();\r\n            }\r\n        },\r\n        //无限加载\r\n        infiniteLoad: function (tar, callback) {\r\n            function loadFunc() {\r\n                var tarInsert = $(tar);\r\n                //判断列表是否开启无限加载\r\n                if (tarInsert.attr('data-infiload') === 'open') {\r\n                    //获取数据，具体参数和方式后端自定义\r\n                    if (typeof callback === 'function') {\r\n                        callback(tar, tarInsert);\r\n                    }\r\n                }\r\n            }\r\n            function scrollJudge() {\r\n                var st = $('html').scrollTop(), dh = $(document).height(), wh = $(window).height();\r\n                if (st === 0) {\r\n                    st = $('body').scrollTop();\r\n                }\r\n                if (st > dh - wh - 20 && st > wh - dh && qzConfig.isCanLoading === true) {\r\n                    qzConfig.isCanLoading = false;\r\n                    loadFunc();\r\n                }\r\n            }\r\n            if ($(tar).length > 0) {\r\n                $(window).scroll(function () {\r\n                    scrollJudge();\r\n                });\r\n            }\r\n        },\r\n        //话题页上部加载更多按钮\r\n        topicMore: function () {\r\n            var $moreBtn = $('.qzCardMoreBtn');\r\n            $moreBtn.on('click', function () {\r\n                var tarInsert = $('#qzCardListTopic');\r\n                //判断列表是否开启查看更多\r\n                if (tarInsert.length > 0 && tarInsert.attr('data-moreload') === 'open') {\r\n                    //获取数据，具体参数和方式后端自定义\r\n                    var dt = \"http://192.168.0.100:9014/apis/club/api/GetWapClubContentByTopic\";\r\n                    var clubId = $(\".clubId\").attr(\"data-selectClubId\");\r\n                    var topicTitle = $(\".topic\").attr(\"data-topic\");\r\n                    var excludeclubContentId = tarInsert.find(\".qzCard\").attr(\"data-cid\");\r\n                    var pageIndex = parseInt(tarInsert.attr(\"data-pageIndex\"));\r\n                    var pageSize = pageIndex == 0 ? 9 : 10;\r\n                    pageIndex = pageIndex == 0 ? 1 : pageIndex + 1;\r\n                    var jsondata = {\r\n                        clubId: clubId,\r\n                        topicTitle: topicTitle,\r\n                        excludeclubContentId: excludeclubContentId,\r\n                        pageIndex: pageIndex,\r\n                        pageSize: pageSize\r\n                    };\r\n                    $.ajax({\r\n                        type: \"get\",\r\n                        dataType: \"json\",\r\n                        url: dt,\r\n                        data: { jsondata: JSON.stringify(jsondata) },\r\n                        beforeSend: function () {\r\n                            //插入加载动画\r\n                            tarInsert.append(qzConfig.loadingDom);\r\n                        },\r\n                        success: function (responseObject) {\r\n                            var result = $.parseJSON(responseObject.body);\r\n                            //加载成功后移除加载动画\r\n                            tarInsert.find('.qz-loading').remove();\r\n                            //判断时候还有当前数据页码是否加载完成\r\n                            if (result.cardgroup.length > 0) {\r\n                                //设置新页码\r\n                                tarInsert.attr('data-pageIndex', pageIndex);\r\n                                //插入更多数据\r\n                                qzFunc.appendCard('#qzCardListTopic', result.cardgroup);\r\n                                if (result.cardgroup.length < pageSize) {\r\n                                    tarInsert.attr('data-moreload', 'close');\r\n                                    $moreBtn.html('全部加载完成');\r\n                                }\r\n                            } else {\r\n                                if (tarInsert.attr('data-moreload') === 'open') {\r\n                                    //全部加载完成 关闭加载\r\n                                    tarInsert.attr('data-moreload', 'close');\r\n                                    //按钮 改变提示文字\r\n                                    $moreBtn.html('全部加载完成');\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        //列表切换\r\n        tabNav: function () {\r\n            function navFunc() {\r\n                var $nav = $('.qzNavFx'),\r\n                    //浮动导航层\r\n                    $navWrap = $('.qzNavFxW'),\r\n                    //固定不动的占位导航\r\n                    $navPos = $('.qzNavPos'),\r\n                    loadedTimer;\r\n                //判断滚动距离添加浮动导航\r\n                function fixNav() {\r\n                    var navTop = $navPos.offset().top, srlTop = $('html').scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    if (srlTop >= navTop) {\r\n                        $navWrap.addClass('openQzNavFixed');\r\n                    } else {\r\n                        $navWrap.removeClass('openQzNavFixed');\r\n                    }\r\n                }\r\n                fixNav();\r\n                $(window).scroll(function () {\r\n                    fixNav();\r\n                });\r\n                //加载tab内容前 页面位置\r\n                function scrollLoading() {\r\n                    var $html = $('html'), hh = $html.height(),\r\n                        navSt = $navPos.offset().top, srlTop = $html.scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    $html.css('height', hh);\r\n                    if (srlTop > navSt) {\r\n                        $('html,body').animate({ scrollTop: navSt }, 0);\r\n                    }\r\n                }\r\n                //加载tab内容后 页面位置\r\n                function scrollLoaded() {\r\n                    var $html = $('html');\r\n                    clearTimeout(loadedTimer);\r\n                    loadedTimer = setTimeout(function () {\r\n                        $html.css('height', '');\r\n                    }, 200);\r\n                }\r\n                //点击切换绑定事件\r\n                $nav.find('a').on('click', function () {\r\n                    var $this = $(this), tarCon = '#qzCardList';\r\n                    //设置按钮点击后样式\r\n                    $nav.find('a').removeClass('cur');\r\n                    $this.addClass('cur');\r\n                    $(tarCon).html(\"\").attr(\"data-pageIndex\", 0).attr(\"data-loading\", false);\r\n                    qzConfig.isCanLoading = false;\r\n                    scrollLoading();\r\n                    $(tarCon).getClub(function () {\r\n                        scrollLoaded();\r\n                    });\r\n                })\r\n            }\r\n            if ($('.qzNavFx').length > 0) {\r\n                navFunc();\r\n            }\r\n        },\r\n        //单页跳转\r\n        pageGoto: function () {\r\n            var openId = $('.qz-card-list');\r\n            //点击其他区域跳转到单页\r\n            openId.on('click', '.qzCard .qzZoneHref', function () {\r\n                var $this = $(this), url = $this.data('href');\r\n                //window.location.href = url;\r\n                window.open(url, '_blank');\r\n            });\r\n            //阻止事件冒泡\r\n            openId.on('click', '.qzZoneHref figure,.qzZoneHref a', function (event) {\r\n                event.stopPropagation();\r\n            });\r\n        },\r\n        //构建卡片内评论\r\n        createCardComment: function (cmdt) {\r\n            var commDom = '';\r\n            commDom += '<li data-commid=\"' + cmdt.commid + '\"><a class=\"head\">';\r\n            commDom += '<img src=\"' + cmdt.head + '\" alt=\"' + cmdt.name + '\"></a>';\r\n            commDom += '<div class=\"info qzBtnComment\" data-clubcontentid=\"' + cmdt.clubContentId + '\" data-commid=\"' + cmdt.commid + '\" data-name=\"' + cmdt.name + '\"  data-userId=\"' + cmdt.useId + '\">';\r\n            commDom += '<h5>' + cmdt.name;\r\n            if (cmdt.reply) {\r\n                commDom += '<b>回复</b>' + cmdt.reply;\r\n            }\r\n            commDom += '</h5>';\r\n            commDom += '<p class=\"time\">' + cmdt.replytime + '</p>';\r\n            commDom += '<div class=\"context\">';\r\n            commDom += cmdt.context;\r\n            commDom += '</div></div></li>';\r\n            return commDom;\r\n        },\r\n        //todo 2018-03-14 更新 构建单页评论内回复\r\n        createCommentReply:function (replyData,cid) {\r\n            var reDom = '';\r\n            reDom += '<div class=\"ic-item qzBtnCommentInner\" data-clubcontentid=\"'+cid+'\" data-commid=\"'+replyData.commid+'\" data-name=\"'+replyData.name+'\" data-userid=\"'+replyData.useId+'\"><a class=\"ici-name\">'+replyData.name+'</a>';\r\n            if(replyData.reply !== null){\r\n                reDom += '<i class=\"ici-rpy\">回复</i><a class=\"ici-name\">'+replyData.reply+'</a>';\r\n            }\r\n            reDom += '<a class=\"ici-name\">：&nbsp;</a><span class=\"ici-context\">'+replyData.context+'</span></div>';\r\n            return reDom;\r\n        },\r\n        //todo:2018.03.13 更新 构建卡片内评论\r\n        createCardCommentFull: function (cmdt) {\r\n            var commDom = '',that = this;\r\n            commDom += '<li data-commid=\"' + cmdt.commid + '\"';\r\n            if(cmdt.replylike>=5){\r\n                commDom += ' class=\"with-hot-tags\">';\r\n            }else{\r\n                commDom += '>';\r\n            }\r\n            commDom += '<a class=\"head\">';\r\n            commDom += '<img src=\"' + cmdt.head + '\" alt=\"' + cmdt.name + '\"></a>';\r\n            commDom += '<div class=\"info\">';\r\n            commDom += '<h5>' + cmdt.name;\r\n            if(cmdt.editauth){\r\n                commDom += '<img src=\"'+cmdt.editauth+'\" alt=\"编辑\">';\r\n            }\r\n            commDom += '<a class=\"info-like\">' + cmdt.replylike + '</a>';\r\n            commDom += '</h5>';\r\n            commDom += '<div class=\"info-others\"><span class=\"info-time\">' + cmdt.replytime + '</span><span class=\"info-device\">来自' + cmdt.replydevice + '</span></div>';\r\n\r\n            commDom += '<div class=\"context qzBtnCommentInner\" data-clubcontentid=\"'+cmdt.clubContentId+'\" data-commid=\"'+cmdt.commid+'\" data-name=\"'+cmdt.name+'\" data-userid=\"'+cmdt.useId+'\">';\r\n            commDom += cmdt.context;\r\n            commDom += '</div>';\r\n            if(cmdt.reply !== null){\r\n                commDom += '<div class=\"info-comment\">';\r\n                $.each(cmdt.reply,function (i,item) {\r\n                    if(i<2){\r\n                        commDom += that.createCommentReply(item,cmdt.commid);\r\n                    }\r\n                });\r\n                if(cmdt.reply.length>2){\r\n                    commDom += '<a class=\"info-comment-more\">查看全部'+cmdt.replycount+'条回复</a>'\r\n                }\r\n                commDom += '</div>';\r\n            }\r\n            commDom += '</div></li>';\r\n            return commDom;\r\n        },\r\n        createCardCommentList: function (cmdt) {\r\n            var commDom = '';\r\n            commDom += '<li data-commid=\"' + cmdt.commid + '\"><a class=\"head\">';\r\n            commDom += '<img src=\"' + cmdt.head + '\" alt=\"' + cmdt.name + '\"></a>';\r\n            commDom += '<div class=\"info qzBtnCommentInner\" data-clubcontentid=\"' + cmdt.clubContentId + '\" data-commid=\"' + cmdt.commid + '\" data-name=\"' + cmdt.name + '\"  data-userId=\"' + cmdt.useId + '\">';\r\n            commDom += '<h5>' + cmdt.name;\r\n            if (cmdt.reply) {\r\n                commDom += '<b>回复</b>' + cmdt.reply;\r\n            }\r\n            commDom += '</h5>';\r\n            commDom += '<p class=\"time\">' + cmdt.replytime + '</p>';\r\n            commDom += '<div class=\"context\">';\r\n            commDom += cmdt.context;\r\n            commDom += '</div></div></li>';\r\n            return commDom;\r\n        },\r\n        //todo:2018.03.06 更新 重构卡片内评论\r\n        insertCardComment: function (tar, dt , addMore) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardCommentFull(item);\r\n            });\r\n            if(addMore === true){\r\n                insDom += '<a class=\"club-card-comment-more clubCardCommentMore\" data-clk=\"can\">查看更多</a>';\r\n            }else{\r\n                insDom += '<a class=\"club-card-comment-more\">全部加载完成</a>';\r\n            }\r\n            $(tar).html(insDom);\r\n        },\r\n        //插入卡片内更多评论\r\n        appendCardComment: function (tar, dt , addMore) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardCommentFull(item);\r\n            });\r\n            if(addMore === true){\r\n                insDom += '<a class=\"club-card-comment-more clubCardCommentMore\" data-clk=\"can\">查看更多</a>';\r\n            }else{\r\n                insDom += '<a class=\"club-card-comment-more\">全部加载完成</a>';\r\n            }\r\n            $(tar).append(insDom);\r\n        },\r\n        //构建卡片内赞\r\n        createCardLike: function (lkdt) {\r\n            var likeDom = '';\r\n            likeDom += '<li data-likeid=\"' + lkdt.likeid + '\"><a class=\"head\">';\r\n            likeDom += '<img src=\"' + lkdt.head + '\" alt=\"' + lkdt.name + '\"></a>';\r\n            likeDom += '<div class=\"name\"><a>' + lkdt.name + '</a></div>';\r\n            likeDom += '</div></li>';\r\n            return likeDom;\r\n        },\r\n        //插入卡片内赞\r\n        insertCardLike: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardLike(item);\r\n            });\r\n            $(tar).html(insDom);\r\n        },\r\n        //插入卡片内更多赞\r\n        appendCardLike: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                //使用返回数据 构建卡片\r\n                insDom += qzFunc.createCardLike(item);\r\n            });\r\n            $(tar).append(insDom);\r\n        },\r\n        //打开视频弹窗\r\n        openVideoPop: function () {\r\n            function videoPop(vdsrc) {\r\n                var popDom = '';\r\n                popDom += '<div class=\"qz-video-pop qzVideoPop\">';\r\n                popDom += '<div class=\"qz-video-pop-con\">';\r\n                popDom += '<iframe height=\"100%\" width=\"100%\" src=\"http://player.youku.com/embed/' + vdsrc + '\" frameborder=0 allowfullscreen></iframe>';\r\n                popDom += '</div>';\r\n                popDom += '<div class=\"qz-video-bar\"><a class=\"qz-video-pop-close qzVideoPopClose\"></div></a>';\r\n                popDom += '</div>';\r\n                $('body').append(popDom);\r\n                var $pop = $('.qzVideoPop');\r\n                setTimeout(function () {\r\n                    $pop.addClass('cur');\r\n                }, 10);\r\n                function closePop() {\r\n                    $pop.removeClass('cur');\r\n                    setTimeout(function () {\r\n                        $pop.remove();\r\n                    }, 250);\r\n                }\r\n                $pop.on('click', closePop);\r\n                $pop.on('click', 'iframe', function (event) {\r\n                    event.stopPropagation();\r\n                });\r\n            }\r\n            $('.qzVideoPopBtn').on('click', function () {\r\n                var $this = $(this), vdurl = $this.data('href'), vdsrc = '';\r\n                var ykSign = 'http://v.youku.com/v_show/id_', ykIndexOfBegin = vdurl.indexOf(ykSign) + ykSign.length, ykIndexOfEnd = vdurl.indexOf('==.html');\r\n                vdsrc = vdurl.substring(ykIndexOfBegin, ykIndexOfEnd);\r\n                videoPop(vdsrc);\r\n            })\r\n        },\r\n        //构建全部话题列表\r\n        createAllTopic: function (dt) {\r\n            var topicDom = '';\r\n            topicDom += '<li data-topicid=\"' + dt.Id + '\" data-topic=\"' + dt.Title + '\"><a href=\"http://192.168.0.100:9014/apis/m/topic/' + dt.Id + '\"><b>' + dt.Title + '</b><span><i class=\"num-in\">0</i>人参与<i class=\"num-comm\">0</i>条主题</span></a></li>';\r\n            return topicDom;\r\n        },\r\n        //插入全部话题列表\r\n        allTopic: function () {\r\n            var $topicList = $('#qzAllTopicList');\r\n            var dataOriUrl = \"http://192.168.0.100:9014/apis/club/api/gettopicall\";\r\n            var pageSize = $topicList.attr(\"data-pageSize\");\r\n            function createList(dt) {\r\n                var listDom = '';\r\n                $.each(dt, function (i, item) {\r\n                    listDom += qzFunc.createAllTopic(item);\r\n                });\r\n                $topicList.html(listDom);\r\n                $(\"#qzAllTopicList li\").allTopicJoinCount();\r\n            }\r\n            function addList(dt) {\r\n                var listDom = '';\r\n                $.each(dt, function (i, item) {\r\n                    listDom += qzFunc.createAllTopic(item);\r\n                });\r\n                $topicList.append(listDom);\r\n                $(\"#qzAllTopicList li\").allTopicJoinCount();\r\n            }\r\n            function getListData() {\r\n                var pageIndex = parseInt($topicList.attr(\"data-page\")) + 1;\r\n                var jsondata = {\r\n                    pageIndex: pageIndex,\r\n                    pageSize: pageSize\r\n                };\r\n                $.ajax({\r\n                    type: \"get\",\r\n                    dataType: \"jsonp\",\r\n                    url: dataOriUrl,\r\n                    data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                    success: function (result) {\r\n                        $topicList.attr({ 'data-page': pageIndex, 'data-infiload': 'open' });\r\n                        createList(result);\r\n                    }\r\n                })\r\n            }\r\n            if ($topicList.length > 0) {\r\n                getListData();\r\n                qzFunc.infiniteLoad('#qzAllTopicList', function (tar, tarInsert) {\r\n                    var $main = $('#qzMain'), pageIndex = parseInt($topicList.attr(\"data-page\")) + 1;\r\n                    var jsondata = {\r\n                        pageIndex: pageIndex,\r\n                        pageSize: pageSize\r\n                    };\r\n                    $.ajax({\r\n                        type: \"get\",\r\n                        dataType: \"jsonp\",\r\n                        url: dataOriUrl,\r\n                        data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                        beforeSend: function () {\r\n                            //插入加载动画\r\n                            $main.append(qzConfig.loadingDom);\r\n                        },\r\n                        success: function (result) {\r\n                            //加载成功后移除加载动画\r\n                            $main.find('.qz-loading').remove();\r\n                            //判断时候还有当前数据页码是否加载完成\r\n                            if (result.length > 0) {\r\n                                //设置新页码\r\n                                tarInsert.attr('data-page', pageIndex);\r\n                                //插入更多数据\r\n                                addList(result);\r\n                            } else {\r\n                                if (tarInsert.attr('data-infiload') === 'open') {\r\n                                    //全部加载完成 关闭加载\r\n                                    tarInsert.attr('data-infiload', 'close');\r\n                                    //插入 全部加载完成 提示\r\n                                    $main.append(qzConfig.loadedDom);\r\n                                }\r\n                            }\r\n                            qzConfig.isCanLoading = true;\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        //todo 2018-03-13 更新：添加百度分享\r\n        //百度分享弹窗\r\n        popBaiduShare:function () {\r\n            var that = this;\r\n            function createPop() {\r\n                var popDom = '';\r\n                popDom += '<div class=\"club-pop-baidu-mask clubPopBaidu clubPopBaiduClose\"></div>';\r\n                popDom += '<div class=\"club-pop-baidu-main clubPopBaidu\">';\r\n                popDom += '<div class=\"club-pop-baidu-head\">分享</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-body\">';\r\n                popDom += '<div class=\"club-pop-baidu-btns bdsharebuttonbox\" data-tag=\"share_1\"><a class=\"bds_tsina\" data-cmd=\"tsina\"></a><a class=\"bds_sqq\" data-cmd=\"sqq\"></a><a class=\"bds_qzone\" data-cmd=\"qzone\"></a><a class=\"bds_more\" data-cmd=\"more\"></a><a class=\"bds_count\" data-cmd=\"count\"></a></div>';\r\n                popDom += '</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-foot\"><a class=\"clubPopBaiduClose\">取消</a></div>';\r\n                popDom += '</div>';\r\n                return popDom;\r\n            }\r\n            \r\n            function initBaiduShare() {\r\n                var baiduSrc = 'http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5);\r\n                if(typeof _bd_share_main === 'object'){\r\n                    _bd_share_main.init();\r\n                }else{\r\n                    $.getScript(baiduSrc);\r\n                }\r\n            }\r\n\r\n            function closePop() {\r\n                var $pop = $('.clubPopBaidu');\r\n                $pop.removeClass('cur');\r\n                setTimeout(function () {\r\n                    $pop.remove();\r\n                    that.popCommon.close();\r\n                },250);\r\n            }\r\n\r\n            function showPop() {\r\n                var popDom = createPop();\r\n                $('body').append(popDom);\r\n                that.popCommon.open();\r\n                setTimeout(function () {\r\n                    $('.clubPopBaidu').addClass('cur');\r\n                },50);\r\n                $('.clubPopBaiduClose').on('click',function () {\r\n                    closePop();\r\n                });\r\n                initBaiduShare();\r\n            };\r\n\r\n            showPop();\r\n        },\r\n        //global bind\r\n        globalBind:function () {\r\n            var $main = $('#qzMain'),that = this;\r\n            $main.on('click','.qzBtnShare',function () {\r\n                that.popBaiduShare();\r\n            })\r\n        },\r\n        //入口\r\n        main: function () {\r\n            //设置屏幕缩放\r\n            qzFunc.setRem();\r\n            //插入图片弹层，只需执行一次\r\n            qzFunc.addSwpOnce();\r\n            //开启评论\r\n            qzFunc.addComment();\r\n            //开启赞喜欢\r\n            //qzFunc.addLike();\r\n            //开启发布/参与\r\n            qzFunc.addContext();\r\n            //插入测试数据 话题页\r\n            qzFunc.initPageTopic();\r\n            //插入测试数据 内容单页\r\n            qzFunc.initPageContext();\r\n            //列表切换导航\r\n            qzFunc.tabNav();\r\n            //插入测试数据 模拟无限加载\r\n            qzFunc.infiniteLoad('#qzCardList', function (tar, tarInsert) {\r\n                tarInsert.getClub();\r\n            });\r\n            //开启 话题页上部加载更多按钮功能\r\n            qzFunc.topicMore();\r\n            //开启 内容单页 跳转功能\r\n            qzFunc.pageGoto();\r\n            //加载 全部话题 列表\r\n            qzFunc.allTopic();\r\n            //旋转屏幕需要执行的函数\r\n            $(window).resize(function () {\r\n                qzFunc.setRem();\r\n            });\r\n            //绑定全局事件\r\n            qzFunc.globalBind();\r\n        }\r\n    };\r\n    qzFunc.main();\r\n    //发布话题输入框\r\n    $(document).ready(function () {\r\n        $(\"#qzCardList\").getClub();\r\n        $(\".qzBtnLike\").addLike();\r\n        $(\".themeNum\").joinCount();\r\n        $(\".qz-nav-sort\").change(function (event) {\r\n            event.preventDefault();\r\n            var sort = $(this).find('option:selected').attr(\"data-sort\");\r\n            $(this).attr(\"data-sort\", sort);\r\n            $(\"#qzCardList\").html(\"\").attr(\"data-pageIndex\", 0).attr(\"data-loading\", false).getClub();\r\n        });\r\n    });\r\n    $.fn.fabuSubmit = function (beforeOpenSt) {\r\n        return this.each(function () {\r\n            var $div = $(this), maxnum = parseInt($div.find(\".maxNum\").html());\r\n            var $textarea = $div.find(\".mathIpt\");\r\n            var minH = $textarea.height(), rowH = parseInt($textarea.css(\"line-height\"));//行高\r\n            var maxH = rowH * 15; //最小高度\r\n\r\n            $textarea.textareaAutoHeight({ minHeight: minH, maxHeight: maxH });//文本框自适应高度\r\n            $div.on(\"focus\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"placeholder\");\r\n                $this.attr(\"data-val\", htm).removeAttr(\"placeholder\").parent().addClass(\"cur\");\r\n            }).on(\"blur\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"data-val\");\r\n                $this.attr(\"placeholder\", htm).parent().removeClass(\"cur\");\r\n            }).on(\"keyup blur\", \".mathIpt\", function () {\r\n                var len = this.value.length;\r\n                this.value = this.value.substr(0, maxnum);\r\n                $div.find(\".curNum\").html(len);\r\n                $div.find(\".fabu-num\").css(\"display\", len > 0 ? 'block' : '');\r\n            });\r\n\r\n            //提交发布\r\n            $div.on(\"click\", \".qzPopSmt\", function () {\r\n                var $lipic = $(\".qz-pic-list-li:not(.temp)\");\r\n                var $fabuVideo = $(\".fabuVideo\");\r\n                var valHtm = '', picHtm = '', videoHtm = '';\r\n                var valcon = $(\".mathIpt\").val();\r\n                var content = valcon == '' ? $(\".realIpt\").html() : valcon;\r\n                var clubId = $(\".clubId\").attr(\"data-selectClubId\");\r\n                if ($(this).attr(\"data-isclick\") == 'true') {\r\n                    return;\r\n                }\r\n                $(this).attr(\"data-isclick\", true);\r\n                //处理图片\r\n                var images = \"\";\r\n                var len = $lipic.length > 9 ? 9 : $lipic.length - 1;\r\n                if (len > 0) {\r\n                    images = [];\r\n                    for (var i = 0; i < len; i++) {\r\n                        var type = $lipic.eq(i).find(\"img\").attr(\"data-type\");\r\n                        var src = $lipic.eq(i).find(\"img\").attr(\"src\");\r\n                        var small = src.replace(\"tiny\", \"small\");\r\n                        var origin = src.replace(\"tiny\", \"origin\");\r\n                        var tinysquare = src.replace(\"tiny\", \"tinysquare\");\r\n                        if (type == \"gif\") {\r\n                            origin = origin.replace(\".jpg\", \".gif\");\r\n                        }\r\n                        var height = $lipic.eq(i).find(\"img\").attr(\"data-height\");\r\n                        var width = $lipic.eq(i).find(\"img\").attr(\"data-width\");\r\n                        images.push({ \"tiny\": src, \"tinysquare\": tinysquare, \"small\": small, \"origin\": origin, \"height\": height, \"width\": width, \"imageType\": type });\r\n                    }\r\n                }\r\n\r\n                //判断视频是否添加\r\n                var videos = \"\";\r\n                if ($fabuVideo.length > 0) {\r\n                    var avvid = '', avtit = '', avurl = '', avimg = '', avname = '';\r\n                    if ($fabuVideo.attr(\"data-tit\") == undefined) {\r\n                        avtit = '视频链接'; //视频标题\r\n                    } else {\r\n                        avvid = $fabuVideo.attr(\"data-vid\"); //视频id\r\n                        avtit = $fabuVideo.attr(\"data-tit\"); //视频标题\r\n                        avimg = $fabuVideo.attr(\"data-img\"); //视频图片\r\n                        avname = $fabuVideo.attr(\"data-sitename\"); //视频图片\r\n                    }\r\n                    avurl = $fabuVideo.attr(\"data-url\"); //视频地址\r\n                    videos = { \"image\": avimg, \"title\": avtit, \"videoUrl\": avurl, \"videoVid\": avvid, \"siteName\": avname };\r\n                }\r\n                //如果图片和视频为空就判断输入框是为空\r\n                if (images == '' && videos == '' && !isTrim(content)) { alert(\"你还没有输入内容!\"); return; }\r\n                //上传图片或添加视频后，空内容也可以提交，否则空内容不可以提交;\r\n                var jsondata = {\r\n                    content: content,\r\n                    images: images,\r\n                    videos: videos,\r\n                    clubId: clubId,\r\n                    device: 1\r\n                };\r\n                $.ajax({\r\n                    type: \"post\",\r\n                    dataType: \"json\",\r\n                    url: \"http://192.168.0.100:9014/apis/club/api/addclubcontent\",\r\n                    data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                    success: function (result) {\r\n                        if (result.dataType == \"ok\") {\r\n                            $(this).attr(\"data-isclick\", false);\r\n                            $(\".mathIpt\").val(\"\");\r\n                            var html = qzFunc.createCard(result.cardgroup);\r\n                            $(\"#qzCardList\").prepend(html);\r\n                            qzFunc.photoSwp();\r\n                            //点赞\r\n                            $(\".qzBtnLike\").like();\r\n                            $(\".qzBtnLike\").addLike();\r\n                            $(\".qzBtnComment\").commentCount();\r\n                            $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                            setTimeout(function () {\r\n                                $(\".qzPop\").remove();\r\n                            }, 250);\r\n                        }\r\n                        else {\r\n                            alert(\"发布失败，请重试！\");\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n    $.fn.selectPhoto = function () {\r\n        return this.each(function () {\r\n            $(this).bind(\"click\", function () {\r\n                $(\"#fileupload\").trigger(\"click\");\r\n                $('#fileupload').fileupload({\r\n                    dataType: 'json',\r\n                    maxFileSize: '5000000',//5M\r\n                    url: 'http://192.168.0.100:9014/apis/uploadpic/index',\r\n                    done: function (e, data) {\r\n                        var result = data.result;\r\n                        if (result.status == \"ok\") {\r\n                            var count = $(\".qz-pic-list-li .qz-img-remove\").length + 1;\r\n                            if (count > 9) {\r\n                                alert(\"最多只能传9张\");\r\n                                $(\".qz-pic-list .temp:first\").remove();\r\n                            }\r\n                            else {\r\n                                if (count == 9) {\r\n                                    $(\".qz-pic-list-add\").parent().css(\"display\", \"none\");\r\n                                }\r\n                                var html = \"<img src='\" + result.tiny + \"' data-original='\" + result.original + \"' data-height=\\\"\" + result.height + \"\\\" data-width=\\\"\" + result.width + \"\\\" data-type=\\\"\" + result.imageclass + \"\\\"><a class='qz-img-remove'></a>\";\r\n                                $(\".qz-pic-list .temp:first\").removeClass(\"temp\").html(html);\r\n\r\n                            }\r\n                            $(\".qz-pic-list .qz-img-remove\").each(function () {\r\n                                $(this).unbind(\"click\");\r\n                                $(this).bind(\"click\", function () {\r\n                                    var original = $(this).parents(\".pic\").find(\"img\").attr(\"data-original\");\r\n                                    var len = $(\".qz-pic-list-li\").not(\":last\").length;\r\n                                    $(this).parent(\".qz-pic-list-li\").remove();\r\n                                    $.ajax({\r\n                                        type: \"get\", dataType: \"json\", url: \"http://192.168.0.100:9014/apis/uploadpic/delete?origin=\" + original,\r\n                                        data: {},\r\n                                        success: function (responseJson) {\r\n                                        }\r\n                                    });\r\n                                    if (len < 9) {\r\n                                        $(\".qz-pic-list-add\").parent().css(\"display\", \"block\");\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        else {\r\n                            alert(\"包含不支持的文件格式\");\r\n                            $(\".qz-pic-list .temp:first\").remove();\r\n\r\n                        }\r\n                    },\r\n                    change: function (e, data) {\r\n                        var i = 0;\r\n                        var settingSize = parseInt($(\"#fileupload\").attr(\"data-imagesize\"));\r\n                        var settingSizeMb = settingSize / 1024;\r\n                        $.each(data.files, function (index, item) {\r\n                            if (item.size / 1024 > settingSize && i <= 0) {\r\n                                i += 1;\r\n                                alert(\"图片容量超过\" + settingSizeMb + \"MB，无法上传！\");\r\n                            }\r\n                            else {\r\n                                if (item.size / 1024 <= settingSize) {\r\n                                    var html = '<div class=\"qz-pic-list-li temp\"><img src=\"http://image.gamersky.com/webimg15/user/club/pc/loading.gif\" ></div>';\r\n                                    $(\".qz-pic-list-li:first\").before(html);\r\n                                }\r\n                            }\r\n                        });\r\n                    },\r\n                });\r\n            });\r\n        })\r\n    };\r\n    //todo:2018-03-13 更新：修改排序\r\n    $.fn.getClub = function (callback) {\r\n        return this.each(function () {\r\n            var $this = $(this),\r\n                cfg = $(\".qzNavFx a.cur\").attr(\"data-cfg\"),\r\n                contentType = clubConfig.listNavSetter[cfg].type,\r\n                sort = clubConfig.listNavSetter[cfg].sort,\r\n                clubId = $(\".clubId\").attr(\"data-clubId\"),\r\n                topic = $(\".topic\").attr(\"data-topic\"),\r\n                topicId = $(\".topic\").attr(\"data-topicId\"),\r\n                pageIndex = parseInt($this.attr(\"data-pageIndex\")) + 1,\r\n                pageSize = $this.attr(\"data-pageSize\"),\r\n                loading = $this.attr(\"data-loading\");\r\n            if (loading == \"true\") {\r\n                return;\r\n            }\r\n            $this.attr(\"data-loading\", \"true\");\r\n            var length = $this.find(\".qzCard\").length,\r\n                index = 0,\r\n                excludeIds = $this.find(\".qzCard:first\").attr(\"data-cid\");\r\n            if (excludeIds == undefined || excludeIds==null){\r\n                excludeIds=\"\"\r\n            }\r\n            if (length >= 50) {\r\n                index = length - 50;\r\n            }\r\n            excludeIds+=\",\";\r\n            $this.find(\".qzCard:gt(\" + index + \")\").each(function () {\r\n                excludeIds += $(this).attr(\"data-cid\") + \",\";\r\n            });\r\n            var jsondata = {\r\n                contentType: contentType,\r\n                sort: sort,\r\n                pageIndex: pageIndex,\r\n                pageSize: pageSize,\r\n                clubId: clubId,\r\n                topic: topic,\r\n                topicId: topicId,\r\n                excludeIds: excludeIds\r\n            };\r\n            $this.attr(\"data-pageIndex\", pageIndex);\r\n            var clubListParams = {jsondata: JSON.stringify(jsondata)}\r\n            clubApis.getWapClubContext(clubListParams,function (responseObject) {\r\n                var result = $.parseJSON(responseObject.body);\r\n                $this.attr(\"data-loading\", \"false\");\r\n                $this.find('.qz-loading').remove();\r\n                var len = result.cardgroup.length;\r\n                if (pageIndex == 1 && len == 0) {\r\n                    $this.html(qzConfig.loadnullDom).attr('data-infiload', 'close');\r\n                }\r\n                else if (pageIndex == 1 && len > 0) {\r\n                    qzFunc.insertCard($this, result.cardgroup);\r\n                    if (len >= pageSize) {\r\n                        $this.attr(\"data-infiload\", \"open\");\r\n                        qzConfig.isCanLoading = true;\r\n                    }\r\n                    else {\r\n                        qzConfig.isCanLoading = false;\r\n                        $this.attr('data-infiload', 'close').append(qzConfig.loadedDom);\r\n                    }\r\n                }\r\n                else if (pageIndex > 1 && len > 0) {\r\n                    qzFunc.appendCard($this, result.cardgroup);\r\n                    $this.attr(\"data-infiload\", \"open\");\r\n                    qzConfig.isCanLoading = true;\r\n                }\r\n                else {\r\n                    $this.attr('data-infiload', 'close').append(qzConfig.loadedDom);\r\n                }\r\n                if (typeof callback === 'function') {\r\n                    callback && callback();\r\n                }\r\n            },function () {\r\n                //插入加载动画\r\n                $(\".qz-loadnull,.qz-loaded\").remove();\r\n                $this.append(qzConfig.loadingDom);\r\n            });\r\n        });\r\n    };\r\n    //todo 2018-03-13 更新：修复点赞样式\r\n    //获取点赞数据\r\n    $.fn.like = function () {\r\n        var support = \"\";\r\n        $(this).each(function () {\r\n            if (support != \"\") {\r\n                support = support + \",\"\r\n            }\r\n            support = support + $(this).attr(\"data-clubcontentid\");\r\n        });\r\n        var jsondata = {\r\n            clubContentId: support\r\n        };\r\n        var transData = {jsondata: JSON.stringify(jsondata)};\r\n        clubApis.getLike(transData,function (data) {\r\n            if (data.status == \"ok\") {\r\n                var body = $.parseJSON(data.body);\r\n                $.each(body, function (index, value) {\r\n                    $(\".qzBtnLike[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                        $(this).find(\"b\")\r\n                            .html(value.digg)\r\n                            .attr(\"data-likecount\", value.digg);\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    };\r\n    //todo 2018-03-13 更新：修复点赞样式\r\n    //添加点赞\r\n    $.fn.addLike = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.unbind(\"click\");\r\n            $this.click(function (event) {\r\n                event.preventDefault();\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok' || jsmodel === 'dev') {\r\n                        var Id = $this.attr(\"data-clubcontentid\");\r\n                        var jsondata = {\r\n                            clubContentId: Id,\r\n                            fromDevice: 1,\r\n                        };\r\n                        var transData = {jsondata: JSON.stringify(jsondata)};\r\n                        clubApis.addLike(transData,function (responseJson) {\r\n                            if (responseJson.status == \"err\") {\r\n                                alert(responseJson.body);\r\n                            }\r\n                            else {\r\n                                var m = parseInt($this.find(\"b\").html()) + 1;\r\n                                $this.find(\"b\").html(m);\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n            });\r\n        });\r\n    };\r\n    $.fn.commentCount = function () {\r\n        var that = this;\r\n        function commentDo() {\r\n            var support = \"\";\r\n            $(that).each(function () {\r\n                if (support != \"\") {\r\n                    support = support + \",\"\r\n                }\r\n                support = support + $(this).attr(\"data-clubcontentid\");\r\n            });\r\n            var jsondata = {\r\n                clubContentId: support\r\n            };\r\n            var gCommentCountParams = {jsondata: JSON.stringify(jsondata)};\r\n            clubApis.getCommentCount(gCommentCountParams,function (data) {\r\n                if (data.status == \"ok\") {\r\n                    var body = $.parseJSON(data.body);\r\n                    $.each(body, function (index, value) {\r\n                        $(\".qzBtnComment[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                            var $th = $(this);\r\n                            if ($(that).parents(\".qzClComment\").length > 0) {\r\n                                return;\r\n                            }\r\n                            $th.html(value.commentCount);\r\n                            $th.attr(\"data-commcount\", value.commentCount);\r\n                            if($('#qzCardList').length>0&&value.commentCount>0){\r\n                                $th.insertListComment();\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        commentDo();\r\n    };\r\n    //todo:2018-03-13 更新：注释掉卡片内回复\r\n    //卡片列表内评论\r\n    $.fn.insertListComment = function () {\r\n        var $this = $(this);\r\n        function initFnc() {\r\n            var $card = $this.closest('.qzCard'),commDom = '',\r\n                pageIndex = 1,\r\n                clubContentId = $this.data(\"clubcontentid\"),\r\n                jsondata = {\r\n                    clubContentId: clubContentId,\r\n                    pageIndex: pageIndex,\r\n                    pageSize: 10\r\n                },\r\n                transData = { jsondata: JSON.stringify(jsondata) };\r\n            clubApis.getWapClubComment(transData,function (responseObject) {\r\n                var result = $.parseJSON(responseObject.body);\r\n                //判断数据状态\r\n                if (result.dataType === 'ok' && $this.attr('data-isinsert') != 'ok') {\r\n                    $this.attr('data-isinsert','ok');\r\n                    //处理获取的数据\r\n                    commDom += '<div class=\"qz-comment-inlist\"><ul>';\r\n                    $.each(result.commlist,function (i,item) {\r\n                        if(i<3){\r\n                            commDom += qzFunc.createCardCommentList(item);\r\n                        }\r\n                    });\r\n                    commDom += '</ul></div>';\r\n                    $(commDom).insertBefore($card.find('footer'));\r\n                }\r\n            });\r\n        }\r\n        if(clubConfig.innerCommentState === 'open'){\r\n            initFnc();\r\n        }\r\n    };\r\n    //获取参与人数\r\n    $.fn.joinCount = function () {\r\n        var topic = \"\";\r\n        $(this).each(function () {\r\n            if (topic != \"\") {\r\n                topic = topic + \",\"\r\n            }\r\n            topic = topic + $(this).attr(\"data-topic\");\r\n        });\r\n        var jsondata = {\r\n            topic: topic\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"http://192.168.0.100:9014/apis/club/api/getjoinarraycount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    $.each(data.result, function (index, value) {\r\n                        $(\".themeNum[data-topic='\" + value.topic + \"']\").each(function () {\r\n                            $(this).find(\".join\").html(value.join + \"人\");\r\n                            $(this).find(\".theme\").html(value.clubContent);\r\n                            $(this).find(\"span i\").html(value.clubContent);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    $.fn.allTopicJoinCount = function () {\r\n        var topic = \"\";\r\n        $(this).each(function () {\r\n            if (topic != \"\") {\r\n                topic = topic + \",\"\r\n            }\r\n            topic = topic + $(this).attr(\"data-topic\");\r\n        });\r\n        var jsondata = {\r\n            topic: topic\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"http://192.168.0.100:9014/apis/club/api/getjoinarraycount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    $.each(data.result, function (index, value) {\r\n                        $(\"#qzAllTopicList li[data-topic='\" + value.topic + \"']\").each(function () {\r\n                            $(this).find(\".num-in\").html(value.join);\r\n                            $(this).find(\".num-comm\").html(value.clubContent);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    //发布评论\r\n    $.fn.addComment = function (beforeOpenSt) {\r\n        var $this = $(this);\r\n        if ($this.attr(\"data-isclick\") == 'true') {\r\n            return;\r\n        }\r\n        $this.attr(\"data-isclick\", true);\r\n        var text = $.trim($this.parent().siblings(\".pop-con\").find(\".mathIpt\").val());\r\n        var userId = $this.data(\"userid\");\r\n        var clubContentId = $this.data(\"clubcontentid\");\r\n        var replyCommentId = $this.data(\"commentid\");\r\n        if (text == \"\") {\r\n            alert(\"评论不能为空！\");\r\n            return;\r\n        }\r\n        else if (text.length >= 5000) {\r\n            alert(\"评论不能超过5000个字符！\");\r\n            return;\r\n        }\r\n        else {\r\n            var jsondata = {\r\n                userId: userId,\r\n                clubContentId: clubContentId,\r\n                content: text,\r\n                replyId: replyCommentId,\r\n                fromDevice: 1\r\n            };\r\n            $.ajax({\r\n                type: \"post\",\r\n                dataType: \"json\",\r\n                url: \"http://192.168.0.100:9014/apis/club/api/addcomment\",\r\n                data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                success: function (result) {\r\n                    if (result.dataType == \"ok\") {\r\n                        $this.attr(\"data-isclick\", false);\r\n                        var $qzClComment = $(\"#qzClComment\");\r\n                        if ($qzClComment.length > 0) {\r\n                            var html = qzFunc.createCardComment(result.commlist);\r\n                            $qzClComment.find(\"li\").length == 0 ? $qzClComment.html(html) : $qzClComment.prepend(html);\r\n                            var m = parseInt($(\".commentNum i,.qzBtnComment\").html()) + 1;\r\n                            $(\".commentNum i,#qzCardContext .btn-comment\").html(m);\r\n                        }\r\n                        else {\r\n                            $(\".qzBtnComment[data-clubcontentid=\" + clubContentId + \"]\").html(\"1\").attr(\"data-commcount\", 1);\r\n                        }\r\n                        $(\".qzPop\").removeClass('cur');\r\n                        $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                        //等待弹层动画执行完后移除弹层\r\n                        setTimeout(function () {\r\n                            $(\".qzPop\").remove();\r\n                        }, 250);\r\n                    }\r\n                    else {\r\n                        alert(result.body);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    $.fn.UserOnline = function (fun) {\r\n        $.ajax({\r\n            type: \"GET\", dataType: \"jsonp\", url: \"http://192.168.0.100:9014/apis/api/logincheck\",\r\n            success: function (responseJson) {\r\n                if(jsmodel === 'dev'){\r\n                    fun(responseJson);\r\n                }else{\r\n                    if (responseJson.status !== \"ok\") {\r\n                        $(\".ymw-loginpop-btns\").insertYmwLoginPop();\r\n                        $(\".ymw-loginpop-btns\").QZloginForm();\r\n                    }\r\n                    else {\r\n                        fun(responseJson);\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    };\r\n    $.fn.QZloginForm = function () {\r\n        var $this = $(this);\r\n        $this.on(\"click\", \"#qqLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"http://192.168.0.100:9014/apis/oauth/authorizelogin?authorizetype=qq&returnUrl=\" + encodeURI(returnUrl);\r\n        }).on(\"click\", \"#sinaLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"http://192.168.0.100:9014/apis/oauth/authorizelogin?authorizetype=sina&returnUrl=\" + encodeURI(returnUrl);\r\n        })\r\n    };\r\n    $.fn.insertYmwLoginPop = function () {\r\n        $(\".gsZpPopLoginClose\").show();\r\n        $(\".gs_zp_pop_login\").show();\r\n        $('.gsZpPopLoginClose').on('click', function () {\r\n            $(\".gs_zp_pop_login\").hide();\r\n            $(\".gsZpPopLoginClose\").hide();\r\n        })\r\n    };\r\n    $.fn.removeTarget = function () {\r\n        return this.each(function () {\r\n            $(this).find(\"a\").attr(\"target\", \"_self\");\r\n        })\r\n    }\r\n})(jQuery);"]}