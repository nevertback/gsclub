{"version":3,"sources":["qz.wapwebcall.v1.0.1.min.js"],"names":["$","clubId","attr","topicId","clubConfig","listNavSetter","new","sort","type","hot","best","isTrim","s","replace","fn","extend","textareaAutoHeight","options","this","_options","minHeight","maxHeight","init","p","parseFloat","height","keyup","resetHeight","change","focus","_minHeight","_maxHeight","browser","msie","h","scrollHeight","scrollTop","css","qzConfig","isCanLoading","loadingDom","loadedDom","loadnullDom","qzFunc","setRem","pw","window","width","font-size","popCommon","open","addClass","close","removeClass","createCard","cdp","cardDom","cardid","head","user","vauth","createtime","spectop","specvalue","url","isVideo","text","video","src","videoTitle","piclist","length","each","i","item","ext","large","origin","size","undefined","picbig","picType","pic","fromUrl","from","workShareText","substring","addSwpOnce","swp","append","photoSwp","initPhotoSwipeFromDOM","gallerySelector","parseThumbnailElements","el","figureEl","linkEl","thumbElements","childNodes","numNodes","items","nodeType","children","getAttribute","split","w","parseInt","ori","title","innerHTML","msrc","push","closest","parentNode","onThumbnailsClick","e","event","preventDefault","returnValue","eTarget","target","srcElement","clickedListItem","tagName","toUpperCase","index","clickedGallery","numChildNodes","nodeIndex","openPhotoSwipe","galleryElement","disableAnimation","fromURL","setOrigin","num","gallery","pswpElement","shareEl","fullscreenEl","zoomEl","bgOpacity","showHideOpacity","galleryUID","history","tapToClose","getThumbBoundsFn","thumbnail","getElementsByTagName","pageYScroll","pageYOffset","document","documentElement","rect","getBoundingClientRect","x","left","y","top","galleryPIDs","j","pid","isNaN","showAnimationDuration","PhotoSwipe","PhotoSwipeUI_Default","listen","getCurrentIndex","animate","opacity","galleryElements","querySelectorAll","l","setAttribute","onclick","insertCard","tar","dt","insDom","html","like","addLike","commentCount","removeTarget","openVideoPop","appendCard","addContext","insertContext","scrolltopval","setAreaSize","$qzPop","find","on","val","textsth","closePop","setTimeout","remove","topic","data","clubname","comDom","selectPhoto","fabuSubmit","UserOnline","response","status","st","addComment","insertComment","cid","commentId","rename","userId","placeholder","$this","count","uerId","location","href","infiniteLoad","callback","loadFunc","tarInsert","scrollJudge","dh","wh","scroll","tabNav","navFunc","fixNav","navTop","$navPos","offset","srlTop","$navWrap","scrollLoading","$html","hh","navSt","scrollLoaded","clearTimeout","loadedTimer","$nav","tarCon","getClub","pageGoto","openId","stopPropagation","videoPop","vdsrc","$pop","popDom","vdurl","ykSign","ykIndexOfBegin","indexOf","ykIndexOfEnd","popBaiduShare","createPop","initBaiduShare","baiduSrc","Date","_bd_share_config","common","bdText","bdDesc","bdUrl","share","tag","bdSize","_bd_share_main","getScript","that","showPop","globalBind","$main","sharetext","shareurl","main","resize","fun","ajax","dataType","success","responseJson","insertYmwLoginPop","QZloginForm","returnUrl","encodeURI","show","hide","bind","trigger","fileupload","crossDomain","maxFileSize","done","result","alert","parent","tiny","original","imageclass","unbind","parents","len","not","settingSize","settingSizeMb","files","before","beforeOpenSt","$div","maxnum","$textarea","minH","rowH","maxH","htm","removeAttr","value","substr","$lipic","$fabuVideo","valcon","images","eq","small","tinysquare","imageType","videos","avvid","avtit","avurl","avimg","avname","image","videoUrl","videoVid","siteName","jsondata","content","device","xhrFields","withCredentials","JSON","stringify","cardgroup","prepend","support","clubContentId","body","parseJSON","Id","digg","click","fromDevice","m","trim","siblings","replyCommentId","replyId","cfg","contentType","pageIndex","pageSize","loading","excludeIds","beforeSend","clubName","joinCount","join","clubContent","showNav","isElite","icon","clubWapIcon","topicWapIcon","ready","jQuery"],"mappings":"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","file":"qz.wapwebcall.v1.0.1.min.js","sourcesContent":["(function ($) {\r\n    var clubId = $(\"#qzMain\").attr(\"clubId\"), topicId = $(\"#qzMain\").attr(\"topicId\"), topic = $(\"#qzMain\").attr(\"topic\");\r\n    var clubConfig = {\r\n        //卡片列表排序方式\r\n        listNavSetter:{\r\n            //最新\r\n            new:{\r\n                sort:1,\r\n                type:0\r\n            },\r\n            //最热\r\n            hot:{\r\n                sort:2,\r\n                type:0\r\n            },\r\n            //精品\r\n            best:{\r\n                sort:1,\r\n                type:1\r\n            }\r\n        }\r\n    };\r\n    //清除空格\r\n    var isTrim = function (s) {\r\n        if (typeof (s) == 'undefined') {\r\n            return false;\r\n        }\r\n        return s.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n    };\r\n    $.fn.extend({\r\n        //文本框自适应高度\r\n        textareaAutoHeight: function (options) {\r\n            this._options = { minHeight: 0, maxHeight: 1000 }\r\n            this.init = function () {\r\n                for (var p in options) {\r\n                    this._options[p] = options[p];\r\n                }\r\n                if (this._options.minHeight == 0) {\r\n                    this._options.minHeight = parseFloat($(this).height());\r\n                }\r\n                for (var p in this._options) {\r\n                    if ($(this).attr(p) == null) {\r\n                        $(this).attr(p, this._options[p]);\r\n                    }\r\n                }\r\n                $(this).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight);\r\n            }\r\n            this.resetHeight = function () {\r\n                var _minHeight = parseFloat($(this).attr(\"minHeight\"));\r\n                var _maxHeight = parseFloat($(this).attr(\"maxHeight\"));\r\n\r\n                if (!$.browser.msie) { $(this).height(0); }\r\n                var h = parseFloat(this.scrollHeight);\r\n                h = h < _minHeight ? _minHeight : h > _maxHeight ? _maxHeight : h;\r\n                $(this).height(h).scrollTop(h);\r\n                $(this).css(\"overflow-y\", h >= _maxHeight ? \"scroll\" : \"hidden\");\r\n            }\r\n            this.init();\r\n        }\r\n    });\r\n    var qzConfig = {\r\n        isCanLoading: true,\r\n        loadingDom: '<div class=\"qz-loading\">正在加载</div>',\r\n        loadedDom: '<div class=\"qz-loaded\">全部加载完成</div>',\r\n        loadnullDom: '<div class=\"qz-loadnull\">还没有内容</div>'\r\n    };\r\n    var qzFunc = {\r\n        //设置屏幕缩放\r\n        setRem: function () {\r\n            var pw = $(window).width();\r\n            if (pw >= 640) {\r\n                pw = 640;\r\n            }\r\n            $('html').css({ 'font-size': pw / 6.4 + 'px' });\r\n        },\r\n        //弹窗公用方法\r\n        popCommon:{\r\n            open:function () {\r\n                $('html').addClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','none');\r\n            },\r\n            close:function () {\r\n                $('html').removeClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','block');\r\n            }\r\n        },\r\n        //构建卡片\r\n        createCard: function (cdp) {\r\n            var cardDom = '';\r\n            cardDom += '<div class=\"qz-card qzCard\" data-cid=\"' + cdp.cardid + '\">';\r\n            cardDom += '<header><a class=\"head\"><img src=\"' + cdp.head + '\" alt=\"head\"></a>';\r\n            cardDom += '<div class=\"info\"><h5>';\r\n            cardDom += '<a>' + cdp.user + '</a>';\r\n            if (isTrim(cdp.vauth)) {\r\n                cardDom += '<img src=\"'+ cdp.vauth +'\">';\r\n            }\r\n            cardDom += '</h5><p>';\r\n            cardDom += '<span class=\"time\">' + cdp.createtime + '</span>';\r\n            cardDom += '</p>';\r\n            cardDom += '</div>';\r\n            if (cdp.spectop === true || cdp.specvalue === true) {\r\n                cardDom += '<div class=\"spec-icons\">';\r\n                if (cdp.spectop === true) {\r\n                    cardDom += '<a class=\"spec-top\">置顶</a>';\r\n                }\r\n                if (cdp.specvalue === true) {\r\n                    cardDom += '<a class=\"spec-value\">精</a>';\r\n                }\r\n                cardDom += '</div>';\r\n            }\r\n            cardDom += '</header>';\r\n            cardDom += '<section class=\"detail qzZoneHref\" data-href=\"' + cdp.url + '\">';\r\n            cardDom += '<div class=\"content\">';\r\n            if (cdp.isVideo) {\r\n                cardDom += cdp.text;\r\n                cardDom += '<a href=' + cdp.video.src + ' class=\"link-video\">' + cdp.video.videoTitle + '</a>';\r\n            }\r\n            else {\r\n                cardDom += cdp.text;\r\n            }\r\n            cardDom += '</div>';\r\n            if (cdp.piclist.length > 0) {\r\n                cardDom += '<div class=\"media-pic-list\"><div class=\"clearfix qz-figs qzPicPswp\">';\r\n                $.each(cdp.piclist, function (i, item) {\r\n                    cardDom += '<figure class=\"qzPicPswpBtn';\r\n                    if (item.ext === 'gif') {\r\n                        cardDom += ' gif\"';\r\n                        item.large = item.origin;\r\n                    } else if (item.ext === 'long') {\r\n                        cardDom += ' long\"';\r\n                    }\r\n                    cardDom += '\"><a data-origin=\"' + item.origin + '\"  data-large=\"' + item.large + '\" data-size=\"' + item.size + '\"><img src=\"' + item.url + '\"></a></figure>';\r\n                });\r\n                cardDom += '</div></div>';\r\n            }\r\n            if (cdp.picbig.large != undefined) {\r\n                cdp.picbig.large = cdp.picbig.url;\r\n                var picType = \"\";\r\n                cardDom += '<div class=\"qzPicPswp media-pic';\r\n                if (cdp.picbig.ext === 'gif') {\r\n                    picType = ' gif';\r\n                    cdp.picbig.large = cdp.picbig.origin;\r\n                } else if (cdp.picbig.ext === 'long') {\r\n                    picType = ' long';\r\n                }\r\n                cardDom += '\"><figure class=\"' + picType + '\"><a data-origin=\"' + cdp.picbig.origin + '\" data-large=\"' + cdp.picbig.large + '\" data-size=\"' + cdp.picbig.size + '\"><img src=\"' + cdp.picbig.url + '\" class=\"qzPicPswpBtn\"></a></figure></div>';\r\n            }\r\n            if (cdp.isVideo) {\r\n                cardDom += '<div class=\"media-video\">';\r\n                cardDom += '<a class=\"qzVideoPopBtn\" data-href=\"' + cdp.video.src + '\"><img src=\"' + cdp.video.pic + '\" alt=\"\"></a></div>'\r\n            }\r\n\r\n            cardDom += '</section>';\r\n            if (cdp.fromUrl) {\r\n                cardDom += '<div class=\"from\">来自：<a href=\"' + cdp.fromUrl + '\" >' + cdp.from + '</a></div>';\r\n            }\r\n            cardDom += '<footer>';\r\n            var workShareText = cdp.text.replace(/<[^>]+>/g,\"\").substring(0,200);\r\n            cardDom += '<a class=\"btn-share qzBtnShare\" data-sharetext=\"'+workShareText+'\" data-shareurl=\"'+cdp.url+'\">分享</a>';\r\n            cardDom += '<span></span>';\r\n            cardDom += '<a class=\"btn-comment qzBtnComment\" data-commcount=\"\"  data-clubcontentid=\"' + cdp.cardid + '\"   data-href=\"' + cdp.url + '\">0</a>';\r\n            cardDom += '<span></span>';\r\n            cardDom += '<a class=\"btn-like qzBtnLike\" data-likecount=\"\" data-clubcontentid=\"' + cdp.cardid + '\" ><i></i><b></b></a>';\r\n            cardDom += '</footer>';\r\n            cardDom += '</div>';\r\n            cardDom += '';\r\n            cardDom += '';\r\n            return cardDom;\r\n        },\r\n        //图片弹出层 默认执行,一般情况不需要修改\r\n        addSwpOnce: function () {\r\n            var swp = '<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button><a target=\"_blank\" class=\"pswp__button pswpBtnOrigin pswp__single-tap\" title=\"查看原图\"></a> <button class=\"pswp__button pswp__button--share\" title=\"Share\"></button> <button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button> <button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"><div class=\"pswp__share-tooltip\"></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\"></button> <button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\"></button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div>';\r\n            $('body').append(swp);\r\n        },\r\n        //图片弹出层方法 默认执行,一般情况不需要修改\r\n        photoSwp: function () {\r\n            var initPhotoSwipeFromDOM = function (gallerySelector) {\r\n                var parseThumbnailElements = function (el) {\r\n                    var thumbElements = el.childNodes,\r\n                        numNodes = thumbElements.length,\r\n                        items = [],\r\n                        figureEl,\r\n                        linkEl,\r\n                        size,\r\n                        item;\r\n                    for (var i = 0; i < numNodes; i++) {\r\n                        figureEl = thumbElements[i];\r\n                        if (figureEl.nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        linkEl = figureEl.children[0];\r\n                        size = linkEl.getAttribute('data-size').split('x');\r\n                        item = {\r\n                            src: linkEl.getAttribute('data-large'),\r\n                            w: parseInt(size[0], 10),\r\n                            h: parseInt(size[1], 10),\r\n                            ori: linkEl.getAttribute('data-origin')\r\n                        };\r\n                        if (figureEl.children.length > 1) {\r\n                            item.title = figureEl.children[1].innerHTML;\r\n                        }\r\n                        if (linkEl.children.length > 0) {\r\n                            item.msrc = linkEl.children[0].getAttribute('src');\r\n                        }\r\n                        item.el = figureEl;\r\n                        items.push(item);\r\n                    }\r\n                    return items;\r\n                };\r\n                var closest = function closest(el, fn) {\r\n                    return el && (fn(el) ? el : closest(el.parentNode, fn));\r\n                };\r\n                var onThumbnailsClick = function (e) {\r\n                    e = e || window.event;\r\n                    e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n                    var eTarget = e.target || e.srcElement;\r\n                    var clickedListItem = closest(eTarget, function (el) {\r\n                        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');\r\n                    });\r\n                    if (!clickedListItem) {\r\n                        return;\r\n                    }\r\n                    var clickedGallery = clickedListItem.parentNode,\r\n                        childNodes = clickedListItem.parentNode.childNodes,\r\n                        numChildNodes = childNodes.length,\r\n                        nodeIndex = 0,\r\n                        index;\r\n                    for (var i = 0; i < numChildNodes; i++) {\r\n                        if (childNodes[i].nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        if (childNodes[i] === clickedListItem) {\r\n                            index = nodeIndex;\r\n                            break;\r\n                        }\r\n                        nodeIndex++;\r\n                    }\r\n                    if (index >= 0) {\r\n                        openPhotoSwipe(index, clickedGallery);\r\n                    }\r\n                    return false;\r\n                };\r\n\r\n                var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {\r\n                    var pswpElement = $('.pswp')[0],\r\n                        gallery,\r\n                        options,\r\n                        items;\r\n                    items = parseThumbnailElements(galleryElement);\r\n                    options = {\r\n                        shareEl: false,\r\n                        fullscreenEl: false,\r\n                        zoomEl: false,\r\n                        bgOpacity: 1,\r\n                        showHideOpacity: 0,\r\n                        galleryUID: galleryElement.getAttribute('data-pswp-uid'),\r\n                        history: false,\r\n                        tapToClose:true,\r\n                        getThumbBoundsFn: function (index) {\r\n                            var thumbnail = items[index].el.getElementsByTagName('img')[0],\r\n                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\r\n                                rect = thumbnail.getBoundingClientRect();\r\n                            return { x: rect.left, y: rect.top + pageYScroll, w: rect.width };\r\n                        }\r\n                    };\r\n                    if (fromURL) {\r\n                        if (options.galleryPIDs) {\r\n                            for (var j = 0; j < items.length; j++) {\r\n                                if (items[j].pid == index) {\r\n                                    options.index = j;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            options.index = parseInt(index, 10) - 1;\r\n                        }\r\n                    } else {\r\n                        options.index = parseInt(index, 10);\r\n                    }\r\n                    if (isNaN(options.index)) {\r\n                        return;\r\n                    }\r\n                    if (disableAnimation) {\r\n                        options.showAnimationDuration = 0;\r\n                    }\r\n                    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\r\n                    gallery.init();\r\n                    function setOrigin(num) {\r\n                        $('.pswpBtnOrigin').attr('href', items[num].ori)\r\n                    }\r\n                    gallery.listen('initialZoomIn', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                        $('.pswp').animate({ 'opacity': 1 }, 333);\r\n                    });\r\n                    gallery.listen('initialZoomOut', function () {\r\n                        $('.pswp').animate({ 'opacity': 0 }, 200);\r\n                    });\r\n                    gallery.listen('afterChange', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                    });\r\n                };\r\n                var galleryElements = document.querySelectorAll(gallerySelector);\r\n                for (var i = 0, l = galleryElements.length; i < l; i++) {\r\n                    galleryElements[i].setAttribute('data-pswp-uid', i + 1);\r\n                    galleryElements[i].onclick = onThumbnailsClick;\r\n                }\r\n            };\r\n            initPhotoSwipeFromDOM('.qzPicPswp');\r\n        },\r\n        //插入卡片\r\n        insertCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).html(insDom);\r\n            $(\".qzBtnLike\").like();\r\n            $(\".qzBtnLike\").addLike();\r\n            $(\".qzBtnComment\").commentCount();\r\n            $(\".qzCard .content\").removeTarget();\r\n            qzFunc.photoSwp();\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //加载更多卡片\r\n        appendCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).append(insDom);\r\n            $(\".qzBtnLike\").like();\r\n            $(\".qzBtnLike\").addLike();\r\n            $(\".qzBtnComment\").commentCount();\r\n            $(\".qzCard .content\").removeTarget();\r\n            qzFunc.photoSwp();\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //发布/参与\r\n        addContext: function () {\r\n            function insertContext(scrolltopval) {\r\n                var tar = $(\"#qzCardList\");\r\n                var topic = tar.data(\"topic\"), clubname = tar.data(\"clubname\");\r\n                var comDom = '';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>发布内容<a class=\"qz-pop-close qzPopClose\"></a><a class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\">';\r\n                comDom += '<div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"分享你的游戏心得...\">';\r\n                if (isTrim(topic)) {\r\n                    comDom += topic;\r\n                }\r\n                comDom += '</textarea > <textarea class=\"mathIpt\" rows=\"3\"></textarea></div > ';\r\n                comDom += '<div class=\"clearfix qz-pic-list\">';\r\n                comDom += '<div class=\"qz-pic-list-li\"><label for=\"qzSelectPhoto\" class=\"qz-pic-list-add\"></label></div>';\r\n                comDom += '</div>';\r\n                comDom += '<input id=\"fileupload\"  data-imagesize=\"5120\"   type=\"file\" style=\"display:none\" name=\"files\" method=\"POST\" multiple=\"\">';\r\n                comDom += '</div>';\r\n                comDom += '<footer><label for=\"qzSelectPhoto\" class=\"qz-upload-pic qzUploadPic\">图片</label><select class=\"qz-pop-sel\">';\r\n                comDom += '</select>';\r\n                comDom += '</footer></div>';\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                $(\".qz-pic-list-add,.qzUploadPic\").selectPhoto();\r\n                if (isTrim(clubname)) {\r\n                    $(\".qz-pop-sel\").html(\"<option value='clubId'>发往\" + clubname + \"</option>\");\r\n                }\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                $('.qzPopClose').on('click', closePop);\r\n                $qzPop.fabuSubmit(scrolltopval);\r\n\r\n            }\r\n            $('#qzMain').on('click', '.qzBtnContext', function () {\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok') {\r\n                        var st = $('html').scrollTop();\r\n                        if (st === 0) {\r\n                            st = $('body').scrollTop();\r\n                        }\r\n                        setTimeout(function () {\r\n                            $('html,body').addClass('hideScroll');\r\n                        }, 300);\r\n                        insertContext(st);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        //评论\r\n        addComment: function () {\r\n            function insertComment(scrolltopval, cid, commentId, rename, userId) {\r\n                var comDom = '', placeholder = rename ? '回复 ' + rename + '：' : '我来说两句...';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>评论<a class=\"qz-pop-close qzPopClose\"></a><a data-userId=\"' + userId + '\" data-clubContentId=\"' + cid + '\"  data-commentId=\"' + commentId + '\" class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\"><div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"' + placeholder + '\"></textarea><textarea class=\"mathIpt\" rows=\"3\"></textarea></div></div>';\r\n                comDom += '</div>';\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                $('.qzPopClose').on('click', closePop);\r\n                $('.qzPopSmt').on('click', function () {\r\n                    var context = $qzPop.find('.realIpt').val();\r\n                    $(this).addComment(scrolltopval);\r\n                });\r\n            }\r\n            $('#qzMain').on('click', '.qzBtnComment', function () {\r\n                var $this = $(this);\r\n                $this.UserOnline(function (response) {\r\n                    if (response.status == 'ok') {\r\n                        var st = $('html').scrollTop(),\r\n                            cid = $this.data('clubcontentid'),\r\n                            count = $this.data('commcount'),\r\n                            url = $this.data('href'),\r\n                            uerId = $this.data('userid'),\r\n                            commentId = $this.data('commid'),\r\n                            rename = $this.attr('data-name');\r\n                        if ($('#qzCardContext').length > 0) {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                            return false;\r\n                        }\r\n                        if (count === 0 || count == \"\") {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                        } else {\r\n                            window.location.href = url;\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        //点赞\r\n        addLike: function () {\r\n            $('#qzMain').on('click', '.qzBtnLike', function () {\r\n                var $this = $(this),\r\n                    cid = $this.closest('.qzCard').data('cid'),\r\n                    count = $this.attr('data-likecount');\r\n                if (parseInt($this.attr('data-islike')) === 1) {\r\n                    $this.removeClass('cur').attr('data-islike', '0').attr('data-likecount', parseInt(count) - 1).find('b').html(parseInt(count) - 1);\r\n                } else {\r\n                    $this.addClass('cur').attr('data-islike', '1').attr('data-likecount', parseInt(count) + 1).find('b').html(parseInt(count) + 1);\r\n                }\r\n            })\r\n        },\r\n        //无限加载\r\n        infiniteLoad: function (tar, callback) {\r\n            function loadFunc() {\r\n                var tarInsert = $(tar);\r\n                if (tarInsert.attr('data-infiload') === 'open') {\r\n                    if (typeof callback === 'function') {\r\n                        callback(tar, tarInsert);\r\n                    }\r\n                }\r\n            }\r\n            function scrollJudge() {\r\n                var st = $('html').scrollTop(), dh = $(document).height(), wh = $(window).height();\r\n                if (st === 0) {\r\n                    st = $('body').scrollTop();\r\n                }\r\n                if (st > dh - wh - 100 && st > wh - dh && qzConfig.isCanLoading === true) {\r\n                    qzConfig.isCanLoading = false;\r\n                    loadFunc();\r\n                }\r\n            }\r\n            if ($(tar).length > 0) {\r\n                $(window).scroll(function () {\r\n                    scrollJudge();\r\n                });\r\n            }\r\n        },\r\n        //列表切换\r\n        tabNav: function () {\r\n            function navFunc() {\r\n                var $nav = $('.qzNavFx'),\r\n                    $navWrap = $('.qzNavFxW'),\r\n                    $navPos = $('.qzNavPos'),\r\n                    loadedTimer;\r\n                function fixNav() {\r\n                    var navTop = $navPos.offset().top, srlTop = $('html').scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    if (srlTop >= navTop) {\r\n                        $navWrap.addClass('openQzNavFixed');\r\n                    } else {\r\n                        $navWrap.removeClass('openQzNavFixed');\r\n                    }\r\n                }\r\n                fixNav();\r\n                $(window).scroll(function () {\r\n                    fixNav();\r\n                });\r\n                function scrollLoading() {\r\n                    var $html = $('html'), hh = $html.height(),\r\n                        navSt = $navPos.offset().top, srlTop = $html.scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    $html.css('height', hh);\r\n                    if (srlTop > navSt) {\r\n                        $('html,body').animate({ scrollTop: navSt }, 0);\r\n                    }\r\n                }\r\n                function scrollLoaded() {\r\n                    var $html = $('html');\r\n                    clearTimeout(loadedTimer);\r\n                    loadedTimer = setTimeout(function () {\r\n                        $html.css('height', '');\r\n                    }, 200);\r\n                }\r\n                $nav.find('a').on('click', function () {\r\n                    var $this = $(this), tarCon = '#qzCardList';\r\n                    $nav.find('a').removeClass('cur');\r\n                    $this.addClass('cur');\r\n                    $(tarCon).html(\"\").attr(\"data-pageIndex\", 0).attr(\"data-loading\", false);\r\n                    qzConfig.isCanLoading = false;\r\n                    scrollLoading();\r\n                    $(tarCon).getClub(function () {\r\n                        scrollLoaded();\r\n                    });\r\n                })\r\n            }\r\n            if ($('.qzNavFx').length > 0) {\r\n                navFunc();\r\n            }\r\n        },\r\n        //单页跳转\r\n        pageGoto: function () {\r\n            var openId = $('.qz-card-list');\r\n            openId.on('click', '.qzCard .qzZoneHref', function () {\r\n                var $this = $(this), url = $this.data('href');\r\n                //window.location.href = url;\r\n                window.open(url, '_blank');\r\n            });\r\n            openId.on('click', '.qzZoneHref figure,.qzZoneHref a', function (event) {\r\n                event.stopPropagation();\r\n            });\r\n        },\r\n        //打开视频弹窗\r\n        openVideoPop: function () {\r\n            function videoPop(vdsrc) {\r\n                var popDom = '';\r\n                popDom += '<div class=\"qz-video-pop qzVideoPop\">';\r\n                popDom += '<div class=\"qz-video-pop-con\">';\r\n                popDom += '<iframe height=\"100%\" width=\"100%\" src=\"http://player.youku.com/embed/' + vdsrc + '\" frameborder=0 allowfullscreen></iframe>';\r\n                popDom += '</div>';\r\n                popDom += '<div class=\"qz-video-bar\"><a class=\"qz-video-pop-close qzVideoPopClose\"></div></a>';\r\n                popDom += '</div>';\r\n                $('body').append(popDom);\r\n                var $pop = $('.qzVideoPop');\r\n                setTimeout(function () {\r\n                    $pop.addClass('cur');\r\n                }, 10);\r\n                function closePop() {\r\n                    $pop.removeClass('cur');\r\n                    setTimeout(function () {\r\n                        $pop.remove();\r\n                    }, 250);\r\n                }\r\n                $pop.on('click', closePop);\r\n                $pop.on('click', 'iframe', function (event) {\r\n                    event.stopPropagation();\r\n                });\r\n            }\r\n            $('.qzVideoPopBtn').on('click', function () {\r\n                var $this = $(this), vdurl = $this.data('href'), vdsrc = '';\r\n                var ykSign = 'http://v.youku.com/v_show/id_', ykIndexOfBegin = vdurl.indexOf(ykSign) + ykSign.length, ykIndexOfEnd = vdurl.indexOf('==.html');\r\n                vdsrc = vdurl.substring(ykIndexOfBegin, ykIndexOfEnd);\r\n                videoPop(vdsrc);\r\n            })\r\n        },\r\n        //百度分享弹窗\r\n        popBaiduShare:function (url,text) {\r\n            var that = this;\r\n            function createPop() {\r\n                var popDom = '';\r\n                popDom += '<div class=\"club-pop-baidu-mask clubPopBaidu clubPopBaiduClose\"></div>';\r\n                popDom += '<div class=\"club-pop-baidu-main clubPopBaidu\">';\r\n                popDom += '<div class=\"club-pop-baidu-head\">分享</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-body\">';\r\n                popDom += '<div class=\"club-pop-baidu-btns bdsharebuttonbox\" data-tag=\"share_1\"><a class=\"bds_tsina\" data-cmd=\"tsina\"></a><a class=\"bds_sqq\" data-cmd=\"sqq\"></a><a class=\"bds_qzone\" data-cmd=\"qzone\"></a><a class=\"bds_more\" data-cmd=\"more\"></a><a class=\"bds_count\" data-cmd=\"count\"></a></div>';\r\n                popDom += '</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-foot\"><a class=\"clubPopBaiduClose\">取消</a></div>';\r\n                popDom += '</div>';\r\n                return popDom;\r\n            }\r\n\r\n            function initBaiduShare() {\r\n                var baiduSrc = 'http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5);\r\n                window._bd_share_config = {\r\n                    common : {\r\n                        bdText : text,\r\n                        bdDesc : text,\r\n                        bdUrl : url\r\n                    },\r\n                    share : [{\r\n                        \"tag\" : \"share_1\",\r\n                        \"bdSize\" : 32\r\n                    }]\r\n                };\r\n                if(typeof _bd_share_main === 'object'){\r\n                    _bd_share_main.init();\r\n                }else{\r\n                    $.getScript(baiduSrc);\r\n                }\r\n            }\r\n\r\n            function closePop() {\r\n                var $pop = $('.clubPopBaidu');\r\n                $pop.removeClass('cur');\r\n                setTimeout(function () {\r\n                    $pop.remove();\r\n                    that.popCommon.close();\r\n                },250);\r\n            }\r\n\r\n            function showPop() {\r\n                var popDom = createPop();\r\n                $('body').append(popDom);\r\n                that.popCommon.open();\r\n                setTimeout(function () {\r\n                    $('.clubPopBaidu').addClass('cur');\r\n                    initBaiduShare();\r\n                },50);\r\n                $('.clubPopBaiduClose').on('click',function () {\r\n                    closePop();\r\n                });\r\n            }\r\n\r\n            showPop();\r\n        },\r\n        //global bind\r\n        globalBind:function () {\r\n            var $main = $('#qzMain'),that = this;\r\n            $main.on('click','.qzBtnShare',function () {\r\n                var $this = $(this),sharetext = $this.data('sharetext'),shareurl = $this.data('shareurl');\r\n                that.popBaiduShare(shareurl,sharetext);\r\n            })\r\n        },\r\n        //入口\r\n        main: function () {\r\n            //设置屏幕缩放\r\n            qzFunc.setRem();\r\n            //插入图片弹层，只需执行一次\r\n            qzFunc.addSwpOnce();\r\n            //开启评论\r\n            qzFunc.addComment();\r\n            //开启发布/参与\r\n            qzFunc.addContext();\r\n            //列表切换导航\r\n            qzFunc.tabNav();\r\n            qzFunc.infiniteLoad('#qzCardList', function (tar, tarInsert) {\r\n                tarInsert.getClub();\r\n            });\r\n            //开启 内容单页 跳转功能\r\n            qzFunc.pageGoto();\r\n            qzFunc.globalBind();\r\n            $(window).resize(function () {\r\n                qzFunc.setRem();\r\n            });\r\n        }\r\n    };\r\n    $.fn.UserOnline = function (fun) {\r\n        $.ajax({\r\n            type: \"GET\", dataType: \"jsonp\", url: \"http://i.gamersky.com/api/logincheck\",\r\n            success: function (responseJson) {\r\n                if (responseJson.status !== \"ok\") {\r\n                    $(\".ymw-loginpop-btns\").insertYmwLoginPop();\r\n                    $(\".ymw-loginpop-btns\").QZloginForm();\r\n                }\r\n                else {\r\n                    fun(responseJson);\r\n                }\r\n            }\r\n        })\r\n    };\r\n    $.fn.QZloginForm = function () {\r\n        var $this = $(this);\r\n        $this.on(\"click\", \"#qqLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"http://i.gamersky.com/oauth/authorizelogin?authorizetype=qq&returnUrl=\" + encodeURI(returnUrl);\r\n        }).on(\"click\", \"#sinaLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"http://i.gamersky.com/oauth/authorizelogin?authorizetype=sina&returnUrl=\" + encodeURI(returnUrl);\r\n        })\r\n    };\r\n    $.fn.insertYmwLoginPop = function () {\r\n        $(\".gsZpPopLoginClose,.gs_zp_pop_login\").show();\r\n        $('.gsZpPopLoginClose').on('click', function () {\r\n            $(\".gs_zp_pop_login,.gsZpPopLoginClose\").hide();\r\n        })\r\n    };\r\n    $.fn.selectPhoto = function () {\r\n        return this.each(function () {\r\n            $(this).bind(\"click\", function () {\r\n                $(\"#fileupload\").trigger(\"click\");\r\n                $('#fileupload').fileupload({\r\n                    type: 'post',\r\n                    dataType: 'json',\r\n                    crossDomain: true,\r\n                    maxFileSize: '5000000',//5M\r\n                    url: 'http://i.gamersky.com/uploadpic/index',\r\n                    done: function (e, data) {\r\n                        var result = data.result;\r\n                        if (result.status == \"ok\") {\r\n                            var count = $(\".qz-pic-list-li .qz-img-remove\").length + 1;\r\n                            if (count > 9) {\r\n                                alert(\"最多只能传9张\");\r\n                                $(\".qz-pic-list .temp:first\").remove();\r\n                            }\r\n                            else {\r\n                                if (count == 9) {\r\n                                    $(\".qz-pic-list-add\").parent().css(\"display\", \"none\");\r\n                                }\r\n                                var html = \"<img src='\" + result.tiny + \"' data-original='\" + result.original + \"' data-height=\\\"\" + result.height + \"\\\" data-width=\\\"\" + result.width + \"\\\" data-type=\\\"\" + result.imageclass + \"\\\"><a class='qz-img-remove'></a>\";\r\n                                $(\".qz-pic-list .temp:first\").removeClass(\"temp\").html(html);\r\n\r\n                            }\r\n                            $(\".qz-pic-list .qz-img-remove\").each(function () {\r\n                                $(this).unbind(\"click\");\r\n                                $(this).bind(\"click\", function () {\r\n                                    var original = $(this).parents(\".pic\").find(\"img\").attr(\"data-original\");\r\n                                    var len = $(\".qz-pic-list-li\").not(\":last\").length;\r\n                                    $(this).parent(\".qz-pic-list-li\").remove();\r\n                                    $.ajax({\r\n                                        type: \"get\", dataType: \"json\", url: \"http://i.gamersky.com/uploadpic/delete?origin=\" + original,\r\n                                        data: {},\r\n                                        success: function (responseJson) {\r\n                                        }\r\n                                    });\r\n                                    if (len < 9) {\r\n                                        $(\".qz-pic-list-add\").parent().css(\"display\", \"block\");\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        else {\r\n                            alert(\"包含不支持的文件格式\");\r\n                            $(\".qz-pic-list .temp:first\").remove();\r\n\r\n                        }\r\n                    },\r\n                    change: function (e, data) {\r\n                        var i = 0;\r\n                        var settingSize = parseInt($(\"#fileupload\").attr(\"data-imagesize\"));\r\n                        var settingSizeMb = settingSize / 1024;\r\n                        $.each(data.files, function (index, item) {\r\n                            if (item.size / 1024 > settingSize && i <= 0) {\r\n                                i += 1;\r\n                                alert(\"图片容量超过\" + settingSizeMb + \"MB，无法上传！\");\r\n                            }\r\n                            else {\r\n                                if (item.size / 1024 <= settingSize) {\r\n                                    var html = '<div class=\"qz-pic-list-li temp\"><img src=\"http://image.gamersky.com/webimg15/user/club/pc/loading.gif\" ></div>';\r\n                                    $(\".qz-pic-list-li:first\").before(html);\r\n                                }\r\n                            }\r\n                        });\r\n                    },\r\n                });\r\n            });\r\n        })\r\n    };\r\n    $.fn.fabuSubmit = function (beforeOpenSt) {\r\n        return this.each(function () {\r\n            var $div = $(this), maxnum = parseInt($div.find(\".maxNum\").html());\r\n            var $textarea = $div.find(\".mathIpt\");\r\n            var minH = $textarea.height(), rowH = parseInt($textarea.css(\"line-height\"));//行高\r\n            var maxH = rowH * 15; //最小高度\r\n\r\n            $textarea.textareaAutoHeight({ minHeight: minH, maxHeight: maxH });//文本框自适应高度\r\n            $div.on(\"focus\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"placeholder\");\r\n                $this.attr(\"data-val\", htm).removeAttr(\"placeholder\").parent().addClass(\"cur\");\r\n            }).on(\"blur\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"data-val\");\r\n                $this.attr(\"placeholder\", htm).parent().removeClass(\"cur\");\r\n            }).on(\"keyup blur\", \".mathIpt\", function () {\r\n                var len = this.value.length;\r\n                this.value = this.value.substr(0, maxnum);\r\n                $div.find(\".curNum\").html(len);\r\n                $div.find(\".fabu-num\").css(\"display\", len > 0 ? 'block' : '');\r\n            });\r\n\r\n            //提交发布\r\n            $div.on(\"click\", \".qzPopSmt\", function () {\r\n                if ($(this).attr(\"data-isclick\") == 'true') {\r\n                    return;\r\n                }\r\n                $(this).attr(\"data-isclick\", true);\r\n                var $lipic = $(\".qz-pic-list-li:not(.temp)\");\r\n                var $fabuVideo = $(\".fabuVideo\");\r\n                var valHtm = '', picHtm = '', videoHtm = '';\r\n                var valcon = $(\".mathIpt\").val();\r\n\r\n                //处理图片\r\n                var images = \"\";\r\n                var len = $lipic.length > 9 ? 9 : $lipic.length - 1;\r\n                if (len > 0) {\r\n                    images = [];\r\n                    for (var i = 0; i < len; i++) {\r\n                        var type = $lipic.eq(i).find(\"img\").attr(\"data-type\");\r\n                        var src = $lipic.eq(i).find(\"img\").attr(\"src\");\r\n                        var small = src.replace(\"tiny\", \"small\");\r\n                        var origin = src.replace(\"tiny\", \"origin\");\r\n                        var tinysquare = src.replace(\"tiny\", \"tinysquare\");\r\n                        if (type == \"gif\") {\r\n                            origin = origin.replace(\".jpg\", \".gif\");\r\n                        }\r\n                        var height = $lipic.eq(i).find(\"img\").attr(\"data-height\");\r\n                        var width = $lipic.eq(i).find(\"img\").attr(\"data-width\");\r\n                        images.push({ \"tiny\": src, \"tinysquare\": tinysquare, \"small\": small, \"origin\": origin, \"height\": height, \"width\": width, \"imageType\": type });\r\n                    }\r\n                }\r\n\r\n                //判断视频是否添加\r\n                var videos = \"\";\r\n                if ($fabuVideo.length > 0) {\r\n                    var avvid = '', avtit = '', avurl = '', avimg = '', avname = '';\r\n                    if ($fabuVideo.attr(\"data-tit\") == undefined) {\r\n                        avtit = '视频链接'; //视频标题\r\n                    } else {\r\n                        avvid = $fabuVideo.attr(\"data-vid\"); //视频id\r\n                        avtit = $fabuVideo.attr(\"data-tit\"); //视频标题\r\n                        avimg = $fabuVideo.attr(\"data-img\"); //视频图片\r\n                        avname = $fabuVideo.attr(\"data-sitename\"); //视频图片\r\n                    }\r\n                    avurl = $fabuVideo.attr(\"data-url\"); //视频地址\r\n                    videos = { \"image\": avimg, \"title\": avtit, \"videoUrl\": avurl, \"videoVid\": avvid, \"siteName\": avname };\r\n                }\r\n                //如果图片和视频为空就判断输入框是为空\r\n                if (images == '' && videos == '' && !isTrim(valcon)) { alert(\"你还没有输入内容!\"); return; }\r\n                //上传图片或添加视频后，空内容也可以提交，否则空内容不可以提交;\r\n                var jsondata = {\r\n                    content: valcon,\r\n                    images: images,\r\n                    videos: videos,\r\n                    clubId: clubId,\r\n                    device: 1\r\n                };\r\n                $.ajax({\r\n                    type: \"post\",\r\n                    dataType: \"json\",\r\n                    crossDomain: true,\r\n                    xhrFields: {\r\n                        withCredentials: true\r\n                    },\r\n                    url: \"http://i.gamersky.com/club/api/addclubcontent\",\r\n                    data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                    success: function (result) {\r\n                        if (result.dataType == \"ok\") {\r\n                            $(this).attr(\"data-isclick\", false);\r\n                            $(\".mathIpt\").val(\"\");\r\n                            var html = qzFunc.createCard(result.cardgroup);\r\n                            $(\"#qzCardList\").prepend(html);\r\n                            qzFunc.photoSwp();\r\n                            //点赞\r\n                            $(\".qzBtnLike\").like();\r\n                            $(\".qzBtnLike\").addLike();\r\n                            $(\".qzBtnComment\").commentCount();\r\n                            //var scrolltopval = $('html').scrollTop();\r\n                            $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                            setTimeout(function () {\r\n                                $(\".qzPop\").remove();\r\n                            }, 250);\r\n                        }\r\n                        else {\r\n                            alert(\"发布失败，请重试！\");\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n    //获取点赞数据\r\n    $.fn.like = function () {\r\n        var support = \"\";\r\n        $(this).each(function () {\r\n            if (support != \"\") {\r\n                support = support + \",\"\r\n            }\r\n            support = support + $(this).attr(\"data-clubcontentid\");\r\n        });\r\n        var jsondata = {\r\n            clubContentId: support\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"http://i.gamersky.com/club/api/getlike\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    var body = $.parseJSON(data.body);\r\n                    $.each(body, function (index, value) {\r\n                        $(\".qzBtnLike[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                            $(this).find(\"b\").html(value.digg);\r\n                            $(this).attr(\"data-likecount\", value.digg);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    //添加点赞\r\n    $.fn.addLike = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.unbind(\"click\");\r\n            $this.click(function (event) {\r\n                event.preventDefault();\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok') {\r\n                        var Id = $this.attr(\"data-clubcontentid\");\r\n                        var jsondata = {\r\n                            clubContentId: Id,\r\n                            fromDevice: 1,\r\n                        };\r\n                        $.ajax({\r\n                            type: \"get\", dataType: \"jsonp\", url: \"http://i.gamersky.com/club/api/addlike\",\r\n                            data: { jsondata: JSON.stringify(jsondata) },\r\n                            success: function (result) {\r\n                                if (result.status == \"err\") {\r\n                                    alert(result.body);\r\n                                }\r\n                                else {\r\n                                    var m = parseInt($this.find(\"b\").html()) + 1;\r\n                                    $this.find(\"b\").html(m);\r\n                                    $(\".tabNavCl a\").eq(1).find(\"i\").html(m);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n            });\r\n        });\r\n    };\r\n    $.fn.commentCount = function () {\r\n        var support = \"\";\r\n        $(this).each(function () {\r\n            if (support != \"\") {\r\n                support = support + \",\"\r\n            }\r\n            support = support + $(this).attr(\"data-clubcontentid\");\r\n        });\r\n        var jsondata = {\r\n            clubContentId: support\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"http://i.gamersky.com/club/api/getcommentcount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    var body = $.parseJSON(data.body);\r\n                    $.each(body, function (index, value) {\r\n                        $(\".qzBtnComment[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                            $(this).html(value.commentCount);\r\n                            $(this).attr(\"data-commcount\", value.commentCount);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    //发布评论\r\n    $.fn.addComment = function (beforeOpenSt) {\r\n        var $this = $(this);\r\n        if ($this.attr(\"data-isclick\") == 'true') {\r\n            return;\r\n        }\r\n        $this.attr(\"data-isclick\", true);\r\n        var text = $.trim($this.parent().siblings(\".pop-con\").find(\".mathIpt\").val());\r\n        var userId = $this.data(\"userid\");\r\n        var clubContentId = $this.data(\"clubcontentid\");\r\n        var replyCommentId = $this.data(\"commentid\");\r\n        if (text == \"\") {\r\n            alert(\"评论不能为空！\");\r\n            return;\r\n        }\r\n        else if (text.length >= 5000) {\r\n            alert(\"评论不能超过5000个字符！\");\r\n            return;\r\n        }\r\n        else {\r\n            var jsondata = {\r\n                userId: userId,\r\n                clubContentId: clubContentId,\r\n                content: text,\r\n                replyId: replyCommentId,\r\n                fromDevice: 1\r\n            };\r\n            $.ajax({\r\n                type: \"post\",\r\n                dataType: \"json\",\r\n                crossDomain: true,\r\n                xhrFields: {\r\n                    withCredentials: true\r\n                },\r\n                url: \"http://i.gamersky.com/club/api/addcomment\",\r\n                data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                success: function (result) {\r\n                    if (result.dataType == \"ok\") {\r\n                        $this.attr(\"data-isclick\", false);\r\n                        $(\".qzBtnComment[data-clubcontentid=\" + clubContentId + \"]\").html(\"1\").attr(\"data-commcount\", 1);\r\n                        //var scrolltopval = $(\".qzPop \").scrollTop();\r\n                        $(\".qzPop \").removeClass('cur');\r\n                        $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                        setTimeout(function () {\r\n                            $(\".qzPop \").remove();\r\n                        }, 250);\r\n                    }\r\n                    else {\r\n                        alert(result.body);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    $.fn.getClub = function (callback) {\r\n        return this.each(function () {\r\n            var $this = $(this),\r\n                cfg = $(\".qzNavFx a.cur\").attr(\"data-cfg\"),\r\n                contentType = clubConfig.listNavSetter[cfg].type,\r\n                sort = clubConfig.listNavSetter[cfg].sort,\r\n                pageIndex = parseInt($this.attr(\"data-pageIndex\")) + 1,\r\n                pageSize = $this.attr(\"data-pageSize\"),\r\n                loading = $this.attr(\"data-loading\");\r\n            if (loading == \"true\") {\r\n                return;\r\n            }\r\n            $this.attr(\"data-loading\", \"true\");\r\n            var length = $this.find(\".qzCard\").length;\r\n            var index = 0;\r\n            var excludeIds = $this.find(\".qzCard:first\").attr(\"data-cid\");\r\n            if (excludeIds ==undefined || excludeIds==null){\r\n                excludeIds=\"\"\r\n            }\r\n            excludeIds+=\",\";\r\n            if (length >=50) {\r\n                index = length - 50;\r\n            }\r\n            $this.find(\".qzCard:gt(\" + index + \")\").each(function () {\r\n                excludeIds += $(this).attr(\"data-cid\") + \",\";\r\n            });\r\n            var jsondata = {\r\n                contentType: contentType,\r\n                sort: sort,\r\n                pageIndex: pageIndex,\r\n                pageSize: pageSize,\r\n                clubId: clubId,\r\n                topicId: topicId,\r\n                excludeIds: excludeIds\r\n            };\r\n            $this.attr(\"data-pageIndex\", pageIndex);\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: \"http://i.gamersky.com/club/api/getwebcallclubcontent\",\r\n                data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                beforeSend: function () {\r\n                    //插入加载动画\r\n                    $(\".qz-loadnull,.qz-loaded\").remove();\r\n                    $this.append(qzConfig.loadingDom);\r\n                },\r\n                success: function (result) {\r\n                    if (pageIndex == 1) {\r\n                        $this.attr(\"data-clubname\", result.clubName).attr(\"data-topic\", result.topic);\r\n                    }\r\n                    if (result.dataType == \"ok\") {\r\n                        $this.attr(\"data-loading\", \"false\");\r\n                        $this.find('.qz-loading').remove();\r\n                        var len = result.cardgroup.length;\r\n                        if (pageIndex == 1 && len == 0) {\r\n                            $this.html(qzConfig.loadnullDom).attr('data-infiload', 'close');\r\n                        }\r\n                        else if (pageIndex == 1 && len > 0) {\r\n                            qzFunc.insertCard($this, result.cardgroup);\r\n                            $this.attr(\"data-infiload\", \"open\");\r\n                            qzConfig.isCanLoading = true;\r\n                        }\r\n                        else if (pageIndex > 1 && len > 0) {\r\n                            qzFunc.appendCard($this, result.cardgroup);\r\n                            $this.attr(\"data-infiload\", \"open\");\r\n                            qzConfig.isCanLoading = true;\r\n                        }\r\n                        else {\r\n                            $this.attr('data-infiload', 'close').append(qzConfig.loadedDom);\r\n                        }\r\n                        $(\".qzBtnLike\").like();\r\n                        $(\".qzBtnLike\").addLike();\r\n                        $(\".qzBtnComment\").commentCount();\r\n                    }\r\n                    else {\r\n                        $this.find('.qz-loading').remove();\r\n                        qzConfig.isCanLoading = false;\r\n                        if (pageIndex > 1) {\r\n                            $this.attr('data-loading', 'true').append(qzConfig.loadedDom);\r\n                        }\r\n                        else {\r\n                            $this.attr('data-loading', 'true').html(qzConfig.loadnullDom);\r\n                        }\r\n                    }\r\n                    if (typeof callback === 'function') {\r\n                        callback && callback();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    };\r\n    $.fn.removeTarget = function () {\r\n        return this.each(function () {\r\n            $(this).find(\"a\").attr(\"target\", \"_self\");\r\n        })\r\n    }\r\n    //获取参与人数\r\n    $.fn.joinCount = function () {\r\n        var jsondata = {\r\n            clubId: clubId,\r\n            topicId: topicId\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"http://i.gamersky.com/club/api/getjoincount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                $(\".joinCount\").find(\"p span\").eq(0).html(data.join + \"人\");\r\n                $(\".joinCount\").find(\"p span\").eq(1).html(data.clubContent);\r\n            }\r\n        });\r\n    };\r\n    $.fn.showNav = function () {\r\n        var that = this;\r\n        return this.each(function () {\r\n            var jsondata = {\r\n                clubId: clubId,\r\n                topicId: topicId\r\n            };\r\n            $.ajax({\r\n                type: \"get\", dataType: \"jsonp\", url: \"http://i.gamersky.com/club/api/isshownav\",\r\n                data: { jsondata: JSON.stringify(jsondata) },\r\n                success: function (data) {\r\n                    if (data.isElite) {\r\n                        $(that).find('a[data-cfg=\"best\"]').css(\"display\",\"block\");\r\n                    }\r\n                    var icon;\r\n                    if(clubId>0){\r\n                        icon = data.clubWapIcon;\r\n                    }\r\n                    if($.trim(topicId) !== ''){\r\n                        icon = data.topicWapIcon;\r\n                    }\r\n                    $(\"#qzMain .icon img\").attr(\"src\",icon);\r\n                }\r\n            });\r\n        })\r\n    };\r\n    qzFunc.main();\r\n    $(document).ready(function () {\r\n        $('#qzCardList').getClub();\r\n        $(\".qzNavFx\").showNav();\r\n        $(\".joinCount\").joinCount();\r\n        var url = \"\";\r\n        if (clubId > 0) {\r\n            $(\".qwqz\").html(\"前往圈子\");\r\n            url = \"http://i.gamersky.com/m/club/\" + clubId + \"\";\r\n        }\r\n        if (topicId > 0) {\r\n            $(\".qwqz\").html(\"前往话题\");\r\n            url = clubId > 0 ? \"http://i.gamersky.com/m/topic/\" + topicId + \"?club=\" + clubId + \"\" : \"http://i.gamersky.com/m/topic/\" + topicId + \"\";\r\n        }\r\n        $(\".qwqz\").attr(\"href\", url);\r\n    });\r\n})(jQuery);"]}