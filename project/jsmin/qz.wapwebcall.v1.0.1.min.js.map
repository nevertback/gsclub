{"version":3,"sources":["qz.wapwebcall.v1.0.1.min.js"],"names":["$","clubId","attr","topicId","clubConfig","listNavSetter","new","sort","type","hot","best","isTrim","s","replace","fn","extend","textareaAutoHeight","options","this","_options","minHeight","maxHeight","init","p","parseFloat","height","keyup","resetHeight","change","focus","_minHeight","_maxHeight","browser","msie","h","scrollHeight","scrollTop","css","qzConfig","isCanLoading","loadingDom","loadedDom","loadnullDom","qzFunc","setRem","setDadHeight","scaleHeight","innerHt","$qzMain","pw","$clubDad","window","width","scaleSize","parseInt","insertStyle","append","margin","find","transform-origin","transform","setInterval","font-size","popCommon","open","addClass","close","removeClass","createCard","cdp","cardDom","cardid","head","user","vauth","createtime","spectop","specvalue","url","isVideo","text","video","src","videoTitle","piclist","length","each","i","item","ext","large","origin","size","undefined","picbig","picType","pic","fromUrl","from","workShareText","substring","addSwpOnce","swp","photoSwp","initPhotoSwipeFromDOM","gallerySelector","parseThumbnailElements","el","figureEl","linkEl","thumbElements","childNodes","numNodes","items","nodeType","children","getAttribute","split","w","ori","title","innerHTML","msrc","push","closest","parentNode","onThumbnailsClick","e","event","preventDefault","returnValue","eTarget","target","srcElement","clickedListItem","tagName","toUpperCase","index","clickedGallery","numChildNodes","nodeIndex","openPhotoSwipe","galleryElement","disableAnimation","fromURL","setOrigin","num","gallery","pswpElement","shareEl","fullscreenEl","zoomEl","bgOpacity","showHideOpacity","galleryUID","history","tapToClose","getThumbBoundsFn","thumbnail","getElementsByTagName","pageYScroll","pageYOffset","document","documentElement","rect","getBoundingClientRect","x","left","y","top","galleryPIDs","j","pid","isNaN","showAnimationDuration","PhotoSwipe","PhotoSwipeUI_Default","listen","getCurrentIndex","animate","opacity","galleryElements","querySelectorAll","l","setAttribute","onclick","insertCard","tar","dt","insDom","html","removeTarget","openVideoPop","appendCard","addContext","insertContext","scrolltopval","setAreaSize","$qzPop","on","val","textsth","closePop","setTimeout","remove","topic","data","clubname","comDom","selectPhoto","fabuSubmit","UserOnline","response","status","st","addComment","insertComment","cid","commentId","rename","userId","placeholder","$this","count","uerId","location","href","addLike","infiniteLoad","callback","loadFunc","tarInsert","scrollJudge","dh","wh","scroll","tabNav","navFunc","fixNav","navTop","$navPos","offset","srlTop","$navWrap","scrollLoading","$html","hh","navSt","scrollLoaded","clearTimeout","loadedTimer","$nav","tarCon","getClub","pageGoto","openId","stopPropagation","videoPop","vdsrc","$pop","popDom","vdurl","ykSign","ykIndexOfBegin","indexOf","ykIndexOfEnd","popBaiduShare","createPop","initBaiduShare","baiduSrc","Date","_bd_share_config","common","bdText","bdDesc","bdUrl","share","tag","bdSize","_bd_share_main","getScript","that","showPop","globalBind","$main","sharetext","shareurl","main","resize","fun","ajax","dataType","success","responseJson","insertYmwLoginPop","QZloginForm","returnUrl","encodeURI","show","hide","bind","trigger","fileupload","crossDomain","maxFileSize","done","result","alert","parent","tiny","original","imageclass","unbind","parents","len","not","settingSize","settingSizeMb","files","before","beforeOpenSt","$div","maxnum","$textarea","minH","rowH","maxH","htm","removeAttr","value","substr","$lipic","$fabuVideo","valcon","images","eq","small","tinysquare","imageType","videos","avvid","avtit","avurl","avimg","avname","image","videoUrl","videoVid","siteName","jsondata","content","device","xhrFields","withCredentials","JSON","stringify","cardgroup","prepend","like","commentCount","support","clubContentId","body","parseJSON","Id","digg","click","fromDevice","m","trim","siblings","replyCommentId","replyId","cfg","contentType","pageIndex","pageSize","loading","excludeIds","beforeSend","clubName","joinCount","join","clubContent","showNav","isElite","icon","clubWapIcon","topicWapIcon","ready","jQuery"],"mappings":"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","file":"qz.wapwebcall.v1.0.1.min.js","sourcesContent":["(function ($) {\r\n    var clubId = $(\"#qzMain\").attr(\"clubId\"), topicId = $(\"#qzMain\").attr(\"topicId\"), topic = $(\"#qzMain\").attr(\"topic\");\r\n    var clubConfig = {\r\n        //卡片列表排序方式\r\n        listNavSetter:{\r\n            //最新\r\n            new:{\r\n                sort:1,\r\n                type:0\r\n            },\r\n            //最热\r\n            hot:{\r\n                sort:2,\r\n                type:0\r\n            },\r\n            //精品\r\n            best:{\r\n                sort:1,\r\n                type:1\r\n            }\r\n        }\r\n    };\r\n    //清除空格\r\n    var isTrim = function (s) {\r\n        if (typeof (s) == 'undefined') {\r\n            return false;\r\n        }\r\n        return s.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n    };\r\n    $.fn.extend({\r\n        //文本框自适应高度\r\n        textareaAutoHeight: function (options) {\r\n            this._options = { minHeight: 0, maxHeight: 1000 }\r\n            this.init = function () {\r\n                for (var p in options) {\r\n                    this._options[p] = options[p];\r\n                }\r\n                if (this._options.minHeight == 0) {\r\n                    this._options.minHeight = parseFloat($(this).height());\r\n                }\r\n                for (var p in this._options) {\r\n                    if ($(this).attr(p) == null) {\r\n                        $(this).attr(p, this._options[p]);\r\n                    }\r\n                }\r\n                $(this).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight);\r\n            }\r\n            this.resetHeight = function () {\r\n                var _minHeight = parseFloat($(this).attr(\"minHeight\"));\r\n                var _maxHeight = parseFloat($(this).attr(\"maxHeight\"));\r\n\r\n                if (!$.browser.msie) { $(this).height(0); }\r\n                var h = parseFloat(this.scrollHeight);\r\n                h = h < _minHeight ? _minHeight : h > _maxHeight ? _maxHeight : h;\r\n                $(this).height(h).scrollTop(h);\r\n                $(this).css(\"overflow-y\", h >= _maxHeight ? \"scroll\" : \"hidden\");\r\n            }\r\n            this.init();\r\n        }\r\n    });\r\n    var qzConfig = {\r\n        isCanLoading: true,\r\n        loadingDom: '<div class=\"qz-loading\">正在加载</div>',\r\n        loadedDom: '<div class=\"qz-loaded\">全部加载完成</div>',\r\n        loadnullDom: '<div class=\"qz-loadnull\">还没有内容</div>'\r\n    };\r\n    var qzFunc = {\r\n        //设置屏幕缩放\r\n        setRem: function () {\r\n            var pw = $(window).width(),$clubDad = $('#QZCMT'),scaleSize = $clubDad.attr('data-scale'),$qzMain = $('#qzMain');\r\n            if (pw >= 640) {\r\n                pw = 640;\r\n            }\r\n            if(parseInt(scaleSize) === 720){\r\n                var insertStyle = '';\r\n                insertStyle += '<style>';\r\n                insertStyle += '.qz-video-pop .qz-video-pop-con iframe{width:7.2rem;height:4.05rem}\\n' +\r\n                    '.ymw-backtotop a{width:.7rem;height:.7rem}\\n' +\r\n                    '.qzFixSmt{bottom:1.1rem;width:.7rem;height:.7rem;background-size:.3375rem .315rem;background-position:.22rem .2025rem}\\n';\r\n                insertStyle += '</style>';\r\n                $('head').append(insertStyle);\r\n                $qzMain.css({\r\n                    margin:0\r\n                });\r\n                $qzMain.find('.qz-card-top,.qz-box').css({\r\n                    'transform-origin':'0 0',\r\n                    'transform':'scale('+720/640+')',\r\n                    'margin':0\r\n                });\r\n                function setDadHeight() {\r\n                    var innerHt = $qzMain.height(),scaleHeight;\r\n                    scaleHeight = (innerHt+0.15/6.4*pw)*720/640;\r\n                    $clubDad.css('height',scaleHeight);\r\n                }\r\n                setInterval(setDadHeight,200);\r\n            }else{\r\n                $('html').css({ 'font-size': pw / 6.4 + 'px' });\r\n            }\r\n        },\r\n        //弹窗公用方法\r\n        popCommon:{\r\n            open:function () {\r\n                $('html').addClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','none');\r\n            },\r\n            close:function () {\r\n                $('html').removeClass('hideScroll');\r\n                $('.ymw-backtotop').css('display','block');\r\n            }\r\n        },\r\n        //构建卡片\r\n        createCard: function (cdp) {\r\n            var cardDom = '';\r\n            cardDom += '<div class=\"qz-card qzCard\" data-cid=\"' + cdp.cardid + '\">';\r\n            cardDom += '<header><a class=\"head\"><img src=\"' + cdp.head + '\" alt=\"head\"></a>';\r\n            cardDom += '<div class=\"info\"><h5>';\r\n            cardDom += '<a>' + cdp.user + '</a>';\r\n            if (isTrim(cdp.vauth)) {\r\n                cardDom += '<img src=\"'+ cdp.vauth +'\">';\r\n            }\r\n            cardDom += '</h5><p>';\r\n            cardDom += '<span class=\"time\">' + cdp.createtime + '</span>';\r\n            cardDom += '</p>';\r\n            cardDom += '</div>';\r\n            if (cdp.spectop === true || cdp.specvalue === true) {\r\n                cardDom += '<div class=\"spec-icons\">';\r\n                if (cdp.spectop === true) {\r\n                    cardDom += '<a class=\"spec-top\">置顶</a>';\r\n                }\r\n                if (cdp.specvalue === true) {\r\n                    cardDom += '<a class=\"spec-value\">精</a>';\r\n                }\r\n                cardDom += '</div>';\r\n            }\r\n            cardDom += '</header>';\r\n            cardDom += '<section class=\"detail qzZoneHref\" data-href=\"' + cdp.url + '\">';\r\n            cardDom += '<div class=\"content\">';\r\n            if (cdp.isVideo) {\r\n                cardDom += cdp.text;\r\n                cardDom += '<a href=' + cdp.video.src + ' class=\"link-video\">' + cdp.video.videoTitle + '</a>';\r\n            }\r\n            else {\r\n                cardDom += cdp.text;\r\n            }\r\n            cardDom += '</div>';\r\n            if (cdp.piclist.length > 0) {\r\n                cardDom += '<div class=\"media-pic-list\"><div class=\"clearfix qz-figs qzPicPswp\">';\r\n                $.each(cdp.piclist, function (i, item) {\r\n                    cardDom += '<figure class=\"qzPicPswpBtn';\r\n                    if (item.ext === 'gif') {\r\n                        cardDom += ' gif\"';\r\n                        item.large = item.origin;\r\n                    } else if (item.ext === 'long') {\r\n                        cardDom += ' long\"';\r\n                    }\r\n                    cardDom += '\"><a data-origin=\"' + item.origin + '\"  data-large=\"' + item.large + '\" data-size=\"' + item.size + '\"><img src=\"' + item.url + '\"></a></figure>';\r\n                });\r\n                cardDom += '</div></div>';\r\n            }\r\n            if (cdp.picbig.large != undefined) {\r\n                cdp.picbig.large = cdp.picbig.url;\r\n                var picType = \"\";\r\n                cardDom += '<div class=\"qzPicPswp media-pic';\r\n                if (cdp.picbig.ext === 'gif') {\r\n                    picType = ' gif';\r\n                    cdp.picbig.large = cdp.picbig.origin;\r\n                } else if (cdp.picbig.ext === 'long') {\r\n                    picType = ' long';\r\n                }\r\n                cardDom += '\"><figure class=\"' + picType + '\"><a data-origin=\"' + cdp.picbig.origin + '\" data-large=\"' + cdp.picbig.large + '\" data-size=\"' + cdp.picbig.size + '\"><img src=\"' + cdp.picbig.url + '\" class=\"qzPicPswpBtn\"></a></figure></div>';\r\n            }\r\n            if (cdp.isVideo) {\r\n                cardDom += '<div class=\"media-video\">';\r\n                cardDom += '<a class=\"qzVideoPopBtn\" data-href=\"' + cdp.video.src + '\"><img src=\"' + cdp.video.pic + '\" alt=\"\"></a></div>'\r\n            }\r\n\r\n            cardDom += '</section>';\r\n            if (cdp.fromUrl) {\r\n                cardDom += '<div class=\"from\">来自：<a href=\"' + cdp.fromUrl + '\" >' + cdp.from + '</a></div>';\r\n            }\r\n            cardDom += '<footer>';\r\n            var workShareText = cdp.text.replace(/<[^>]+>/g,\"\").substring(0,200);\r\n            cardDom += '<a class=\"btn-share qzBtnShare\" data-sharetext=\"'+workShareText+'\" data-shareurl=\"'+cdp.url+'\">分享</a>';\r\n            cardDom += '<span></span>';\r\n            cardDom += '<a class=\"btn-comment qzBtnComment\" data-commcount=\"\"  data-clubcontentid=\"' + cdp.cardid + '\"   data-href=\"' + cdp.url + '\">0</a>';\r\n            cardDom += '<span></span>';\r\n            cardDom += '<a class=\"btn-like qzBtnLike\" data-likecount=\"\" data-clubcontentid=\"' + cdp.cardid + '\" ><i></i><b></b></a>';\r\n            cardDom += '</footer>';\r\n            cardDom += '</div>';\r\n            cardDom += '';\r\n            cardDom += '';\r\n            return cardDom;\r\n        },\r\n        //图片弹出层 默认执行,一般情况不需要修改\r\n        addSwpOnce: function () {\r\n            var swp = '<div class=\"pswp pswpClub\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button><a target=\"_blank\" class=\"pswp__button pswpBtnOrigin pswp__single-tap\" title=\"查看原图\"></a> <button class=\"pswp__button pswp__button--share\" title=\"Share\"></button> <button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button> <button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"><div class=\"pswp__share-tooltip\"></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\"></button> <button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\"></button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div>';\r\n            $('body').append(swp);\r\n        },\r\n        //图片弹出层方法 默认执行,一般情况不需要修改\r\n        photoSwp: function () {\r\n            var initPhotoSwipeFromDOM = function (gallerySelector) {\r\n                var parseThumbnailElements = function (el) {\r\n                    var thumbElements = el.childNodes,\r\n                        numNodes = thumbElements.length,\r\n                        items = [],\r\n                        figureEl,\r\n                        linkEl,\r\n                        size,\r\n                        item;\r\n                    for (var i = 0; i < numNodes; i++) {\r\n                        figureEl = thumbElements[i];\r\n                        if (figureEl.nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        linkEl = figureEl.children[0];\r\n                        size = linkEl.getAttribute('data-size').split('x');\r\n                        item = {\r\n                            src: linkEl.getAttribute('data-large'),\r\n                            w: parseInt(size[0], 10),\r\n                            h: parseInt(size[1], 10),\r\n                            ori: linkEl.getAttribute('data-origin')\r\n                        };\r\n                        if (figureEl.children.length > 1) {\r\n                            item.title = figureEl.children[1].innerHTML;\r\n                        }\r\n                        if (linkEl.children.length > 0) {\r\n                            item.msrc = linkEl.children[0].getAttribute('src');\r\n                        }\r\n                        item.el = figureEl;\r\n                        items.push(item);\r\n                    }\r\n                    return items;\r\n                };\r\n                var closest = function closest(el, fn) {\r\n                    return el && (fn(el) ? el : closest(el.parentNode, fn));\r\n                };\r\n                var onThumbnailsClick = function (e) {\r\n                    e = e || window.event;\r\n                    e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n                    var eTarget = e.target || e.srcElement;\r\n                    var clickedListItem = closest(eTarget, function (el) {\r\n                        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');\r\n                    });\r\n                    if (!clickedListItem) {\r\n                        return;\r\n                    }\r\n                    var clickedGallery = clickedListItem.parentNode,\r\n                        childNodes = clickedListItem.parentNode.childNodes,\r\n                        numChildNodes = childNodes.length,\r\n                        nodeIndex = 0,\r\n                        index;\r\n                    for (var i = 0; i < numChildNodes; i++) {\r\n                        if (childNodes[i].nodeType !== 1) {\r\n                            continue;\r\n                        }\r\n                        if (childNodes[i] === clickedListItem) {\r\n                            index = nodeIndex;\r\n                            break;\r\n                        }\r\n                        nodeIndex++;\r\n                    }\r\n                    if (index >= 0) {\r\n                        openPhotoSwipe(index, clickedGallery);\r\n                    }\r\n                    return false;\r\n                };\r\n\r\n                var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {\r\n                    var pswpElement = $('.pswpClub')[0],\r\n                        gallery,\r\n                        options,\r\n                        items;\r\n                    items = parseThumbnailElements(galleryElement);\r\n                    options = {\r\n                        shareEl: false,\r\n                        fullscreenEl: false,\r\n                        zoomEl: false,\r\n                        bgOpacity: 1,\r\n                        showHideOpacity: 0,\r\n                        galleryUID: galleryElement.getAttribute('data-pswp-uid'),\r\n                        history: false,\r\n                        tapToClose:true,\r\n                        getThumbBoundsFn: function (index) {\r\n                            var thumbnail = items[index].el.getElementsByTagName('img')[0],\r\n                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\r\n                                rect = thumbnail.getBoundingClientRect();\r\n                            return { x: rect.left, y: rect.top + pageYScroll, w: rect.width };\r\n                        }\r\n                    };\r\n                    if (fromURL) {\r\n                        if (options.galleryPIDs) {\r\n                            for (var j = 0; j < items.length; j++) {\r\n                                if (items[j].pid == index) {\r\n                                    options.index = j;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            options.index = parseInt(index, 10) - 1;\r\n                        }\r\n                    } else {\r\n                        options.index = parseInt(index, 10);\r\n                    }\r\n                    if (isNaN(options.index)) {\r\n                        return;\r\n                    }\r\n                    if (disableAnimation) {\r\n                        options.showAnimationDuration = 0;\r\n                    }\r\n                    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\r\n                    gallery.init();\r\n                    function setOrigin(num) {\r\n                        $('.pswpClub .pswpBtnOrigin').attr('href', items[num].ori)\r\n                    }\r\n                    gallery.listen('initialZoomIn', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                        $('.pswpClub').animate({ 'opacity': 1 }, 333);\r\n                    });\r\n                    gallery.listen('initialZoomOut', function () {\r\n                        $('.pswpClub').animate({ 'opacity': 0 }, 200);\r\n                    });\r\n                    gallery.listen('afterChange', function () {\r\n                        setOrigin(gallery.getCurrentIndex());\r\n                    });\r\n                };\r\n                var galleryElements = document.querySelectorAll(gallerySelector);\r\n                for (var i = 0, l = galleryElements.length; i < l; i++) {\r\n                    galleryElements[i].setAttribute('data-pswp-uid', i + 1);\r\n                    galleryElements[i].onclick = onThumbnailsClick;\r\n                }\r\n            };\r\n            initPhotoSwipeFromDOM('.qzPicPswp');\r\n        },\r\n        //插入卡片\r\n        insertCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).html(insDom);\r\n            $(\".qzCard .content\").removeTarget();\r\n            qzFunc.photoSwp();\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //加载更多卡片\r\n        appendCard: function (tar, dt) {\r\n            var insDom = '';\r\n            $.each(dt, function (i, item) {\r\n                insDom += qzFunc.createCard(item);\r\n            });\r\n            $(tar).append(insDom);\r\n            $(\".qzCard .content\").removeTarget();\r\n            qzFunc.photoSwp();\r\n            qzFunc.openVideoPop();\r\n        },\r\n        //发布/参与\r\n        addContext: function () {\r\n            function insertContext(scrolltopval) {\r\n                var tar = $(\"#qzCardList\");\r\n                var topic = tar.data(\"topic\"), clubname = tar.data(\"clubname\");\r\n                var comDom = '';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>发布内容<a class=\"qz-pop-close qzPopClose\"></a><a class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\">';\r\n                comDom += '<div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"分享你的游戏心得...\">';\r\n                if (isTrim(topic)) {\r\n                    comDom += topic;\r\n                }\r\n                comDom += '</textarea > <textarea class=\"mathIpt\" rows=\"3\"></textarea></div > ';\r\n                comDom += '<div class=\"clearfix qz-pic-list\">';\r\n                comDom += '<div class=\"qz-pic-list-li\"><label for=\"qzSelectPhoto\" class=\"qz-pic-list-add\"></label></div>';\r\n                comDom += '</div>';\r\n                comDom += '<input id=\"fileupload\"  data-imagesize=\"5120\"   type=\"file\" style=\"display:none\" name=\"files\" method=\"POST\" multiple=\"\">';\r\n                comDom += '</div>';\r\n                comDom += '<footer><label for=\"qzSelectPhoto\" class=\"qz-upload-pic qzUploadPic\">图片</label><select class=\"qz-pop-sel\">';\r\n                comDom += '</select>';\r\n                comDom += '</footer></div>';\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                $(\".qz-pic-list-add,.qzUploadPic\").selectPhoto();\r\n                if (isTrim(clubname)) {\r\n                    $(\".qz-pop-sel\").html(\"<option value='clubId'>发往\" + clubname + \"</option>\");\r\n                }\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                $('.qzPopClose').on('click', closePop);\r\n                $qzPop.fabuSubmit(scrolltopval);\r\n\r\n            }\r\n            $('#qzMain').on('click', '.qzBtnContext', function () {\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok') {\r\n                        var st = $('html').scrollTop();\r\n                        if (st === 0) {\r\n                            st = $('body').scrollTop();\r\n                        }\r\n                        setTimeout(function () {\r\n                            $('html,body').addClass('hideScroll');\r\n                        }, 300);\r\n                        insertContext(st);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        //评论\r\n        addComment: function () {\r\n            function insertComment(scrolltopval, cid, commentId, rename, userId) {\r\n                var comDom = '', placeholder = rename ? '回复 ' + rename + '：' : '我来说两句...';\r\n                comDom += '<div class=\"qz-pop qzPop\">';\r\n                comDom += '<header>评论<a class=\"qz-pop-close qzPopClose\"></a><a data-userId=\"' + userId + '\" data-clubContentId=\"' + cid + '\"  data-commentId=\"' + commentId + '\" class=\"qz-pop-smt qzPopSmt\">发布</a></header>';\r\n                comDom += '<div class=\"pop-con\"><div class=\"pop-srl\"><textarea class=\"realIpt\" placeholder=\"' + placeholder + '\"></textarea><textarea class=\"mathIpt\" rows=\"3\"></textarea></div></div>';\r\n                comDom += '</div>';\r\n                $('body').append(comDom);\r\n                var $qzPop = $('.qzPop');\r\n                setTimeout(function () {\r\n                    $qzPop.addClass('cur');\r\n                }, 10);\r\n                function setAreaSize() {\r\n                    $qzPop.find('.realIpt').on('input', function () {\r\n                        $qzPop.find('.mathIpt').val($qzPop.find('.realIpt').val());\r\n                        var textsth = $qzPop.find('.mathIpt')[0].scrollHeight;\r\n                        $qzPop.find('.realIpt').css('height', textsth);\r\n                    })\r\n                }\r\n                setAreaSize();\r\n                function closePop() {\r\n                    $qzPop.removeClass('cur');\r\n                    $('html,body').removeClass('hideScroll').animate({ scrollTop: scrolltopval }, 0);\r\n                    setTimeout(function () {\r\n                        $qzPop.remove();\r\n                    }, 250);\r\n                }\r\n                $('.qzPopClose').on('click', closePop);\r\n                $('.qzPopSmt').on('click', function () {\r\n                    var context = $qzPop.find('.realIpt').val();\r\n                    $(this).addComment(scrolltopval);\r\n                });\r\n            }\r\n            $('#qzMain').on('click', '.qzBtnComment', function () {\r\n                var $this = $(this);\r\n                $this.UserOnline(function (response) {\r\n                    if (response.status == 'ok') {\r\n                        var st = $('html').scrollTop(),\r\n                            cid = $this.data('clubcontentid'),\r\n                            count = $this.data('commcount'),\r\n                            url = $this.data('href'),\r\n                            uerId = $this.data('userid'),\r\n                            commentId = $this.data('commid'),\r\n                            rename = $this.attr('data-name');\r\n                        if ($('#qzCardContext').length > 0) {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                            return false;\r\n                        }\r\n                        if (count === 0 || count == \"\") {\r\n                            if (st === 0) {\r\n                                st = $('body').scrollTop();\r\n                            }\r\n                            setTimeout(function () {\r\n                                $('html,body').addClass('hideScroll');\r\n                            }, 300);\r\n                            insertComment(st, cid, commentId, rename, uerId);\r\n                        } else {\r\n                            window.location.href = url;\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        //点赞\r\n        addLike: function () {\r\n            $('#qzMain').on('click', '.qzBtnLike', function () {\r\n                var $this = $(this),\r\n                    cid = $this.closest('.qzCard').data('cid'),\r\n                    count = $this.attr('data-likecount');\r\n                if (parseInt($this.attr('data-islike')) === 1) {\r\n                    $this.removeClass('cur').attr('data-islike', '0').attr('data-likecount', parseInt(count) - 1).find('b').html(parseInt(count) - 1);\r\n                } else {\r\n                    $this.addClass('cur').attr('data-islike', '1').attr('data-likecount', parseInt(count) + 1).find('b').html(parseInt(count) + 1);\r\n                }\r\n            })\r\n        },\r\n        //无限加载\r\n        infiniteLoad: function (tar, callback) {\r\n            function loadFunc() {\r\n                var tarInsert = $(tar);\r\n                if (tarInsert.attr('data-infiload') === 'open') {\r\n                    if (typeof callback === 'function') {\r\n                        callback(tar, tarInsert);\r\n                    }\r\n                }\r\n            }\r\n            function scrollJudge() {\r\n                var st = $('html').scrollTop(), dh = $(document).height(), wh = $(window).height();\r\n                if (st === 0) {\r\n                    st = $('body').scrollTop();\r\n                }\r\n                if (st > dh - wh - 100 && st > wh - dh && qzConfig.isCanLoading === true) {\r\n                    qzConfig.isCanLoading = false;\r\n                    loadFunc();\r\n                }\r\n            }\r\n            if ($(tar).length > 0) {\r\n                $(window).scroll(function () {\r\n                    scrollJudge();\r\n                });\r\n            }\r\n        },\r\n        //列表切换\r\n        tabNav: function () {\r\n            function navFunc() {\r\n                var $nav = $('.qzNavFx'),\r\n                    $navWrap = $('.qzNavFxW'),\r\n                    $navPos = $('.qzNavPos'),\r\n                    loadedTimer;\r\n                function fixNav() {\r\n                    var navTop = $navPos.offset().top, srlTop = $('html').scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    if (srlTop >= navTop) {\r\n                        $navWrap.addClass('openQzNavFixed');\r\n                    } else {\r\n                        $navWrap.removeClass('openQzNavFixed');\r\n                    }\r\n                }\r\n                fixNav();\r\n                $(window).scroll(function () {\r\n                    fixNav();\r\n                });\r\n                function scrollLoading() {\r\n                    var $html = $('html'), hh = $html.height(),\r\n                        navSt = $navPos.offset().top, srlTop = $html.scrollTop();\r\n                    if (srlTop === 0) {\r\n                        srlTop = $('body').scrollTop();\r\n                    }\r\n                    $html.css('height', hh);\r\n                    if (srlTop > navSt) {\r\n                        $('html,body').animate({ scrollTop: navSt }, 0);\r\n                    }\r\n                }\r\n                function scrollLoaded() {\r\n                    var $html = $('html');\r\n                    clearTimeout(loadedTimer);\r\n                    loadedTimer = setTimeout(function () {\r\n                        $html.css('height', '');\r\n                    }, 200);\r\n                }\r\n                $nav.find('a').on('click', function () {\r\n                    var $this = $(this), tarCon = '#qzCardList';\r\n                    $nav.find('a').removeClass('cur');\r\n                    $this.addClass('cur');\r\n                    $(tarCon).html(\"\").attr(\"data-pageIndex\", 0).attr(\"data-loading\", false);\r\n                    qzConfig.isCanLoading = false;\r\n                    scrollLoading();\r\n                    $(tarCon).getClub(function () {\r\n                        scrollLoaded();\r\n                    });\r\n                })\r\n            }\r\n            if ($('.qzNavFx').length > 0) {\r\n                navFunc();\r\n            }\r\n        },\r\n        //单页跳转\r\n        pageGoto: function () {\r\n            var openId = $('.qz-card-list');\r\n            openId.on('click', '.qzCard .qzZoneHref', function () {\r\n                var $this = $(this), url = $this.data('href');\r\n                window.location.href = url;\r\n            });\r\n            openId.on('click', '.qzZoneHref figure,.qzZoneHref a', function (event) {\r\n                event.stopPropagation();\r\n            });\r\n        },\r\n        //打开视频弹窗\r\n        openVideoPop: function () {\r\n            function videoPop(vdsrc) {\r\n                var popDom = '';\r\n                popDom += '<div class=\"qz-video-pop qzVideoPop\">';\r\n                popDom += '<div class=\"qz-video-pop-con\">';\r\n                popDom += '<iframe height=\"100%\" width=\"100%\" src=\"//player.youku.com/embed/' + vdsrc + '\" frameborder=0 allowfullscreen></iframe>';\r\n                popDom += '</div>';\r\n                popDom += '<div class=\"qz-video-bar\"><a class=\"qz-video-pop-close qzVideoPopClose\"></div></a>';\r\n                popDom += '</div>';\r\n                $('body').append(popDom);\r\n                var $pop = $('.qzVideoPop');\r\n                setTimeout(function () {\r\n                    $pop.addClass('cur');\r\n                }, 10);\r\n                function closePop() {\r\n                    $pop.removeClass('cur');\r\n                    setTimeout(function () {\r\n                        $pop.remove();\r\n                    }, 250);\r\n                }\r\n                $pop.on('click', closePop);\r\n                $pop.on('click', 'iframe', function (event) {\r\n                    event.stopPropagation();\r\n                });\r\n            }\r\n            $('.qzVideoPopBtn').on('click', function () {\r\n                var $this = $(this), vdurl = $this.data('href'), vdsrc = '';\r\n                var ykSign = '//v.youku.com/v_show/id_', ykIndexOfBegin = vdurl.indexOf(ykSign) + ykSign.length, ykIndexOfEnd = vdurl.indexOf('==.html');\r\n                vdsrc = vdurl.substring(ykIndexOfBegin, ykIndexOfEnd);\r\n                videoPop(vdsrc);\r\n            })\r\n        },\r\n        //百度分享弹窗\r\n        popBaiduShare:function (url,text) {\r\n            var that = this;\r\n            function createPop() {\r\n                var popDom = '';\r\n                popDom += '<div class=\"club-pop-baidu-mask clubPopBaidu clubPopBaiduClose\"></div>';\r\n                popDom += '<div class=\"club-pop-baidu-main clubPopBaidu\">';\r\n                popDom += '<div class=\"club-pop-baidu-head\">分享</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-body\">';\r\n                popDom += '<div class=\"club-pop-baidu-btns bdsharebuttonbox\" data-tag=\"share_1\"><a class=\"bds_tsina\" data-cmd=\"tsina\"></a><a class=\"bds_sqq\" data-cmd=\"sqq\"></a><a class=\"bds_qzone\" data-cmd=\"qzone\"></a><a class=\"bds_more\" data-cmd=\"more\"></a><a class=\"bds_count\" data-cmd=\"count\"></a></div>';\r\n                popDom += '</div>';\r\n\r\n                popDom += '<div class=\"club-pop-baidu-foot\"><a class=\"clubPopBaiduClose\">取消</a></div>';\r\n                popDom += '</div>';\r\n                return popDom;\r\n            }\r\n            function initBaiduShare() {\r\n                var baiduSrc = '//j.gamersky.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5);\r\n                window._bd_share_config = {\r\n                    common : {\r\n                        bdText : text,\r\n                        bdDesc : text,\r\n                        bdUrl : url\r\n                    },\r\n                    share : [{\r\n                        \"tag\" : \"share_1\",\r\n                        \"bdSize\" : 32\r\n                    }]\r\n                };\r\n                if(typeof _bd_share_main === 'object'){\r\n                    _bd_share_main.init();\r\n                }else{\r\n                    $.getScript(baiduSrc);\r\n                }\r\n            }\r\n\r\n            function closePop() {\r\n                var $pop = $('.clubPopBaidu');\r\n                $pop.removeClass('cur');\r\n                setTimeout(function () {\r\n                    $pop.remove();\r\n                    that.popCommon.close();\r\n                },250);\r\n            }\r\n\r\n            function showPop() {\r\n                var popDom = createPop();\r\n                $('body').append(popDom);\r\n                that.popCommon.open();\r\n                setTimeout(function () {\r\n                    $('.clubPopBaidu').addClass('cur');\r\n                    initBaiduShare();\r\n                },50);\r\n                $('.clubPopBaiduClose').on('click',function () {\r\n                    closePop();\r\n                });\r\n            }\r\n\r\n            showPop();\r\n        },\r\n        //global bind\r\n        globalBind:function () {\r\n            var $main = $('#qzMain'),that = this;\r\n            $main.on('click','.qzBtnShare',function () {\r\n                var $this = $(this),sharetext = $this.data('sharetext'),shareurl = $this.data('shareurl');\r\n                that.popBaiduShare(shareurl,sharetext);\r\n            })\r\n        },\r\n        //入口\r\n        main: function () {\r\n            //设置屏幕缩放\r\n            qzFunc.setRem();\r\n            //插入图片弹层，只需执行一次\r\n            qzFunc.addSwpOnce();\r\n            //开启评论\r\n            qzFunc.addComment();\r\n            //开启发布/参与\r\n            qzFunc.addContext();\r\n            //列表切换导航\r\n            qzFunc.tabNav();\r\n            qzFunc.infiniteLoad('#qzCardList', function (tar, tarInsert) {\r\n                tarInsert.getClub();\r\n            });\r\n            //开启 内容单页 跳转功能\r\n            qzFunc.pageGoto();\r\n            qzFunc.globalBind();\r\n            $(window).resize(function () {\r\n                qzFunc.setRem();\r\n            });\r\n        }\r\n    };\r\n    $.fn.UserOnline = function (fun) {\r\n        $.ajax({\r\n            type: \"GET\", dataType: \"jsonp\", url: \"//i.gamersky.com/api/logincheck\",\r\n            success: function (responseJson) {\r\n                if (responseJson.status !== \"ok\") {\r\n                    $(\".ymw-loginpop-btns\").insertYmwLoginPop();\r\n                    $(\".ymw-loginpop-btns\").QZloginForm();\r\n                }\r\n                else {\r\n                    fun(responseJson);\r\n                }\r\n            }\r\n        })\r\n    };\r\n    $.fn.QZloginForm = function () {\r\n        var $this = $(this);\r\n        $this.on(\"click\", \"#qqLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"//i.gamersky.com/oauth/authorizelogin?authorizetype=qq&returnUrl=\" + encodeURI(returnUrl);\r\n        }).on(\"click\", \"#sinaLogin\", function (event) {\r\n            event.preventDefault();\r\n            var returnUrl = window.location.href;\r\n            window.location.href = \"//i.gamersky.com/oauth/authorizelogin?authorizetype=sina&returnUrl=\" + encodeURI(returnUrl);\r\n        })\r\n    };\r\n    $.fn.insertYmwLoginPop = function () {\r\n        $(\".gsZpPopLoginClose,.gs_zp_pop_login\").show();\r\n        $('.gsZpPopLoginClose').on('click', function () {\r\n            $(\".gs_zp_pop_login,.gsZpPopLoginClose\").hide();\r\n        })\r\n    };\r\n    $.fn.selectPhoto = function () {\r\n        return this.each(function () {\r\n            $(this).bind(\"click\", function () {\r\n                $(\"#fileupload\").trigger(\"click\");\r\n                $('#fileupload').fileupload({\r\n                    type: 'post',\r\n                    dataType: 'json',\r\n                    crossDomain: true,\r\n                    maxFileSize: '5000000',//5M\r\n                    url: '//i.gamersky.com/uploadpic/index',\r\n                    done: function (e, data) {\r\n                        var result = data.result;\r\n                        if (result.status == \"ok\") {\r\n                            var count = $(\".qz-pic-list-li .qz-img-remove\").length + 1;\r\n                            if (count > 9) {\r\n                                alert(\"最多只能传9张\");\r\n                                $(\".qz-pic-list .temp:first\").remove();\r\n                            }\r\n                            else {\r\n                                if (count == 9) {\r\n                                    $(\".qz-pic-list-add\").parent().css(\"display\", \"none\");\r\n                                }\r\n                                var html = \"<img src='\" + result.tiny + \"' data-original='\" + result.original + \"' data-height=\\\"\" + result.height + \"\\\" data-width=\\\"\" + result.width + \"\\\" data-type=\\\"\" + result.imageclass + \"\\\"><a class='qz-img-remove'></a>\";\r\n                                $(\".qz-pic-list .temp:first\").removeClass(\"temp\").html(html);\r\n\r\n                            }\r\n                            $(\".qz-pic-list .qz-img-remove\").each(function () {\r\n                                $(this).unbind(\"click\");\r\n                                $(this).bind(\"click\", function () {\r\n                                    var original = $(this).parents(\".pic\").find(\"img\").attr(\"data-original\");\r\n                                    var len = $(\".qz-pic-list-li\").not(\":last\").length;\r\n                                    $(this).parent(\".qz-pic-list-li\").remove();\r\n                                    $.ajax({\r\n                                        type: \"get\", dataType: \"json\", url: \"//i.gamersky.com/uploadpic/delete?origin=\" + original,\r\n                                        data: {},\r\n                                        success: function (responseJson) {\r\n                                        }\r\n                                    });\r\n                                    if (len < 9) {\r\n                                        $(\".qz-pic-list-add\").parent().css(\"display\", \"block\");\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        else {\r\n                            alert(\"包含不支持的文件格式\");\r\n                            $(\".qz-pic-list .temp:first\").remove();\r\n\r\n                        }\r\n                    },\r\n                    change: function (e, data) {\r\n                        var i = 0;\r\n                        var settingSize = parseInt($(\"#fileupload\").attr(\"data-imagesize\"));\r\n                        var settingSizeMb = settingSize / 1024;\r\n                        $.each(data.files, function (index, item) {\r\n                            if (item.size / 1024 > settingSize && i <= 0) {\r\n                                i += 1;\r\n                                alert(\"图片容量超过\" + settingSizeMb + \"MB，无法上传！\");\r\n                            }\r\n                            else {\r\n                                if (item.size / 1024 <= settingSize) {\r\n                                    var html = '<div class=\"qz-pic-list-li temp\"><img src=\"//image.gamersky.com/webimg15/user/club/pc/loading.gif\" ></div>';\r\n                                    $(\".qz-pic-list-li:first\").before(html);\r\n                                }\r\n                            }\r\n                        });\r\n                    },\r\n                });\r\n            });\r\n        })\r\n    };\r\n    $.fn.fabuSubmit = function (beforeOpenSt) {\r\n        return this.each(function () {\r\n            var $div = $(this), maxnum = parseInt($div.find(\".maxNum\").html());\r\n            var $textarea = $div.find(\".mathIpt\");\r\n            var minH = $textarea.height(), rowH = parseInt($textarea.css(\"line-height\"));//行高\r\n            var maxH = rowH * 15; //最小高度\r\n\r\n            $textarea.textareaAutoHeight({ minHeight: minH, maxHeight: maxH });//文本框自适应高度\r\n            $div.on(\"focus\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"placeholder\");\r\n                $this.attr(\"data-val\", htm).removeAttr(\"placeholder\").parent().addClass(\"cur\");\r\n            }).on(\"blur\", \".mathIpt\", function () {\r\n                var $this = $(this), htm = $this.attr(\"data-val\");\r\n                $this.attr(\"placeholder\", htm).parent().removeClass(\"cur\");\r\n            }).on(\"keyup blur\", \".mathIpt\", function () {\r\n                var len = this.value.length;\r\n                this.value = this.value.substr(0, maxnum);\r\n                $div.find(\".curNum\").html(len);\r\n                $div.find(\".fabu-num\").css(\"display\", len > 0 ? 'block' : '');\r\n            });\r\n\r\n            //提交发布\r\n            $div.on(\"click\", \".qzPopSmt\", function () {\r\n                if ($(this).attr(\"data-isclick\") == 'true') {\r\n                    return;\r\n                }\r\n                $(this).attr(\"data-isclick\", true);\r\n                var $lipic = $(\".qz-pic-list-li:not(.temp)\");\r\n                var $fabuVideo = $(\".fabuVideo\");\r\n                var valHtm = '', picHtm = '', videoHtm = '';\r\n                var valcon = $(\".mathIpt\").val();\r\n\r\n                //处理图片\r\n                var images = \"\";\r\n                var len = $lipic.length > 9 ? 9 : $lipic.length - 1;\r\n                if (len > 0) {\r\n                    images = [];\r\n                    for (var i = 0; i < len; i++) {\r\n                        var type = $lipic.eq(i).find(\"img\").attr(\"data-type\");\r\n                        var src = $lipic.eq(i).find(\"img\").attr(\"src\");\r\n                        var small = src.replace(\"tiny\", \"small\");\r\n                        var origin = src.replace(\"tiny\", \"origin\");\r\n                        var tinysquare = src.replace(\"tiny\", \"tinysquare\");\r\n                        if (type == \"gif\") {\r\n                            origin = origin.replace(\".jpg\", \".gif\");\r\n                        }\r\n                        var height = $lipic.eq(i).find(\"img\").attr(\"data-height\");\r\n                        var width = $lipic.eq(i).find(\"img\").attr(\"data-width\");\r\n                        images.push({ \"tiny\": src, \"tinysquare\": tinysquare, \"small\": small, \"origin\": origin, \"height\": height, \"width\": width, \"imageType\": type });\r\n                    }\r\n                }\r\n\r\n                //判断视频是否添加\r\n                var videos = \"\";\r\n                if ($fabuVideo.length > 0) {\r\n                    var avvid = '', avtit = '', avurl = '', avimg = '', avname = '';\r\n                    if ($fabuVideo.attr(\"data-tit\") == undefined) {\r\n                        avtit = '视频链接'; //视频标题\r\n                    } else {\r\n                        avvid = $fabuVideo.attr(\"data-vid\"); //视频id\r\n                        avtit = $fabuVideo.attr(\"data-tit\"); //视频标题\r\n                        avimg = $fabuVideo.attr(\"data-img\"); //视频图片\r\n                        avname = $fabuVideo.attr(\"data-sitename\"); //视频图片\r\n                    }\r\n                    avurl = $fabuVideo.attr(\"data-url\"); //视频地址\r\n                    videos = { \"image\": avimg, \"title\": avtit, \"videoUrl\": avurl, \"videoVid\": avvid, \"siteName\": avname };\r\n                }\r\n                //如果图片和视频为空就判断输入框是为空\r\n                if (images == '' && videos == '' && !isTrim(valcon)) { alert(\"你还没有输入内容!\"); return; }\r\n                //上传图片或添加视频后，空内容也可以提交，否则空内容不可以提交;\r\n                var jsondata = {\r\n                    content: valcon,\r\n                    images: images,\r\n                    videos: videos,\r\n                    clubId: clubId,\r\n                    device: 1\r\n                };\r\n                $.ajax({\r\n                    type: \"post\",\r\n                    dataType: \"json\",\r\n                    crossDomain: true,\r\n                    xhrFields: {\r\n                        withCredentials: true\r\n                    },\r\n                    url: \"//i.gamersky.com/club/api/addclubcontent\",\r\n                    data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                    success: function (result) {\r\n                        if (result.dataType == \"ok\") {\r\n                            $(this).attr(\"data-isclick\", false);\r\n                            $(\".mathIpt\").val(\"\");\r\n                            var html = qzFunc.createCard(result.cardgroup);\r\n                            $(\"#qzCardList\").prepend(html);\r\n                            qzFunc.photoSwp();\r\n                            //点赞\r\n                            $(\".qzBtnLike\").like();\r\n                            $(\".qzBtnLike\").addLike();\r\n                            $(\".qzBtnComment\").commentCount();\r\n                            //var scrolltopval = $('html').scrollTop();\r\n                            $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                            setTimeout(function () {\r\n                                $(\".qzPop\").remove();\r\n                            }, 250);\r\n                        }\r\n                        else {\r\n                            alert(\"发布失败，请重试！\");\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n    //获取点赞数据\r\n    $.fn.like = function () {\r\n        var support = \"\";\r\n        $(this).each(function () {\r\n            if (support != \"\") {\r\n                support = support + \",\"\r\n            }\r\n            if($(this).attr('data-isloaded') !== 'loaded'){\r\n                support = support + $(this).attr(\"data-clubcontentid\");\r\n            }\r\n        });\r\n        var jsondata = {\r\n            clubContentId: support\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"//i.gamersky.com/club/api/getlike\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    var body = $.parseJSON(data.body);\r\n                    $.each(body, function (index, value) {\r\n                        $(\".qzBtnLike[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                            $(this).attr(\"data-isloaded\",'loaded').find(\"b\").html(value.digg);\r\n                            $(this).attr(\"data-likecount\", value.digg);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    //添加点赞\r\n    $.fn.addLike = function (options) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.unbind(\"click\");\r\n            $this.click(function (event) {\r\n                event.preventDefault();\r\n                $(this).UserOnline(function (response) {\r\n                    if (response.status == 'ok') {\r\n                        var Id = $this.attr(\"data-clubcontentid\");\r\n                        var jsondata = {\r\n                            clubContentId: Id,\r\n                            fromDevice: 1,\r\n                        };\r\n                        $.ajax({\r\n                            type: \"get\", dataType: \"jsonp\", url: \"//i.gamersky.com/club/api/addlike\",\r\n                            data: { jsondata: JSON.stringify(jsondata) },\r\n                            success: function (result) {\r\n                                if (result.status == \"err\") {\r\n                                    alert(result.body);\r\n                                }\r\n                                else {\r\n                                    var m = parseInt($this.find(\"b\").html()) + 1;\r\n                                    $this.find(\"b\").html(m);\r\n                                    $(\".tabNavCl a\").eq(1).find(\"i\").html(m);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n            });\r\n        });\r\n    };\r\n    $.fn.commentCount = function () {\r\n        var support = \"\";\r\n        $(this).each(function () {\r\n            if (support != \"\") {\r\n                support = support + \",\"\r\n            }\r\n            if($(this).attr('data-isloaded') !== 'loaded'){\r\n                support = support + $(this).attr(\"data-clubcontentid\");\r\n            }\r\n        });\r\n        var jsondata = {\r\n            clubContentId: support\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"//i.gamersky.com/club/api/getcommentcount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                if (data.status == \"ok\") {\r\n                    var body = $.parseJSON(data.body);\r\n                    $.each(body, function (index, value) {\r\n                        $(\".qzBtnComment[data-clubcontentid='\" + value.Id + \"']\").each(function () {\r\n                            $(this).attr('data-isloaded','loaded').html(value.commentCount);\r\n                            $(this).attr(\"data-commcount\", value.commentCount);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    //发布评论\r\n    $.fn.addComment = function (beforeOpenSt) {\r\n        var $this = $(this);\r\n        if ($this.attr(\"data-isclick\") == 'true') {\r\n            return;\r\n        }\r\n        $this.attr(\"data-isclick\", true);\r\n        var text = $.trim($this.parent().siblings(\".pop-con\").find(\".mathIpt\").val());\r\n        var userId = $this.data(\"userid\");\r\n        var clubContentId = $this.data(\"clubcontentid\");\r\n        var replyCommentId = $this.data(\"commentid\");\r\n        if (text == \"\") {\r\n            alert(\"评论不能为空！\");\r\n            return;\r\n        }\r\n        else if (text.length >= 5000) {\r\n            alert(\"评论不能超过5000个字符！\");\r\n            return;\r\n        }\r\n        else {\r\n            var jsondata = {\r\n                userId: userId,\r\n                clubContentId: clubContentId,\r\n                content: text,\r\n                replyId: replyCommentId,\r\n                fromDevice: 1\r\n            };\r\n            $.ajax({\r\n                type: \"post\",\r\n                dataType: \"json\",\r\n                crossDomain: true,\r\n                xhrFields: {\r\n                    withCredentials: true\r\n                },\r\n                url: \"//i.gamersky.com/club/api/addcomment\",\r\n                data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                success: function (result) {\r\n                    if (result.dataType == \"ok\") {\r\n                        $this.attr(\"data-isclick\", false);\r\n                        $(\".qzBtnComment[data-clubcontentid=\" + clubContentId + \"]\").html(\"1\").attr(\"data-commcount\", 1);\r\n                        //var scrolltopval = $(\".qzPop \").scrollTop();\r\n                        $(\".qzPop \").removeClass('cur');\r\n                        $('html,body').removeClass('hideScroll').animate({ scrollTop: beforeOpenSt }, 0);\r\n                        setTimeout(function () {\r\n                            $(\".qzPop \").remove();\r\n                        }, 250);\r\n                    }\r\n                    else {\r\n                        alert(result.body);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    $.fn.getClub = function (callback) {\r\n        return this.each(function () {\r\n            var $this = $(this),\r\n                cfg = $(\".qzNavFx a.cur\").attr(\"data-cfg\"),\r\n                contentType = clubConfig.listNavSetter[cfg].type,\r\n                sort = clubConfig.listNavSetter[cfg].sort,\r\n                pageIndex = parseInt($this.attr(\"data-pageIndex\")) + 1,\r\n                pageSize = $this.attr(\"data-pageSize\"),\r\n                loading = $this.attr(\"data-loading\");\r\n            if (loading == \"true\") {\r\n                return;\r\n            }\r\n            $this.attr(\"data-loading\", \"true\");\r\n            var length = $this.find(\".qzCard\").length;\r\n            var index = 0;\r\n            var excludeIds = $this.find(\".qzCard:first\").attr(\"data-cid\");\r\n            if (excludeIds ==undefined || excludeIds==null){\r\n                excludeIds=\"\"\r\n            }\r\n            excludeIds+=\",\";\r\n            if (length >=50) {\r\n                index = length - 50;\r\n            }\r\n            $this.find(\".qzCard:gt(\" + index + \")\").each(function () {\r\n                excludeIds += $(this).attr(\"data-cid\") + \",\";\r\n            });\r\n            var jsondata = {\r\n                contentType: contentType,\r\n                sort: sort,\r\n                pageIndex: pageIndex,\r\n                pageSize: pageSize,\r\n                clubId: clubId,\r\n                topicId: topicId,\r\n                excludeIds: excludeIds\r\n            };\r\n            $this.attr(\"data-pageIndex\", pageIndex);\r\n            $.ajax({\r\n                type: \"get\",\r\n                dataType: \"jsonp\",\r\n                url: \"//i.gamersky.com/club/api/getwebcallclubcontent\",\r\n                data: { \"jsondata\": JSON.stringify(jsondata) },\r\n                beforeSend: function () {\r\n                    //插入加载动画\r\n                    $(\".qz-loadnull,.qz-loaded\").remove();\r\n                    $this.append(qzConfig.loadingDom);\r\n                },\r\n                success: function (result) {\r\n                    if (pageIndex == 1) {\r\n                        $this.attr(\"data-clubname\", result.clubName).attr(\"data-topic\", result.topic);\r\n                    }\r\n                    if (result.dataType == \"ok\") {\r\n                        $this.attr(\"data-loading\", \"false\");\r\n                        $this.find('.qz-loading').remove();\r\n                        var len = result.cardgroup.length;\r\n                        if (pageIndex == 1 && len == 0) {\r\n                            $this.html(qzConfig.loadnullDom).attr('data-infiload', 'close');\r\n                        }\r\n                        else if (pageIndex == 1 && len > 0) {\r\n                            qzFunc.insertCard($this, result.cardgroup);\r\n                            $this.attr(\"data-infiload\", \"open\");\r\n                            qzConfig.isCanLoading = true;\r\n                        }\r\n                        else if (pageIndex > 1 && len > 0) {\r\n                            qzFunc.appendCard($this, result.cardgroup);\r\n                            $this.attr(\"data-infiload\", \"open\");\r\n                            qzConfig.isCanLoading = true;\r\n                        }\r\n                        else {\r\n                            $this.attr('data-infiload', 'close').append(qzConfig.loadedDom);\r\n                        }\r\n                        $(\".qzBtnLike\").like();\r\n                        $(\".qzBtnLike\").addLike();\r\n                        $(\".qzBtnComment\").commentCount();\r\n                    }\r\n                    else {\r\n                        $this.find('.qz-loading').remove();\r\n                        qzConfig.isCanLoading = false;\r\n                        if (pageIndex > 1) {\r\n                            $this.attr('data-loading', 'true').append(qzConfig.loadedDom);\r\n                        }\r\n                        else {\r\n                            $this.attr('data-loading', 'true').html(qzConfig.loadnullDom);\r\n                        }\r\n                    }\r\n                    if (typeof callback === 'function') {\r\n                        callback && callback();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    };\r\n    $.fn.removeTarget = function () {\r\n        return this.each(function () {\r\n            $(this).find(\"a\").attr(\"target\", \"_self\");\r\n        })\r\n    }\r\n    //获取参与人数\r\n    $.fn.joinCount = function () {\r\n        var jsondata = {\r\n            clubId: clubId,\r\n            topicId: topicId\r\n        };\r\n        $.ajax({\r\n            type: \"get\", dataType: \"jsonp\", url: \"//i.gamersky.com/club/api/getjoincount\",\r\n            data: { jsondata: JSON.stringify(jsondata) },\r\n            success: function (data) {\r\n                $(\".joinCount\").find(\"p span\").eq(0).html(data.join + \"人\");\r\n                $(\".joinCount\").find(\"p span\").eq(1).html(data.clubContent);\r\n            }\r\n        });\r\n    };\r\n    $.fn.showNav = function () {\r\n        var that = this;\r\n        return this.each(function () {\r\n            var jsondata = {\r\n                clubId: clubId,\r\n                topicId: topicId\r\n            };\r\n            $.ajax({\r\n                type: \"get\", dataType: \"jsonp\", url: \"//i.gamersky.com/club/api/isshownav\",\r\n                data: { jsondata: JSON.stringify(jsondata) },\r\n                success: function (data) {\r\n                    if (data.isElite) {\r\n                        $(that).find('a[data-cfg=\"best\"]').css(\"display\",\"block\");\r\n                    }\r\n                    var icon;\r\n                    if(clubId>0){\r\n                        icon = data.clubWapIcon;\r\n                    }\r\n                    if($.trim(topicId) !== ''){\r\n                        icon = data.topicWapIcon;\r\n                    }\r\n                    $(\"#qzMain .icon img\").attr(\"src\",icon);\r\n                }\r\n            });\r\n        })\r\n    };\r\n    qzFunc.main();\r\n    $(document).ready(function () {\r\n        $('#qzCardList').attr(\"data-pageIndex\", 0);\r\n        $('#qzCardList').getClub();\r\n        $(\".qzNavFx\").showNav();\r\n        $(\".joinCount\").joinCount();\r\n        var url = \"\";\r\n        if (clubId > 0) {\r\n            $(\".qwqz\").html(\"前往圈子\");\r\n            url = \"//i.gamersky.com/m/club/\" + clubId + \"\";\r\n        }\r\n        if (topicId > 0) {\r\n            $(\".qwqz\").html(\"前往话题\");\r\n            url = clubId > 0 ? \"//i.gamersky.com/m/topic/\" + topicId + \"?club=\" + clubId + \"\" : \"//i.gamersky.com/m/topic/\" + topicId + \"\";\r\n        }\r\n        $(\".qwqz\").attr(\"href\", url);\r\n    });\r\n})(jQuery);"]}